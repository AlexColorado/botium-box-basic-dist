var _0x4dc7=['\x20set\x20Test\x20Session\x20Job\x20RUNNING.','\x20set\x20Test\x20Session\x20Job\x20RUNNING\x20failed:\x20','progressPercent','updateTestSessionJob','\x20failed:\x20','createTestSessionJobLog','{\x20id\x20}','\x20wrote\x20log:\x20','\x20write\x20log\x20failed:\x20','testcase','source','success','messages','filename','testSetFilename','testSetId','testSetScriptId','testSetScript','testSetRepositoryId','testSetRepository','testSetFolder','testSetFolderId','testSetExcelId','testSetExcel','attachments','mimeType','createTestSessionTestCaseResult','\x20in\x20TestSession\x20','TestResult\x20for\x20TestCase\x20','\x20registration\x20failed:\x20','testSessionProgress\x20failed:\x20','testSessionJobCompleted:\x20Job\x20','\x20not\x20registered\x20as\x20test\x20session\x20job.\x20Skipping.','READY','\x20completed.','Job\x20completed','testSessionJobCompleted\x20createTestSessionJobLog\x20failed:\x20','testSessionJobCompleted\x20failed:\x20','{\x20id,\x20testSession\x20{\x20id\x20name\x20}\x20\x20}','testSessionJobFailed:\x20Job\x20','Job\x20failed:\x20','testSessionJobFailed\x20failed:\x20','\x20testSessionCheckFinished\x20','updateManyTestSessions','testSessionCheckFinished\x20','FAILED','\x20sendSubscriptionProgress','{\x20id\x20name\x20status\x20jobs\x20{\x20id\x20progressPercent\x20}\x20}','pubsub','TEST_SESSION_PROGRESS','botium-box-server-agents','ctxFactory','start','agent.heartbeat','agent.heartbeat:\x20','agent.register','agent.register:\x20','box.createprocessingjobs','box.createprocessingjobs:\x20','startTestSession','error','ERROR\x20connecting\x20to\x20queue:','job\x20enqueue','\x20got\x20queued\x20of\x20type\x20','jobProcessingQueue\x20error:\x20','job\x20error','Job\x20','\x20error\x20','testSessionJobFailed','job\x20complete','\x20completed\x20','testSessionJobCompleted','\x20progress\x20','testSessionProgress','JWT_SECRET','JWT_AUDIENCE','botiumbox','JWT_ISSUER','JWT_EXPIRY_DAYS','toString','{\x20id\x20name\x20email\x20roles\x20}','request','user','name_ASC','agents','listWorkspaces','workspaces','workspace_id','botium-box-server-livechat','BotDriver','asyncIterator','\x20not\x20available.','{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}','liveChatStartBot(','publish','MESSAGE_SENTTOBOT','MESSAGE_RECEIVEDFROMBOT','Build',')\x20container\x20built,\x20now\x20starting','Start',')\x20container\x20started.','Conversation\x20','liveChatSendToBot(',')\x20sending\x20convoStep\x20','UserSays','liveChatStopBot(',')\x20stopping\x20container','Stop','Clean',')\x20container\x20stopped.','{\x20id\x20name\x20}','sender','messageText','buttons','text','media','MEDIA\x20','mediaUri','cards','BUTTONS\x20','image','createTestSetScript','liveChatSaveConvoSteps(',')\x20saved\x20test\x20case\x20for\x20test\x20set\x20','\x20-\x20','createdAt_DESC','testSessions','testSessionTestCaseResult','botium-retrieve-all-test-cases','SCRIPTING_FORMAT_XSLX','from','content','base64','Compile','SCRIPTING_TYPE_UTTERANCES',':\x20Convo\x20Script\x20compilation\x20failed:\x20',':\x20Utterance\x20script\x20compilation\x20failed:\x20','folders','ReadScriptsFromDirectory',':\x20Folder\x20','all','SCRIPTING_XLSX_STARTROW','caps','SCRIPTING_XLSX_STARTCOL','SCRIPTING_XLSX_SHEETNAMES_UTTERANCES','values','concat','metadata','habits','typo','keys','execute','has','duplicate\x20utterance\x20:\x20<','add','humanifiersToExecute','botium-clone-testset','_JUST_BOT','allHumanifiers','BOTIUM_TEMPDIR','{slugify(testSet.Name)}_CLONED_','Aa0','sync','size','both','neither','toHumanify','filter','allUtteranceCount','utterancesToHumanifyCount','Cloning\x20finished:\x20','_CLONED_','writeFile','.utterances.txt','Decompile','.convo.txt','conversation','delete','bot','round','percentToHumanify','There\x20is\x20already\x20an\x20utterance\x20','\x20in\x20the\x20testset!','uniq','humanifiedRefs','humanifiedRefCount','humanifiedUtterancesCount','duplicates','testSetScripts','header','no\x20script\x20provided','testSetRepositories','testSetExcels','possibleOptions','cache','get','set','del','delStartWith','indexOf','flush','flushAll','deviceSet','deviceProvider','https://saucelabs.com/rest/v1/info/platforms/all','device','short_version','long_name','Safari','Chrome','iphone','ipad','api_name','iOS','Android','uniqBy','orderBy','asc','LOCALSELENIUM','DESKTOP','phantomjs','Google\x20Chrome\x20(Headless)','--headless','--disable-gpu','PhantomJS\x20Virtual\x20Browser','testProjects','users','apiKeys','deviceProviders','TODAY','startOf','LASTWEEK','subtract','days','LAST2WEEKS','LASTMONTH','LAST2MONTHS','day','chartFailedCountByTestSetByDay_','toDate','{\x20id\x20results\x20{\x20success\x20testSet\x20{\x20id\x20}\x20}\x20}','chatbots','isBefore','{\x20id\x20results\x20{\x20success\x20}\x20}','results','chartTestSetResultCount_','UNKNOWN','lastRun','createdAt','lastTestSessionId','testCaseLastTotalCount','testCaseLastSuccessCount','testCaseLastSuccessRate','previousTestSessionId','testCasePreviousTotalCount','testCasePreviousSuccessCount','testCasePreviousSuccessRate','testCaseTrend','GOOD','CONSTANT','desc','{\x20id\x20createdAt\x20results\x20{\x20success\x20testSet\x20{\x20id\x20name\x20}\x20}\x20}','totalCount','failedCount','chartTestProjectTrainingStatusByDeviceSet_','{\x20id\x20createdAt\x20results\x20{\x20success\x20deviceSet\x20{\x20id\x20name\x20}\x20}\x20}','successCount','Invalid\x20request','compare','Invalid\x20password','exists','Agent','Agent\x20not\x20found\x20','createChatbot','Chatbot','Chatbot\x20not\x20found\x20','updateChatbot','deleteChatbot','{id}','botium-box-server-mutation-testsession','Job\x20Creation\x20Job\x20for\x20Test\x20Session\x20','deleteManyTestSessionJobLogs','deleteManyTestSessionJobs','deleteManyTestSessionTestCaseResults','TestSet\x20not\x20found\x20','deleteTestSet','TestSetScript\x20not\x20found\x20','deleteTestSetScript','createTestSetFolder','TestSetFolder','TestSetFolder\x20not\x20found\x20','updateTestSetFolder','updateTestSetExcel','basename','\x22,\x20Humanifiers\x20\x22','\x22,\x20percentage\x20','Cloned','cloned','createTestSession','botium-box-server-mutation-testproject','createTestProject','\x20not\x20found','Manual','{\x20id\x20name\x20chatbot\x20{\x20id\x20}\x20testSets\x20{\x20id\x20}\x20deviceSets\x20{\x20id\x20}\x20}','TestProject','TestProject\x20not\x20found\x20','deleteTestProject','Error\x20deleting\x20TestProject\x20','botium-box-server-mutation-settings','roles','USER','User\x20not\x20found\x20','findIndex','ADMIN','Only\x20admin\x20can\x20update\x20users','hash','admin','updateUser','deleteUser','Error\x20deleting\x20User\x20','key','createApiKey','updateApiKey','deleteApiKey','DeviceProvider\x20type\x20','\x20not\x20supported\x20in\x20this\x20version','createDeviceProvider','DeviceProvider\x20not\x20found\x20','updateDeviceProvider','DeviceProvider\x20type\x20INTEGRATED\x20not\x20allowed\x20to\x20delete','deleteDeviceProvider','Error\x20deleting\x20DeviceProvider\x20','botium-box-server-mutation-deviceset','createDeviceSet','DeviceSet','DeviceSet\x20not\x20found\x20','updateDeviceSet','{\x20id\x20devices\x20{\x20id\x20}\x20}','deleteManyDeviceDescriptors','Error\x20deleting\x20DeviceSet\x20','CREATED','subscription','testSessionJob','UPDATED','testSessionJobLog','Query','Mutation','Subscription','request.apiKey','Not\x20logged\x20in','includes','Unauthorized,\x20incorrect\x20role','botium-box-middleware-jwt','APIKEY','body','headers','lookupApiKey','Api\x20Key\x20found\x20-\x20','JWT_AUTOLOGIN_USERNAME','Auto\x20login\x20user\x20','authorization','split','Bearer','token','use','botium-box-server-endpoints-attachments','/api/attachment/excel/:id','params','getExcel','attachment;\x20filename=','end','Excel\x20not\x20found\x20-\x20','Excel\x20lookup\x20error\x20-\x20','sendStatus','/api/attachment/screenshot/:id','getAttachment','writeHead','Attachment\x20not\x20found\x20-\x20','botium-box-server-endpoints-build','findSimpleTestSessionResults','REPORTER','json','send','groupBy','unnamed','Content-Type','text/xml','VALID\x20REPORTER\x20OPTIONS:\x20json,\x20junit','Test\x20Session\x20lookup\x20error\x20-\x20','next','\x20got\x20status:\x20','BUILDID','TAG','STRING','CAPS','SOURCES','ENVS','isArray','Creating\x20Test\x20Session\x20','WAIT','Test\x20Project\x20start\x20error\x20-\x20','{\x20id\x20name\x20status\x20}','nameOrId','/api/triggerbuild/:code','/api/build/:nameOrId','buildInfo','apiKey','/api/attachment/*','/api/build/*','/api/triggerbuild/*','bind','botium-box-server-index','PRISMA_SCHEMA','PRISMA_DEBUG','PRISMA_SECRET','BOTIUMBOX_QUEUE_SETTINGS','Got\x20queue\x20settings\x20\x27','ERROR\x20parsing\x20queue\x20settings\x20\x22','BOTIUMBOX_QUEUE_PREFIX','BOTIUMBOX_QUEUE_REDISURL','redis','connecting\x20to\x20Botium\x20queue\x20\x27','./botiumwork','Using\x20BOTIUM_TEMPDIR\x20','ERROR\x20verifying\x20BOTIUM_TEMPDIR\x20\x27','ERROR\x20verifying\x20TESTSETDIR\x20\x27','GRAPHQL_SCHEMA','./src/schema.graphql','PORT','/graphql','/subscriptions','onConnect\x20called,\x20authorization\x20','Authorization','Missing\x20auth\x20token!','../../client/build','static','Server\x20started,\x20listening\x20on\x20port\x20','\x20for\x20incoming\x20requests,\x20static\x20files\x20served\x20from\x20','undefined','exports','async','jsonwebtoken','watson-developer-cloud/assistant/v1','botium-core','slug','botium-core/src/Source','botium-core/src/repos/GitRepo','botium-core/src/Capabilities','require-all','mkdirp','rimraf','botium-core/src/Defaults','botium-core/src/scripting/CompilerTxt','node-cache','request-promise-native','path','slugify','randomatic','bcryptjs','graphql-yoga','lodash.get','express-jwt','util','lodash','debug','xml','body-parser','dotenv-flow','prisma-binding','express','connect-history-api-fallback','function','amd','url','uuid/v1','botium-core/src/scripting/Constants','moment','main','betterQueue','v1$1','botiumCore','GitRepo','requireAll','ScriptingProvider','CompilerTxt','nodeCache','graphqlYoga','expressJwt','lodash$1','bodyParser','dotenvFlow','kue','connectHistoryApiFallback','hasOwnProperty','default','COMMUNITY\x20EDITION','feature/BOT-176_ShowVersionAndBuildInformation','03da144150324720885ae9bc1a81c44676d03d9a','BOTIUM\x20BOX\x20-\x20SERVER','log','BUILD_TARGET:\x20','buildTarget','BUILD_BRANCH:\x20','buildBranch','buildRevision','BUILD_TIMESTAMP:\x20','buildDate','TESTSETDIR_PUBLIC','resolve','env','readdirSync','reduce','join','push','statSync','query','testSetFolders','{\x20id\x20name\x20testSet\x20{\x20id\x20name\x20}\x20}','length','\x20already\x20in\x20use\x20-\x20','\x20in\x20Test\x20Set\x20','testSet','scanDirForTestSets\x20scanning\x20','scanDirForTestSets\x20','\x20found\x20','\x20subdirectories\x20...','forEach','Imported\x20from\x20directory\x20','\x20files','sep','mutation','createTestSet','TESTSETDIR','catch','scanForTestSets\x20failed:\x20','botium-box-server-agents-utils','testSessionTestCaseResultAttachment','{\x20id\x20filename\x20filecontent\x20}','now','toISOString','then','testSession','{\x20\x0a\x20\x20\x20\x20id\x20\x0a\x20\x20\x20\x20name\x20\x0a\x20\x20\x20\x20batchCount\x20\x0a\x20\x20\x20\x20chatbot\x20{\x20\x0a\x20\x20\x20\x20\x20\x20id\x20\x0a\x20\x20\x20\x20\x20\x20name\x20\x0a\x20\x20\x20\x20\x20\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20\x0a\x20\x20\x20\x20\x20\x20sources\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20\x0a\x20\x20\x20\x20\x20\x20envs\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20\x0a\x20\x20\x20\x20}\x20\x0a\x20\x20\x20\x20testSets\x20{\x20\x0a\x20\x20\x20\x20\x20\x20id\x20\x0a\x20\x20\x20\x20\x20\x20name\x20\x0a\x20\x20\x20\x20\x20\x20expandConvos\x0a\x20\x20\x20\x20\x20\x20expandUtterancesToConvos\x0a\x20\x20\x20\x20\x20\x20expandUtterancesIncomprehension\x0a\x20\x20\x20\x20\x20\x20scripts\x20{\x20id\x20script\x20scriptType\x20}\x20\x0a\x20\x20\x20\x20\x20\x20repositories\x20{\x20id\x20giturl\x20gitbranch\x20gitdir\x20globFilter\x20}\x20\x0a\x20\x20\x20\x20\x20\x20folders\x20{\x20id\x20path\x20globFilter\x20}\x0a\x20\x20\x20\x20\x20\x20excels\x20{\x20id\x20filename\x20filecontent\x20hasConvos\x20hasUtterances\x20worksheetsConvos\x20worksheetsUtterances\x20startRow\x20startCol\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20deviceSets\x20{\x20id\x20name\x20provider\x20{\x20id\x20name\x20type\x20url\x20username\x20password\x20}\x20devices\x20{\x20id\x20name\x20capabilities\x20}\x20}\x20\x0a\x20\x20\x20\x20testProject\x20{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}\x0a\x20\x20\x20\x20agent\x20{\x20id\x20name\x20}\x20\x0a\x20\x20\x20\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20\x0a\x20\x20\x20\x20sources\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20\x0a\x20\x20\x20\x20envs\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20\x0a\x20\x20\x20\x20}','{\x20id\x20name\x20status\x0a\x20\x20\x20\x20results\x20{\x20id\x20testcaseName\x20testcaseSource\x20success\x20err\x20testSet\x20{\x20id\x20name\x20}\x20}\x20}','data','name','invalid\x20agent\x20event,\x20name\x20or\x20group\x20not\x20given\x20','reject','agent','type','TEXT','stringValue','replace','INT','intValue','BOOLEAN','booleanValue','parse','jsonValue','botium-box-server-agents-heartbeat','findAgentFromJobData','{\x20id,\x20name\x20}','updateAgent','\x20not\x20configured','botium-box-server-agents-registeragent','{\x20id,\x20name,\x20capabilities\x20{\x20name,\x20stringValue\x20}\x20}','capabilities','stringify','Agent\x20','expandUtterancesToConvos','expandUtterancesIncomprehension','scripts','SCRIPTING_TYPE_CONVO','map','script','scriptType','SCRIPTING_FORMAT_TXT','globFilter','excels','filecontent','hasConvos','hasUtterances','worksheetsUtterances','startRow','startCol','botium-box-server-agents-testsession','findFullTestSession','Test\x20Session\x20','startTestSession\x20','process.','process','\x20queueToSend:\x20','combineBotiumCapabilities','composeBotiumCapabilities','chatbot','testProject','\x20testSessionCaps:\x20','sources','\x20testSessionSources:\x20','envs','\x20testSessionEnvs:\x20','testSets','\x20testSessionTestSets:\x20','batchCount','queueConnector','create','Processing\x20Job\x20#','removeOnComplete','save','Saving\x20batchJob\x20failed:\x20','createTestSessionJob','PENDING','{\x20id,\x20jobId\x20}','TestSessionJob\x20for\x20TestSession\x20','\x20registered\x20(jobId:\x20','\x20id:\x20','\x20registration\x20failed\x20(jobId:\x20','):\x20','deviceSets','provider','SAUCELABS','assign','username','password','protocol','host','port','pathname','INTEGRATED','\x20adding\x20capability\x20for\x20starting\x20integrated\x20PhantomJS','WEBDRIVERIO_START_PHANTOMJS','\x20testSessionDevices:\x20','sourceTag','deviceSetId','deviceName','cloneDeep','convos','utterances','repositories','deviceOptions','startTestSession\x20failed:\x20','testSessionJobs','{\x20id\x20status\x20progressPercent\x20testSession\x20{\x20id\x20name\x20status\x20}\x20\x20}','status','updateTestSession','RUNNING','Test\x20Session\x20Job\x20','\x20set\x20Test\x20Session\x20','\x20RUNNING.','isNumber'];(function(_0x2d8f05,_0x4b81bb){var _0x4d74cb=function(_0x32719f){while(--_0x32719f){_0x2d8f05['push'](_0x2d8f05['shift']());}};var _0x33748d=function(){var _0x3e4c21={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5c685e,_0x3e3156,_0x1e9e81,_0x292610){_0x292610=_0x292610||{};var _0x151bd2=_0x3e3156+'='+_0x1e9e81;var _0x558098=0x0;for(var _0x558098=0x0,_0x230f38=_0x5c685e['length'];_0x558098<_0x230f38;_0x558098++){var _0x948b6c=_0x5c685e[_0x558098];_0x151bd2+=';\x20'+_0x948b6c;var _0x29929c=_0x5c685e[_0x948b6c];_0x5c685e['push'](_0x29929c);_0x230f38=_0x5c685e['length'];if(_0x29929c!==!![]){_0x151bd2+='='+_0x29929c;}}_0x292610['cookie']=_0x151bd2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5dd881,_0x550fbc){_0x5dd881=_0x5dd881||function(_0x18d5c9){return _0x18d5c9;};var _0x4ce2f1=_0x5dd881(new RegExp('(?:^|;\x20)'+_0x550fbc['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x333808=function(_0x432180,_0x2ab90b){_0x432180(++_0x2ab90b);};_0x333808(_0x4d74cb,_0x4b81bb);return _0x4ce2f1?decodeURIComponent(_0x4ce2f1[0x1]):undefined;}};var _0x991246=function(){var _0x981158=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x981158['test'](_0x3e4c21['removeCookie']['toString']());};_0x3e4c21['updateCookie']=_0x991246;var _0x57b080='';var _0x219af0=_0x3e4c21['updateCookie']();if(!_0x219af0){_0x3e4c21['setCookie'](['*'],'counter',0x1);}else if(_0x219af0){_0x57b080=_0x3e4c21['getCookie'](null,'counter');}else{_0x3e4c21['removeCookie']();}};_0x33748d();}(_0x4dc7,0x1b6));var _0x28ae=function(_0x2af6fa,_0x252057){_0x2af6fa=_0x2af6fa-0x0;var _0x17f41c=_0x4dc7[_0x2af6fa];return _0x17f41c;};(function(_0x5b849a,_0x58d34f){var _0x180141=function(){var _0x3566d4=!![];return function(_0x5442a7,_0x17e1fa){var _0x14478e=_0x3566d4?function(){if(_0x17e1fa){var _0x59db25=_0x17e1fa['apply'](_0x5442a7,arguments);_0x17e1fa=null;return _0x59db25;}}:function(){};_0x3566d4=![];return _0x14478e;};}();var _0x569a74=_0x180141(this,function(){var _0x5b25c3=function(){return'\x64\x65\x76';},_0x358635=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3ce3c7=function(){var _0x60876d=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x60876d['\x74\x65\x73\x74'](_0x5b25c3['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5672c4=function(){var _0x2bf427=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x2bf427['\x74\x65\x73\x74'](_0x358635['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1eba11=function(_0x5884b4){var _0x13fbf6=~-0x1>>0x1+0xff%0x0;if(_0x5884b4['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x13fbf6)){_0xb59050(_0x5884b4);}};var _0xb59050=function(_0x389555){var _0x5e160f=~-0x4>>0x1+0xff%0x0;if(_0x389555['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5e160f){_0x1eba11(_0x389555);}};if(!_0x3ce3c7()){if(!_0x5672c4()){_0x1eba11('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1eba11('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1eba11('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x569a74();typeof exports==='object'&&typeof module!==_0x28ae('0x0')?module[_0x28ae('0x1')]=_0x58d34f(require(_0x28ae('0x2')),require('url'),require('better-queue'),require(_0x28ae('0x3')),require(_0x28ae('0x4')),require('uuid/v1'),require(_0x28ae('0x5')),require('fs'),require('botium-core/src/scripting/Constants'),require(_0x28ae('0x6')),require(_0x28ae('0x7')),require(_0x28ae('0x8')),require(_0x28ae('0x9')),require(_0x28ae('0xa')),require(_0x28ae('0xb')),require(_0x28ae('0xc')),require(_0x28ae('0xd')),require('botium-core/src/scripting/ScriptingProvider'),require(_0x28ae('0xe')),require(_0x28ae('0xf')),require(_0x28ae('0x10')),require('moment'),require(_0x28ae('0x11')),require(_0x28ae('0x12')),require(_0x28ae('0x13')),require(_0x28ae('0x14')),require(_0x28ae('0x15')),require(_0x28ae('0x16')),require(_0x28ae('0x17')),require(_0x28ae('0x18')),require(_0x28ae('0x19')),require(_0x28ae('0x1a')),require(_0x28ae('0x1b')),require(_0x28ae('0x1c')),require(_0x28ae('0x1d')),require(_0x28ae('0x1e')),require(_0x28ae('0x1f')),require('kue'),require(_0x28ae('0x20'))):typeof define===_0x28ae('0x21')&&define[_0x28ae('0x22')]?define([_0x28ae('0x2'),_0x28ae('0x23'),'better-queue',_0x28ae('0x3'),_0x28ae('0x4'),_0x28ae('0x24'),'botium-core','fs',_0x28ae('0x25'),_0x28ae('0x6'),'botium-core/src/Source','botium-core/src/repos/GitRepo',_0x28ae('0x9'),_0x28ae('0xa'),_0x28ae('0xb'),'rimraf',_0x28ae('0xd'),'botium-core/src/scripting/ScriptingProvider',_0x28ae('0xe'),_0x28ae('0xf'),_0x28ae('0x10'),_0x28ae('0x26'),_0x28ae('0x11'),_0x28ae('0x12'),_0x28ae('0x13'),'bcryptjs',_0x28ae('0x15'),_0x28ae('0x16'),'express-jwt',_0x28ae('0x18'),_0x28ae('0x19'),_0x28ae('0x1a'),_0x28ae('0x1b'),_0x28ae('0x1c'),_0x28ae('0x1d'),_0x28ae('0x1e'),_0x28ae('0x1f'),'kue','connect-history-api-fallback'],_0x58d34f):_0x5b849a[_0x28ae('0x27')]=_0x58d34f(_0x5b849a[_0x28ae('0x2')],_0x5b849a[_0x28ae('0x23')],_0x5b849a[_0x28ae('0x28')],_0x5b849a['jsonwebtoken'],_0x5b849a['v1'],_0x5b849a[_0x28ae('0x29')],_0x5b849a[_0x28ae('0x2a')],_0x5b849a['fs'],_0x5b849a['Constants'],_0x5b849a['slug'],_0x5b849a['Source'],_0x5b849a[_0x28ae('0x2b')],_0x5b849a['Capabilities'],_0x5b849a[_0x28ae('0x2c')],_0x5b849a[_0x28ae('0xb')],_0x5b849a[_0x28ae('0xc')],_0x5b849a['Defaults'],_0x5b849a[_0x28ae('0x2d')],_0x5b849a[_0x28ae('0x2e')],_0x5b849a[_0x28ae('0x2f')],_0x5b849a['requestPromiseNative'],_0x5b849a[_0x28ae('0x26')],_0x5b849a[_0x28ae('0x11')],_0x5b849a[_0x28ae('0x12')],_0x5b849a[_0x28ae('0x13')],_0x5b849a[_0x28ae('0x14')],_0x5b849a[_0x28ae('0x30')],_0x5b849a[_0x28ae('0x19')],_0x5b849a[_0x28ae('0x31')],_0x5b849a[_0x28ae('0x18')],_0x5b849a[_0x28ae('0x32')],_0x5b849a['debug'],_0x5b849a[_0x28ae('0x1b')],_0x5b849a[_0x28ae('0x33')],_0x5b849a[_0x28ae('0x34')],_0x5b849a['prismaBinding'],_0x5b849a['express'],_0x5b849a[_0x28ae('0x35')],_0x5b849a[_0x28ae('0x36')]);}(this,function(_0x5f5c35,_0x1c4261,_0x5e304e,_0x515e75,_0x31bb21,_0x1b102a,_0x4b45fc,_0x1b182d,_0x2d2c32,_0x19d516,_0x144759,_0x571bbe,_0x3a5bf9,_0x2277cf,_0x358caf,_0x4a79cf,_0x2b434a,_0x12d2a0,_0x5b0f87,_0x1cdec7,_0x804454,_0x37df5f,_0x4237c5,_0x328b7b,_0x53e292,_0x21d046,_0x3d4e12,_0x509437,_0xa0ad02,_0x41a0b,_0x10e512,_0x413ae8,_0x440cad,_0x473d05,_0x19ed99,_0x18fd94,_0x1d9fc2,_0x2d94a7,_0x1952d6){'use strict';_0x5f5c35=_0x5f5c35&&_0x5f5c35[_0x28ae('0x37')](_0x28ae('0x38'))?_0x5f5c35[_0x28ae('0x38')]:_0x5f5c35;_0x1c4261=_0x1c4261&&_0x1c4261[_0x28ae('0x37')](_0x28ae('0x38'))?_0x1c4261[_0x28ae('0x38')]:_0x1c4261;_0x5e304e=_0x5e304e&&_0x5e304e[_0x28ae('0x37')]('default')?_0x5e304e['default']:_0x5e304e;_0x515e75=_0x515e75&&_0x515e75['hasOwnProperty'](_0x28ae('0x38'))?_0x515e75[_0x28ae('0x38')]:_0x515e75;_0x31bb21=_0x31bb21&&_0x31bb21[_0x28ae('0x37')](_0x28ae('0x38'))?_0x31bb21[_0x28ae('0x38')]:_0x31bb21;_0x1b102a=_0x1b102a&&_0x1b102a['hasOwnProperty']('default')?_0x1b102a[_0x28ae('0x38')]:_0x1b102a;_0x4b45fc=_0x4b45fc&&_0x4b45fc[_0x28ae('0x37')](_0x28ae('0x38'))?_0x4b45fc[_0x28ae('0x38')]:_0x4b45fc;_0x1b182d=_0x1b182d&&_0x1b182d[_0x28ae('0x37')](_0x28ae('0x38'))?_0x1b182d[_0x28ae('0x38')]:_0x1b182d;_0x2d2c32=_0x2d2c32&&_0x2d2c32['hasOwnProperty'](_0x28ae('0x38'))?_0x2d2c32[_0x28ae('0x38')]:_0x2d2c32;_0x19d516=_0x19d516&&_0x19d516[_0x28ae('0x37')]('default')?_0x19d516[_0x28ae('0x38')]:_0x19d516;_0x144759=_0x144759&&_0x144759[_0x28ae('0x37')](_0x28ae('0x38'))?_0x144759[_0x28ae('0x38')]:_0x144759;_0x571bbe=_0x571bbe&&_0x571bbe[_0x28ae('0x37')](_0x28ae('0x38'))?_0x571bbe[_0x28ae('0x38')]:_0x571bbe;_0x3a5bf9=_0x3a5bf9&&_0x3a5bf9[_0x28ae('0x37')](_0x28ae('0x38'))?_0x3a5bf9[_0x28ae('0x38')]:_0x3a5bf9;_0x2277cf=_0x2277cf&&_0x2277cf[_0x28ae('0x37')](_0x28ae('0x38'))?_0x2277cf[_0x28ae('0x38')]:_0x2277cf;_0x358caf=_0x358caf&&_0x358caf[_0x28ae('0x37')]('default')?_0x358caf['default']:_0x358caf;_0x4a79cf=_0x4a79cf&&_0x4a79cf['hasOwnProperty'](_0x28ae('0x38'))?_0x4a79cf[_0x28ae('0x38')]:_0x4a79cf;_0x2b434a=_0x2b434a&&_0x2b434a[_0x28ae('0x37')]('default')?_0x2b434a[_0x28ae('0x38')]:_0x2b434a;_0x12d2a0=_0x12d2a0&&_0x12d2a0[_0x28ae('0x37')]('default')?_0x12d2a0[_0x28ae('0x38')]:_0x12d2a0;_0x5b0f87=_0x5b0f87&&_0x5b0f87['hasOwnProperty'](_0x28ae('0x38'))?_0x5b0f87[_0x28ae('0x38')]:_0x5b0f87;_0x1cdec7=_0x1cdec7&&_0x1cdec7[_0x28ae('0x37')](_0x28ae('0x38'))?_0x1cdec7[_0x28ae('0x38')]:_0x1cdec7;_0x804454=_0x804454&&_0x804454[_0x28ae('0x37')](_0x28ae('0x38'))?_0x804454[_0x28ae('0x38')]:_0x804454;_0x37df5f=_0x37df5f&&_0x37df5f[_0x28ae('0x37')](_0x28ae('0x38'))?_0x37df5f[_0x28ae('0x38')]:_0x37df5f;_0x4237c5=_0x4237c5&&_0x4237c5[_0x28ae('0x37')](_0x28ae('0x38'))?_0x4237c5['default']:_0x4237c5;_0x328b7b=_0x328b7b&&_0x328b7b[_0x28ae('0x37')](_0x28ae('0x38'))?_0x328b7b[_0x28ae('0x38')]:_0x328b7b;_0x53e292=_0x53e292&&_0x53e292[_0x28ae('0x37')]('default')?_0x53e292['default']:_0x53e292;_0x21d046=_0x21d046&&_0x21d046[_0x28ae('0x37')](_0x28ae('0x38'))?_0x21d046['default']:_0x21d046;_0x3d4e12=_0x3d4e12&&_0x3d4e12[_0x28ae('0x37')]('default')?_0x3d4e12[_0x28ae('0x38')]:_0x3d4e12;_0x509437=_0x509437&&_0x509437[_0x28ae('0x37')]('default')?_0x509437[_0x28ae('0x38')]:_0x509437;_0xa0ad02=_0xa0ad02&&_0xa0ad02[_0x28ae('0x37')](_0x28ae('0x38'))?_0xa0ad02[_0x28ae('0x38')]:_0xa0ad02;_0x41a0b=_0x41a0b&&_0x41a0b[_0x28ae('0x37')](_0x28ae('0x38'))?_0x41a0b[_0x28ae('0x38')]:_0x41a0b;_0x10e512=_0x10e512&&_0x10e512[_0x28ae('0x37')](_0x28ae('0x38'))?_0x10e512[_0x28ae('0x38')]:_0x10e512;_0x413ae8=_0x413ae8&&_0x413ae8['hasOwnProperty']('default')?_0x413ae8[_0x28ae('0x38')]:_0x413ae8;_0x440cad=_0x440cad&&_0x440cad[_0x28ae('0x37')]('default')?_0x440cad[_0x28ae('0x38')]:_0x440cad;_0x473d05=_0x473d05&&_0x473d05[_0x28ae('0x37')](_0x28ae('0x38'))?_0x473d05[_0x28ae('0x38')]:_0x473d05;_0x19ed99=_0x19ed99&&_0x19ed99[_0x28ae('0x37')]('default')?_0x19ed99['default']:_0x19ed99;_0x18fd94=_0x18fd94&&_0x18fd94[_0x28ae('0x37')]('default')?_0x18fd94[_0x28ae('0x38')]:_0x18fd94;_0x1d9fc2=_0x1d9fc2&&_0x1d9fc2[_0x28ae('0x37')](_0x28ae('0x38'))?_0x1d9fc2[_0x28ae('0x38')]:_0x1d9fc2;_0x2d94a7=_0x2d94a7&&_0x2d94a7[_0x28ae('0x37')]('default')?_0x2d94a7[_0x28ae('0x38')]:_0x2d94a7;_0x1952d6=_0x1952d6&&_0x1952d6[_0x28ae('0x37')](_0x28ae('0x38'))?_0x1952d6[_0x28ae('0x38')]:_0x1952d6;const _0x58b498={'buildTarget':_0x28ae('0x39'),'buildBranch':_0x28ae('0x3a'),'buildRevision':_0x28ae('0x3b'),'buildDate':'2018-12-05T20:58:11+00:00'};const _0x5055a3=()=>{console['log'](_0x28ae('0x3c'));console[_0x28ae('0x3d')](_0x28ae('0x3e')+_0x58b498[_0x28ae('0x3f')]);console[_0x28ae('0x3d')](_0x28ae('0x40')+_0x58b498[_0x28ae('0x41')]);console['log']('BUILD_REVISION:\x20'+_0x58b498[_0x28ae('0x42')]);console[_0x28ae('0x3d')](_0x28ae('0x43')+_0x58b498[_0x28ae('0x44')]);};var _0x3fe459={'buildInfo':_0x58b498,'printVersion':_0x5055a3};const _0x2bd108=_0x413ae8('botium-testset-scanner');const _0x327c8c=(_0x49a664,_0x4e36ac)=>{if(process['env'][_0x28ae('0x45')]){return _0x4237c5[_0x28ae('0x46')](process[_0x28ae('0x47')][_0x28ae('0x45')],_0x4e36ac);}else{return _0x4237c5[_0x28ae('0x46')](_0x49a664,_0x4e36ac);}};const _0x58ade9=(_0x247c5b,_0x4a2797)=>{return _0x1b182d[_0x28ae('0x48')](_0x247c5b)[_0x28ae('0x49')]((_0x52ba10,_0x47073a)=>{const _0x40af75=_0x4237c5[_0x28ae('0x4a')](_0x247c5b,_0x47073a);if(_0x4a2797(_0x40af75))_0x52ba10[_0x28ae('0x4b')](_0x47073a);return _0x52ba10;},[]);};const _0x4e7edf=_0x96fb5d=>{return _0x58ade9(_0x96fb5d,_0x14a03b=>_0x1b182d[_0x28ae('0x4c')](_0x14a03b)['isDirectory']());};const _0x5df5dd=_0x3aa50a=>{return _0x58ade9(_0x3aa50a,_0x307936=>_0x1b182d[_0x28ae('0x4c')](_0x307936)['isFile']());};const _0x421988=async(_0x2f9756,_0x11ce69)=>{let _0x13bbda=await _0x2f9756[_0x28ae('0x4d')][_0x28ae('0x4e')]({'where':{'path':_0x11ce69}},_0x28ae('0x4f'));if(!_0x13bbda||_0x13bbda[_0x28ae('0x50')]===0x0){_0x13bbda=await _0x2f9756[_0x28ae('0x4d')][_0x28ae('0x4e')]({'where':{'path':_0x11ce69+'/'}},_0x28ae('0x4f'));}if(_0x13bbda&&_0x13bbda['length']>0x0){_0x2bd108('Folder\x20'+_0x11ce69+_0x28ae('0x51')+_0x13bbda[0x0]['name']+_0x28ae('0x52')+_0x13bbda[0x0][_0x28ae('0x53')]['name']);return!![];}return![];};const _0x21ecff=async(_0x57b737,_0xe2ff1e,_0x592dcd)=>{const _0x2fa3b2=_0x4237c5['join'](_0xe2ff1e,_0x592dcd);_0x2bd108(_0x28ae('0x54')+_0x2fa3b2+'\x20...');const _0x8815eb=_0x4e7edf(_0x2fa3b2);const _0x5010e3=_0x5df5dd(_0x2fa3b2);if(_0x8815eb&&_0x8815eb[_0x28ae('0x50')]>0x0){_0x2bd108(_0x28ae('0x55')+_0x592dcd+_0x28ae('0x56')+_0x8815eb['length']+_0x28ae('0x57'));await _0x8815eb[_0x28ae('0x58')](async _0x343753=>{const _0x52c35f=_0x327c8c(_0xe2ff1e,_0x4237c5[_0x28ae('0x4a')](_0x592dcd,_0x343753));const _0x33c4f4=await _0x421988(_0x57b737,_0x52c35f);if(_0x33c4f4)return;await _0x21ecff(_0x57b737,_0xe2ff1e,_0x4237c5[_0x28ae('0x4a')](_0x592dcd,_0x343753));});}else if(_0x5010e3&&_0x5010e3[_0x28ae('0x50')]>0x0){_0x2bd108(_0x28ae('0x55')+_0x592dcd+'\x20found\x20'+_0x5010e3[_0x28ae('0x50')]+'\x20files.\x20Importing\x20Test\x20Set.');const _0x41b64a={'data':{'name':_0x592dcd,'description':_0x28ae('0x59')+_0x2fa3b2+',\x20'+_0x5010e3[_0x28ae('0x50')]+_0x28ae('0x5a'),'expandConvos':!![],'expandUtterancesToConvos':!![],'tags':{'set':_0x592dcd['split'](_0x4237c5[_0x28ae('0x5b')])},'folders':{'create':[{'name':_0x592dcd,'path':_0x327c8c(_0xe2ff1e,_0x592dcd)}]}}};const _0x1187b2=await _0x57b737[_0x28ae('0x5c')][_0x28ae('0x5d')](_0x41b64a,'{\x20id\x20}');_0x2bd108(_0x28ae('0x55')+_0x592dcd+'\x20Created\x20Test\x20Set\x20'+_0x1187b2['id']);}};var _0x1e6eb3=_0x4a48e3=>{(async()=>{_0x21ecff(_0x4a48e3,process[_0x28ae('0x47')][_0x28ae('0x5e')],'.');})()[_0x28ae('0x5f')](_0x4fa971=>{_0x2bd108(_0x28ae('0x60')+_0x4fa971);});};var _0x58d381={'scanForTestSets':_0x1e6eb3};const _0x590d22=_0x413ae8(_0x28ae('0x61'));var _0x146cd3=(_0x2187b2,_0x2661ac)=>{return _0x2187b2['query'][_0x28ae('0x62')]({'where':{'id':_0x2661ac}},'{\x20id\x20name\x20mimeType\x20base64\x20}');};var _0x2d03cd=(_0x59e47d,_0x410bca)=>{return _0x59e47d[_0x28ae('0x4d')]['testSetExcel']({'where':{'id':_0x410bca}},_0x28ae('0x63'));};var _0x2e517a=(_0x4a95eb,_0x33644a)=>{const _0xe6763=new Date(Date[_0x28ae('0x64')]())[_0x28ae('0x65')]();if(!_0x33644a)return;const _0x248a08={'where':{'AND':[{'key':_0x33644a},{'OR':[{'validFrom':null},{'validFrom_lte':_0xe6763}]},{'OR':[{'validTo':null},{'validTo_gte':_0xe6763}]}]}};return _0x4a95eb[_0x28ae('0x4d')]['apiKeys'](_0x248a08,'{\x20id\x20name\x20}')[_0x28ae('0x66')](_0x23be3c=>{if(!_0x23be3c||_0x23be3c['length']===0x0)return null;return _0x23be3c[0x0];});};var _0x1187df=(_0x4ca07a,_0x388138)=>{return _0x4ca07a[_0x28ae('0x4d')][_0x28ae('0x67')]({'where':{'id':_0x388138}},_0x28ae('0x68'));};var _0x10a428=(_0x8fdaf0,_0x462641)=>{return _0x8fdaf0[_0x28ae('0x4d')]['testSession']({'where':{'id':_0x462641}},_0x28ae('0x69'));};var _0xbf3b54=(_0x5693ab,_0x3c002f,_0x588c77)=>{if(!_0x3c002f[_0x28ae('0x6a')][_0x28ae('0x6b')]||!_0x3c002f[_0x28ae('0x6a')]['group']){const _0x47dafa=_0x28ae('0x6c')+_0x3c002f[_0x28ae('0x6a')];_0x590d22(_0x47dafa);return Promise[_0x28ae('0x6d')](_0x47dafa);}return _0x5693ab[_0x28ae('0x4d')][_0x28ae('0x6e')]({'where':{'name':_0x3c002f[_0x28ae('0x6a')]['name']}},_0x588c77);};var _0x318183=_0x5b68f5=>{return _0x5b68f5&&_0x5b68f5['reduce']((_0x11586c,_0x217ba6)=>{if(_0x217ba6[_0x28ae('0x6f')]==='STRING'||_0x217ba6['type']===_0x28ae('0x70'))_0x11586c[_0x217ba6[_0x28ae('0x6b')]]=_0x217ba6[_0x28ae('0x71')][_0x28ae('0x72')](/\\n/g,'\x0a');if(_0x217ba6[_0x28ae('0x6f')]===_0x28ae('0x73'))_0x11586c[_0x217ba6[_0x28ae('0x6b')]]=parseInt(_0x217ba6[_0x28ae('0x74')]);if(_0x217ba6[_0x28ae('0x6f')]===_0x28ae('0x75'))_0x11586c[_0x217ba6[_0x28ae('0x6b')]]=_0x217ba6[_0x28ae('0x76')]?!![]:![];if(_0x217ba6[_0x28ae('0x6f')]==='JSON')_0x11586c[_0x217ba6[_0x28ae('0x6b')]]=JSON[_0x28ae('0x77')](_0x217ba6[_0x28ae('0x78')]);return _0x11586c;},{});};var _0x20e178=(..._0x5a5e53)=>{const _0x2e0e0f={};_0x5a5e53&&_0x5a5e53[_0x28ae('0x58')](_0x214283=>{_0x214283&&Object['keys'](_0x214283)[_0x28ae('0x58')](_0x5971f7=>{_0x2e0e0f[_0x5971f7]=_0x214283[_0x5971f7];});});return _0x2e0e0f;};var _0x29422f={'getAttachment':_0x146cd3,'getExcel':_0x2d03cd,'lookupApiKey':_0x2e517a,'findFullTestSession':_0x1187df,'findSimpleTestSessionResults':_0x10a428,'findAgentFromJobData':_0xbf3b54,'composeBotiumCapabilities':_0x318183,'combineBotiumCapabilities':_0x20e178};const _0x1028e0=_0x413ae8(_0x28ae('0x79'));var _0x54ed5c=(_0x35b423,_0x1d6792,_0x2a42b0)=>{_0x29422f[_0x28ae('0x7a')](_0x35b423['db'],_0x1d6792,_0x28ae('0x7b'))[_0x28ae('0x66')](_0x345af0=>{if(_0x345af0){_0x35b423['db'][_0x28ae('0x5c')][_0x28ae('0x7c')]({'where':{'id':_0x345af0['id']},'data':{'heartbeat':new Date(Date[_0x28ae('0x64')]())['toISOString']()}})[_0x28ae('0x66')](()=>_0x2a42b0());}else{const _0x316e4f='Agent\x20'+_0x1d6792[_0x28ae('0x6a')]['name']+_0x28ae('0x7d');_0x1028e0(_0x316e4f);return _0x2a42b0(_0x316e4f);}})[_0x28ae('0x5f')](_0x3e8f07=>{return _0x2a42b0(_0x3e8f07);});};const _0x318d7f=_0x413ae8(_0x28ae('0x7e'));var _0x6e63c3=(_0x583536,_0xef9032,_0x411d58)=>{_0x29422f[_0x28ae('0x7a')](_0x583536['db'],_0xef9032,_0x28ae('0x7f'))[_0x28ae('0x66')](_0x356280=>{if(_0x356280){const _0x3f89cb=_0x29422f['composeBotiumCapabilities'](_0x356280[_0x28ae('0x80')]);const _0x142d67={'debug':![],'botium':{'Capabilities':_0x3f89cb}};_0x318d7f('Agent\x20registered,\x20config:\x20'+JSON[_0x28ae('0x81')](_0x142d67));return _0x411d58(null,_0x142d67);}else{const _0x41d65a=_0x28ae('0x82')+_0xef9032['data'][_0x28ae('0x6b')]+_0x28ae('0x7d');_0x318d7f(_0x41d65a);return _0x411d58(_0x41d65a);}})[_0x28ae('0x5f')](_0xc58066=>{return _0x411d58(_0xc58066);});};const _0x331324=(_0x44190e,_0x2d75c4)=>{return _0x44190e[_0x28ae('0x4d')][_0x28ae('0x53')]({'where':{'id':_0x2d75c4}});};const _0x19f70a=_0x3a8ff3=>{return{'id':_0x3a8ff3['id'],'name':_0x3a8ff3[_0x28ae('0x6b')],'expandConvos':_0x3a8ff3['expandConvos'],'expandUtterancesToConvos':_0x3a8ff3[_0x28ae('0x83')],'expandUtterancesIncomprehension':_0x3a8ff3[_0x28ae('0x84')],'convos':_0x3a8ff3[_0x28ae('0x85')]&&_0x3a8ff3[_0x28ae('0x85')]['filter'](_0xc6003f=>_0xc6003f['scriptType']===_0x28ae('0x86'))[_0x28ae('0x87')](_0x2d08bb=>({'format':'SCRIPTING_FORMAT_TXT','content':_0x2d08bb[_0x28ae('0x88')],'sourceTag':{'testSetId':_0x3a8ff3['id'],'testSetScriptId':_0x2d08bb['id']}})),'utterances':_0x3a8ff3[_0x28ae('0x85')]&&_0x3a8ff3[_0x28ae('0x85')]['filter'](_0x575de4=>_0x575de4[_0x28ae('0x89')]==='SCRIPTING_TYPE_UTTERANCES')[_0x28ae('0x87')](_0x6993ce=>({'format':_0x28ae('0x8a'),'content':_0x6993ce[_0x28ae('0x88')],'sourceTag':{'testSetId':_0x3a8ff3['id'],'testSetScriptId':_0x6993ce['id']}})),'folders':_0x3a8ff3['folders']&&_0x3a8ff3['folders'][_0x28ae('0x87')](_0x1fe882=>({'id':_0x1fe882['id'],'path':_0x1fe882[_0x28ae('0x11')],'globFilter':_0x1fe882[_0x28ae('0x8b')],'sourceTag':{'testSetId':_0x3a8ff3['id'],'testSetFolderId':_0x1fe882['id']}})),'excels':_0x3a8ff3['excels']&&_0x3a8ff3[_0x28ae('0x8c')][_0x28ae('0x87')](_0x8e1ec=>({'id':_0x8e1ec['id'],'filename':_0x8e1ec['filename'],'filecontent':_0x8e1ec[_0x28ae('0x8d')],'hasConvos':_0x8e1ec[_0x28ae('0x8e')],'hasUtterances':_0x8e1ec[_0x28ae('0x8f')],'worksheetsConvos':_0x8e1ec['worksheetsConvos'],'worksheetsUtterances':_0x8e1ec[_0x28ae('0x90')],'startRow':_0x8e1ec[_0x28ae('0x91')],'startCol':_0x8e1ec[_0x28ae('0x92')],'sourceTag':{'testSetId':_0x3a8ff3['id'],'testSetExcelId':_0x8e1ec['id']}}))};};var _0x3b6ff9={'FindFullTestSet':_0x331324,'RetrieveTestSetDetails':_0x19f70a};const {URL}=_0x1c4261;const _0x1418f7=_0x413ae8(_0x28ae('0x93'));const {RetrieveTestSetDetails:RetrieveTestSetDetails$1}=_0x3b6ff9;var _0x30568b=(_0xe5e995,_0x30f712,_0x1375a3)=>{_0x29422f[_0x28ae('0x94')](_0xe5e995['db'],_0x30f712[_0x28ae('0x6a')]['testSessionId'])['then'](_0x12afff=>{if(!_0x12afff){const _0x4becea=_0x28ae('0x95')+_0x30f712[_0x28ae('0x6a')]['testSessionId']+'\x20not\x20configured';_0x1418f7(_0x4becea);return _0x1375a3(_0x4becea);}_0x1418f7(_0x28ae('0x96')+_0x12afff['id']);const _0x1e42f6=_0x12afff[_0x28ae('0x6e')]?_0x28ae('0x97')+_0x12afff[_0x28ae('0x6e')][_0x28ae('0x6b')]:_0x28ae('0x98');_0x1418f7(_0x28ae('0x96')+_0x12afff['id']+_0x28ae('0x99')+_0x1e42f6);const _0x24a7ad=_0x29422f[_0x28ae('0x9a')]({'PROJECTNAME':_0x12afff[_0x28ae('0x6b')]},_0x29422f[_0x28ae('0x9b')](_0x12afff[_0x28ae('0x9c')][_0x28ae('0x80')]),_0x12afff[_0x28ae('0x9d')]&&_0x29422f['composeBotiumCapabilities'](_0x12afff[_0x28ae('0x9d')][_0x28ae('0x80')])||[],_0x29422f[_0x28ae('0x9b')](_0x12afff[_0x28ae('0x80')]));_0x1418f7(_0x28ae('0x96')+_0x12afff['id']+_0x28ae('0x9e')+JSON['stringify'](_0x24a7ad));const _0x1bd0d6=_0x29422f[_0x28ae('0x9a')](_0x29422f['composeBotiumCapabilities'](_0x12afff['chatbot'][_0x28ae('0x9f')]),_0x29422f[_0x28ae('0x9b')](_0x12afff[_0x28ae('0x9f')]));_0x1418f7(_0x28ae('0x96')+_0x12afff['id']+_0x28ae('0xa0')+JSON[_0x28ae('0x81')](_0x1bd0d6));const _0x2f8ff3=_0x29422f[_0x28ae('0x9a')](_0x29422f['composeBotiumCapabilities'](_0x12afff[_0x28ae('0x9c')][_0x28ae('0xa1')]),_0x29422f[_0x28ae('0x9b')](_0x12afff[_0x28ae('0xa1')]));_0x1418f7(_0x28ae('0x96')+_0x12afff['id']+_0x28ae('0xa2')+JSON['stringify'](_0x2f8ff3));const _0x5294ec=_0x12afff[_0x28ae('0xa3')][_0x28ae('0x87')](_0x99efe7=>RetrieveTestSetDetails$1(_0x99efe7));_0x1418f7(_0x28ae('0x96')+_0x12afff['id']+_0x28ae('0xa4')+JSON[_0x28ae('0x81')](_0x5294ec));const _0x479124=(_0x35bb88,_0x1e2c26)=>{const _0x36647f=_0x12afff[_0x28ae('0xa5')]||0x1;let _0x2c5683=Promise[_0x28ae('0x46')]();for(let _0x5af2ba=0x1;_0x5af2ba<=_0x36647f;_0x5af2ba++){const _0x559818=_0x5af2ba;_0x2c5683=_0x2c5683[_0x28ae('0x66')](()=>new Promise(_0x1115a2=>{const _0x1159d5=_0xe5e995[_0x28ae('0xa6')][_0x28ae('0xa7')](_0x1e42f6,{'title':_0x28ae('0xa8')+_0x559818+'/'+_0x36647f+'\x20for\x20Test\x20Session\x20'+_0x12afff[_0x28ae('0x6b')],'botium':{'Capabilities':_0x35bb88,'Sources':_0x1bd0d6,'Envs':_0x2f8ff3},'testSets':_0x1e2c26,'batchNum':_0x559818,'batchCount':_0x36647f})[_0x28ae('0xa9')](!![])['delay'](0x1388)[_0x28ae('0xaa')](_0x4becea=>{if(_0x4becea)return _0x1418f7(_0x28ae('0xab')+_0x4becea);const _0x26991a=_0x1159d5['id'];_0xe5e995['db'][_0x28ae('0x5c')][_0x28ae('0xac')]({'data':{'jobId':_0x26991a,'status':_0x28ae('0xad'),'progressPercent':0x0,'testSession':{'connect':{'id':_0x12afff['id']}}}},_0x28ae('0xae'))[_0x28ae('0x66')](_0x1bb350=>{_0x1418f7(_0x28ae('0xaf')+_0x12afff[_0x28ae('0x6b')]+_0x28ae('0xb0')+_0x26991a+_0x28ae('0xb1')+_0x1bb350['id']+')');_0x1115a2();})[_0x28ae('0x5f')](_0x4becea=>{_0x1418f7(_0x28ae('0xaf')+_0x12afff['name']+_0x28ae('0xb2')+_0x26991a+_0x28ae('0xb3')+_0x4becea);_0x1115a2();});});}));}return _0x2c5683;};if(_0x12afff[_0x28ae('0xb4')]&&_0x12afff[_0x28ae('0xb4')][_0x28ae('0x50')]>0x0){const _0x254826=_0x12afff['deviceSets'][_0x28ae('0x49')]((_0x9cd0a7,_0x45f81b)=>{return[..._0x9cd0a7,..._0x45f81b['devices']['map'](_0x446d1f=>{const _0x2588f7=_0x45f81b[_0x28ae('0xb5')]['url']&&new URL(_0x45f81b[_0x28ae('0xb5')][_0x28ae('0x23')]);if(_0x45f81b[_0x28ae('0xb5')][_0x28ae('0x6f')]===_0x28ae('0xb6')){return{'deviceSetId':_0x45f81b['id'],'deviceName':_0x446d1f[_0x28ae('0x6b')],'deviceOptions':{'desiredCapabilities':Object[_0x28ae('0xb7')]({},JSON[_0x28ae('0x77')](_0x446d1f[_0x28ae('0x80')]),{'name':_0x12afff[_0x28ae('0x6b')],'username':_0x45f81b[_0x28ae('0xb5')][_0x28ae('0xb8')],'accessKey':_0x45f81b[_0x28ae('0xb5')][_0x28ae('0xb9')]}),'protocol':_0x2588f7&&_0x2588f7[_0x28ae('0xba')],'host':_0x2588f7&&_0x2588f7[_0x28ae('0xbb')],'port':_0x2588f7&&_0x2588f7[_0x28ae('0xbc')],'path':_0x2588f7&&_0x2588f7[_0x28ae('0xbd')]}};}else if(_0x45f81b['provider']['type']==='LOCALSELENIUM'){return{'deviceSetId':_0x45f81b['id'],'deviceName':_0x446d1f['name'],'deviceOptions':{'desiredCapabilities':Object[_0x28ae('0xb7')]({},JSON[_0x28ae('0x77')](_0x446d1f[_0x28ae('0x80')]),{'name':_0x12afff[_0x28ae('0x6b')]}),'protocol':_0x2588f7&&_0x2588f7[_0x28ae('0xba')],'host':_0x2588f7&&_0x2588f7[_0x28ae('0xbb')],'port':_0x2588f7&&_0x2588f7[_0x28ae('0xbc')],'path':_0x2588f7&&_0x2588f7[_0x28ae('0xbd')]}};}else{if(_0x45f81b[_0x28ae('0xb5')][_0x28ae('0x6f')]===_0x28ae('0xbe')){_0x1418f7('startTestSession\x20'+_0x12afff['id']+_0x28ae('0xbf'));_0x24a7ad[_0x28ae('0xc0')]=!![];}return{'deviceSetId':_0x45f81b['id'],'deviceName':_0x446d1f['name'],'deviceOptions':{'desiredCapabilities':Object[_0x28ae('0xb7')]({},JSON['parse'](_0x446d1f['capabilities']),{'name':_0x12afff[_0x28ae('0x6b')]})}};}})];},[]);_0x1418f7(_0x28ae('0x96')+_0x12afff['id']+_0x28ae('0xc1')+JSON['stringify'](_0x254826,null,0x2));let _0x29f410=Promise['resolve']();_0x254826[_0x28ae('0x58')](_0x32bdd4=>{const _0x3ac5ca=_0x55a71b=>{return _0x55a71b&&_0x55a71b[_0x28ae('0x58')](_0x2b3576=>{_0x2b3576[_0x28ae('0xc2')]=Object[_0x28ae('0xb7')]({},_0x2b3576['sourceTag'],{'deviceSetId':_0x32bdd4[_0x28ae('0xc3')],'deviceName':_0x32bdd4[_0x28ae('0xc4')]});});};const _0x1c6914=_0x10e512[_0x28ae('0xc5')](_0x5294ec);_0x1c6914['forEach'](_0xd0bc0=>{_0x3ac5ca(_0xd0bc0[_0x28ae('0xc6')]);_0x3ac5ca(_0xd0bc0[_0x28ae('0xc7')]);_0x3ac5ca(_0xd0bc0[_0x28ae('0xc8')]);_0x3ac5ca(_0xd0bc0['folders']);_0x3ac5ca(_0xd0bc0[_0x28ae('0x8c')]);});const _0x351796=Object[_0x28ae('0xb7')]({},_0x24a7ad,{'WEBDRIVERIO_OPTIONS':_0x32bdd4[_0x28ae('0xc9')]});_0x29f410=_0x29f410[_0x28ae('0x66')](()=>_0x479124(_0x351796,_0x1c6914));});return _0x29f410['then'](()=>_0x1375a3())['catch'](_0x1375a3);}else{return _0x479124(_0x24a7ad,_0x5294ec)['then'](()=>_0x1375a3())[_0x28ae('0x5f')](_0x1375a3);}})['catch'](_0x420e3b=>{_0x1418f7(_0x28ae('0xca')+_0x420e3b);_0x1375a3(_0x420e3b);});};var _0x2db401=(_0x2f516b,_0x30865e,_0xb8c46d,_0x3999e8)=>{return _0x2f516b['db'][_0x28ae('0x4d')][_0x28ae('0xcb')]({'where':{'jobId':_0x30865e}},_0x28ae('0xcc'))[_0x28ae('0x66')](_0x21c1a1=>{if(!_0x21c1a1||_0x21c1a1['length']===0x0){return _0x1418f7('testSessionProgress:\x20Job\x20'+_0x30865e+'\x20not\x20registered\x20as\x20test\x20session\x20job.\x20Skipping.');}const _0x4249f4=_0x21c1a1[0x0];if(_0x4249f4[_0x28ae('0x67')][_0x28ae('0xcd')]===_0x28ae('0xad')){_0x2f516b['db'][_0x28ae('0x5c')][_0x28ae('0xce')]({'data':{'status':_0x28ae('0xcf')},'where':{'id':_0x4249f4['testSession']['id']}})[_0x28ae('0x66')](()=>{_0x1418f7(_0x28ae('0xd0')+_0x30865e+'/'+_0x4249f4['id']+_0x28ae('0xd1')+_0x4249f4['testSession']['id']+_0x28ae('0xd2'));})['catch'](_0x26e3c8=>{_0x1418f7(_0x28ae('0xd0')+_0x30865e+'/'+_0x4249f4['id']+_0x28ae('0xd1')+_0x4249f4[_0x28ae('0x67')]['id']+'\x20RUNNING\x20failed:\x20'+_0x26e3c8);});}if(_0x4249f4[_0x28ae('0xcd')]===_0x28ae('0xad')){_0x2f516b['db']['mutation']['updateTestSessionJob']({'data':{'status':'RUNNING','started':new Date(Date[_0x28ae('0x64')]())[_0x28ae('0x65')](),'progressPercent':_0x10e512[_0x28ae('0xd3')](_0xb8c46d)&&_0xb8c46d},'where':{'id':_0x4249f4['id']}})[_0x28ae('0x66')](()=>{_0x1418f7('Test\x20Session\x20Job\x20'+_0x30865e+'/'+_0x4249f4['id']+_0x28ae('0xd4'));})[_0x28ae('0x5f')](_0x2712b1=>{_0x1418f7(_0x28ae('0xd0')+_0x30865e+'/'+_0x4249f4['id']+_0x28ae('0xd5')+_0x2712b1);});}if(_0x4249f4[_0x28ae('0xcd')]===_0x28ae('0xcf')&&_0x10e512[_0x28ae('0xd3')](_0xb8c46d)&&_0x4249f4[_0x28ae('0xd6')]<_0xb8c46d){_0x2f516b['db'][_0x28ae('0x5c')][_0x28ae('0xd7')]({'data':{'progressPercent':_0xb8c46d},'where':{'id':_0x4249f4['id']}})[_0x28ae('0x66')](()=>{_0x1418f7(_0x28ae('0xd0')+_0x30865e+'/'+_0x4249f4['id']+'\x20set\x20Test\x20Session\x20Job\x20progressPercent\x20'+_0xb8c46d+'.');})[_0x28ae('0x66')](()=>_0x533628(_0x2f516b,_0x4249f4[_0x28ae('0x67')]['id']))['catch'](_0x853437=>{_0x1418f7(_0x28ae('0xd0')+_0x30865e+'/'+_0x4249f4['id']+'\x20set\x20Test\x20Session\x20Job\x20progressPercent\x20'+_0xb8c46d+_0x28ae('0xd8')+_0x853437);});}if(_0x3999e8[_0x28ae('0x3d')]){_0x2f516b['db']['mutation'][_0x28ae('0xd9')]({'data':{'log':_0x3999e8[_0x28ae('0x3d')],'testSessionJob':{'connect':{'id':_0x4249f4['id']}}}},_0x28ae('0xda'))[_0x28ae('0x66')](()=>{_0x1418f7('Test\x20Session\x20Job\x20'+_0x30865e+'/'+_0x4249f4['id']+_0x28ae('0xdb')+_0x3999e8['log']);})['catch'](_0x89809d=>{_0x1418f7('Test\x20Session\x20Job\x20'+_0x30865e+'/'+_0x4249f4['id']+_0x28ae('0xdc')+_0x89809d);});}if(_0x3999e8[_0x28ae('0xdd')]){const _0x23f714={'testcaseName':_0x3999e8['testcase'],'testcaseSource':_0x3999e8[_0x28ae('0xde')],'success':_0x3999e8[_0x28ae('0xdf')],'err':_0x3999e8['err'],'testSession':{'connect':{'id':_0x4249f4['testSession']['id']}}};if(_0x3999e8[_0x28ae('0xe0')]){_0x23f714[_0x28ae('0xe0')]=_0x10e512['isString'](_0x3999e8[_0x28ae('0xe0')])?_0x3999e8[_0x28ae('0xe0')]:JSON[_0x28ae('0x81')](_0x3999e8['messages']);}if(_0x3999e8['sourceTag']){if(_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xe1')])_0x23f714[_0x28ae('0xe2')]=_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xe1')];if(_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xe3')])_0x23f714[_0x28ae('0x53')]={'connect':{'id':_0x3999e8[_0x28ae('0xc2')]['testSetId']}};if(_0x3999e8['sourceTag'][_0x28ae('0xe4')])_0x23f714[_0x28ae('0xe5')]={'connect':{'id':_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xe4')]}};if(_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xe6')])_0x23f714[_0x28ae('0xe7')]={'connect':{'id':_0x3999e8['sourceTag'][_0x28ae('0xe6')]}};if(_0x3999e8[_0x28ae('0xc2')]['testSetFolderId'])_0x23f714[_0x28ae('0xe8')]={'connect':{'id':_0x3999e8['sourceTag'][_0x28ae('0xe9')]}};if(_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xea')])_0x23f714[_0x28ae('0xeb')]={'connect':{'id':_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xea')]}};if(_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xc3')])_0x23f714['deviceSet']={'connect':{'id':_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xc3')]}};if(_0x3999e8[_0x28ae('0xc2')]['deviceName'])_0x23f714[_0x28ae('0xc4')]=_0x3999e8[_0x28ae('0xc2')][_0x28ae('0xc4')];}if(_0x3999e8[_0x28ae('0xec')]){_0x23f714['attachments']={'create':_0x3999e8[_0x28ae('0xec')][_0x28ae('0x87')](_0x3e60c5=>{return{'name':_0x3e60c5[_0x28ae('0x6b')],'mimeType':_0x3e60c5[_0x28ae('0xed')],'base64':_0x3e60c5['base64']};})};}_0x2f516b['db'][_0x28ae('0x5c')][_0x28ae('0xee')]({'data':_0x23f714},_0x28ae('0xda'))[_0x28ae('0x66')](_0x53836e=>{_0x1418f7('TestResult\x20for\x20TestCase\x20'+_0x3999e8[_0x28ae('0xdd')]+_0x28ae('0xef')+_0x4249f4[_0x28ae('0x67')][_0x28ae('0x6b')]+_0x28ae('0xb0')+_0x30865e+_0x28ae('0xb1')+_0x53836e['id']+')');})['catch'](_0x23b5f4=>{_0x1418f7(_0x28ae('0xf0')+_0x3999e8['testcase']+_0x28ae('0xef')+_0x4249f4[_0x28ae('0x67')]['name']+_0x28ae('0xf1')+_0x23b5f4);});}})[_0x28ae('0x5f')](_0x4482e5=>{_0x1418f7(_0x28ae('0xf2')+_0x4482e5);});};var _0x23022d=(_0xdf988b,_0x453550,_0x10845f)=>{return _0xdf988b['db'][_0x28ae('0x4d')]['testSessionJobs']({'where':{'jobId':_0x453550}},'{\x20id,\x20testSession\x20{\x20id\x20name\x20}\x20\x20}')['then'](_0x547b29=>{if(!_0x547b29||_0x547b29[_0x28ae('0x50')]===0x0){return _0x1418f7(_0x28ae('0xf3')+_0x453550+_0x28ae('0xf4'));}const _0x34b3bd=_0x547b29[0x0];_0xdf988b['db']['mutation'][_0x28ae('0xd7')]({'data':{'status':_0x28ae('0xf5'),'jobId':null,'progressPercent':0x64,'finished':new Date(Date[_0x28ae('0x64')]())[_0x28ae('0x65')]()},'where':{'id':_0x34b3bd['id']}})[_0x28ae('0x66')](()=>{_0x1418f7(_0x28ae('0xd0')+_0x453550+'/'+_0x34b3bd['id']+_0x28ae('0xf6'));})[_0x28ae('0x66')](()=>{_0xdf988b['db'][_0x28ae('0x5c')]['createTestSessionJobLog']({'data':{'log':_0x28ae('0xf7'),'testSessionJob':{'connect':{'id':_0x34b3bd['id']}}}},_0x28ae('0xda'))[_0x28ae('0x5f')](_0x741a02=>{_0x1418f7(_0x28ae('0xf8')+_0x741a02);});})[_0x28ae('0x66')](()=>_0x1f3245(_0xdf988b,_0x453550,_0x34b3bd['id'],_0x34b3bd[_0x28ae('0x67')]['id']))[_0x28ae('0x66')](()=>_0x533628(_0xdf988b,_0x34b3bd[_0x28ae('0x67')]['id']))[_0x28ae('0x5f')](_0x366cde=>{_0x1418f7(_0x28ae('0xf9')+_0x366cde);});});};var _0x30d99a=(_0x3a2653,_0x222c53,_0x4aa30d)=>{return _0x3a2653['db'][_0x28ae('0x4d')][_0x28ae('0xcb')]({'where':{'jobId':_0x222c53}},_0x28ae('0xfa'))[_0x28ae('0x66')](_0xd6b8c3=>{if(!_0xd6b8c3||_0xd6b8c3[_0x28ae('0x50')]===0x0){return _0x1418f7(_0x28ae('0xfb')+_0x222c53+_0x28ae('0xf4'));}const _0x3af161=_0xd6b8c3[0x0];_0x3a2653['db']['mutation']['updateTestSessionJob']({'data':{'status':'FAILED','jobId':null,'err':_0x4aa30d},'where':{'id':_0x3af161['id']}})[_0x28ae('0x66')](()=>{_0x1418f7(_0x28ae('0xd0')+_0x222c53+'/'+_0x3af161['id']+_0x28ae('0xd8')+_0x4aa30d+'.');})['then'](()=>{_0x3a2653['db'][_0x28ae('0x5c')][_0x28ae('0xd9')]({'data':{'log':_0x28ae('0xfc')+_0x4aa30d,'testSessionJob':{'connect':{'id':_0x3af161['id']}}}},'{\x20id\x20}')[_0x28ae('0x5f')](_0x4aa30d=>{_0x1418f7('testSessionJobFailed\x20createTestSessionJobLog\x20failed:\x20'+_0x4aa30d);});})[_0x28ae('0x66')](()=>_0x1f3245(_0x3a2653,_0x222c53,_0x3af161['id'],_0x3af161[_0x28ae('0x67')]['id']))[_0x28ae('0x66')](()=>_0x533628(_0x3a2653,_0x3af161[_0x28ae('0x67')]['id']))[_0x28ae('0x5f')](_0x4aa30d=>{_0x1418f7(_0x28ae('0xfd')+_0x4aa30d);});});};const _0x1f3245=(_0x3be472,_0x17c49b,_0x5360cc,_0x1add52)=>{_0x1418f7('Test\x20Session\x20Job\x20'+_0x17c49b+'/'+_0x5360cc+_0x28ae('0xfe')+_0x1add52);return _0x3be472['db'][_0x28ae('0x5c')][_0x28ae('0xff')]({'data':{'status':_0x28ae('0xf5')},'where':{'AND':[{'id':_0x1add52},{'results_every':{'success':!![]}},{'jobs_every':{'status':_0x28ae('0xf5')}}]}})['catch'](_0x44eac1=>{_0x1418f7(_0x28ae('0x100')+_0x17c49b+'/'+_0x5360cc+_0x28ae('0xd8')+_0x44eac1);})['then'](()=>_0x3be472['db'][_0x28ae('0x5c')][_0x28ae('0xff')]({'data':{'status':_0x28ae('0x101')},'where':{'AND':[{'id':_0x1add52},{'jobs_every':{'status_in':[_0x28ae('0xf5'),_0x28ae('0x101')]}},{'OR':[{'results_some':{'success':![]}},{'jobs_some':{'status':_0x28ae('0x101')}}]}]}}))[_0x28ae('0x5f')](_0x52aeed=>{_0x1418f7('testSessionCheckFinished\x20'+_0x17c49b+'/'+_0x5360cc+_0x28ae('0xd8')+_0x52aeed);});};const _0x533628=(_0x4718bc,_0x2790af)=>{_0x1418f7(_0x28ae('0x95')+_0x2790af+_0x28ae('0x102'));_0x4718bc['db']['query'][_0x28ae('0x67')]({'where':{'id':_0x2790af}},_0x28ae('0x103'))[_0x28ae('0x66')](_0x3638d1=>{if(!_0x3638d1)return;_0x4718bc[_0x28ae('0x104')]['publish'](_0x28ae('0x105'),{'testSessionProgress':_0x3638d1});});};var _0x328618={'startTestSession':_0x30568b,'testSessionProgress':_0x2db401,'testSessionJobCompleted':_0x23022d,'testSessionJobFailed':_0x30d99a};const _0x36093a=_0x413ae8(_0x28ae('0x106'));var _0x3a5433=class AgentsConnector{constructor(_0x1d9526){this[_0x28ae('0x107')]=_0x1d9526;}[_0x28ae('0x108')](){const _0x42ce41=this[_0x28ae('0x107')]();_0x42ce41['queueConnector'][_0x28ae('0x98')](_0x28ae('0x109'),(_0x2b5901,_0x581e84)=>{_0x36093a(_0x28ae('0x10a')+JSON[_0x28ae('0x81')](_0x2b5901['data']));_0x54ed5c(_0x42ce41,_0x2b5901,_0x581e84);});_0x42ce41[_0x28ae('0xa6')]['process'](_0x28ae('0x10b'),(_0x3f8a14,_0x337c71)=>{_0x36093a(_0x28ae('0x10c')+JSON[_0x28ae('0x81')](_0x3f8a14[_0x28ae('0x6a')]));_0x6e63c3(_0x42ce41,_0x3f8a14,_0x337c71);});_0x42ce41['queueConnector'][_0x28ae('0x98')](_0x28ae('0x10d'),(_0x841a34,_0x5b7870)=>{_0x36093a(_0x28ae('0x10e')+JSON[_0x28ae('0x81')](_0x841a34[_0x28ae('0x6a')]));_0x328618[_0x28ae('0x10f')](_0x42ce41,_0x841a34,_0x5b7870);});_0x42ce41[_0x28ae('0xa6')]['on'](_0x28ae('0x110'),_0x2fdd31=>{_0x36093a(_0x28ae('0x111'));_0x36093a(_0x2fdd31);});_0x42ce41[_0x28ae('0xa6')]['on'](_0x28ae('0x112'),(_0x1ce81c,_0x50fd06)=>{_0x36093a('Job\x20'+_0x1ce81c+_0x28ae('0x113')+_0x50fd06);});const _0x462e9b=new _0x5e304e((_0x19042c,_0x58a151)=>{_0x19042c()[_0x28ae('0x66')](()=>_0x58a151())[_0x28ae('0x5f')](_0x407920=>_0x36093a(_0x28ae('0x114')+_0x407920)&&_0x58a151(_0x407920));},{'maxRetries':0xa,'retryDelay':0x3e8});_0x42ce41[_0x28ae('0xa6')]['on'](_0x28ae('0x115'),(_0x1bd299,_0x3d233c)=>{_0x36093a(_0x28ae('0x116')+_0x1bd299+_0x28ae('0x117')+_0x3d233c);_0x462e9b[_0x28ae('0x4b')](()=>_0x328618[_0x28ae('0x118')](_0x42ce41,_0x1bd299,_0x3d233c));});_0x42ce41['queueConnector']['on'](_0x28ae('0x119'),(_0x160666,_0x5f5225)=>{_0x36093a(_0x28ae('0x116')+_0x160666+_0x28ae('0x11a')+JSON[_0x28ae('0x81')](_0x5f5225));_0x462e9b['push'](()=>_0x328618[_0x28ae('0x11b')](_0x42ce41,_0x160666,_0x5f5225));});_0x42ce41[_0x28ae('0xa6')]['on']('job\x20progress',(_0xc1696,_0x22694e,_0x5e80ec)=>{_0x36093a('Job\x20'+_0xc1696+_0x28ae('0x11c')+_0x22694e);_0x462e9b[_0x28ae('0x4b')](()=>_0x328618[_0x28ae('0x11d')](_0x42ce41,_0xc1696,_0x22694e,_0x5e80ec));});}};const _0x1ba4a1=()=>({'secret':process[_0x28ae('0x47')][_0x28ae('0x11e')],'audience':process[_0x28ae('0x47')][_0x28ae('0x11f')]||_0x28ae('0x120'),'issuer':process[_0x28ae('0x47')][_0x28ae('0x121')]||_0x28ae('0x120')});const _0x516b5a=_0x248d97=>({'id':_0x248d97});const _0x321152=_0x4bf4b5=>_0x4bf4b5&&_0x4bf4b5['id'];const _0x45ddde=_0x22bfea=>{return _0x515e75['sign'](_0x516b5a(_0x22bfea['id']),process['env'][_0x28ae('0x11e')],{'expiresIn':0x15180*(process['env'][_0x28ae('0x122')]||0x1e),'audience':process[_0x28ae('0x47')][_0x28ae('0x11f')]||_0x28ae('0x120'),'issuer':process[_0x28ae('0x47')][_0x28ae('0x121')]||_0x28ae('0x120'),'subject':_0x22bfea['id'][_0x28ae('0x123')]()});};const _0x26f2ad=async(_0x583ed1,_0x29cb32)=>{const _0x53bc77=_0x515e75['verify'](_0x583ed1,process[_0x28ae('0x47')]['JWT_SECRET'],{'audience':process[_0x28ae('0x47')][_0x28ae('0x11f')]||_0x28ae('0x120'),'issuer':process['env']['JWT_ISSUER']||'botiumbox'});const _0x2abd00=await _0x29cb32[_0x28ae('0x4d')]['user']({'where':{'id':_0x321152(_0x53bc77)}},_0x28ae('0x124'));return _0x2abd00;};var _0x192b33={'jwtSettings':_0x1ba4a1,'userIdToToken':_0x516b5a,'tokenToUserId':_0x321152,'generateToken':_0x45ddde,'validateToken':_0x26f2ad};const {generateToken:generateToken$1}=_0x192b33;var _0xe90884={async 'me'(_0x1e5e32,_0x2b347e,_0x2a18be,_0x45e1d0){return _0x2a18be[_0x28ae('0x125')]&&_0x2a18be[_0x28ae('0x125')][_0x28ae('0x126')];},async 'autologin'(_0x174290,_0x47b109,_0x187478,_0x307288){if(_0x187478[_0x28ae('0x125')]&&_0x187478[_0x28ae('0x125')]['user']){return{'user':_0x187478[_0x28ae('0x125')][_0x28ae('0x126')],'token':generateToken$1(_0x187478['request'][_0x28ae('0x126')])};}}};var _0x9f3c1c={'agents'(_0x3975d4,{where,orderBy,skip,first},_0x1b0572,_0x54268a){orderBy=orderBy||_0x28ae('0x127');return _0x1b0572['db'][_0x28ae('0x4d')][_0x28ae('0x128')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x54268a);},'agent'(_0x1f25e6,{id},_0x5c01a1,_0x248c38){return _0x5c01a1['db'][_0x28ae('0x4d')][_0x28ae('0x6e')]({'where':{'id':id}},_0x248c38);}};var _0x1b2d7c={'chatbots'(_0x1847fd,{where,orderBy,skip,first},_0x29f3e5,_0x72d8c){orderBy=orderBy||_0x28ae('0x127');return _0x29f3e5['db'][_0x28ae('0x4d')]['chatbots']({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x72d8c);},'chatbot'(_0x4eaa74,{id},_0x3751d1,_0x31eddf){return _0x3751d1['db']['query'][_0x28ae('0x9c')]({'where':{'id':id}},_0x31eddf);},'availablewatsonworkspaces'(_0x371c3f,{url:_0x5d4e1c,version,username,password}){return new Promise((_0x3ac1b8,_0x5c9a7f)=>{const _0x49108d=new _0x31bb21({'url':_0x5d4e1c,'version':_0x3fe459,'username':username,'password':password});_0x49108d[_0x28ae('0x129')]((_0x242b2a,_0x143a3a)=>{if(_0x242b2a){_0x5c9a7f(_0x242b2a);}else{const _0xc19401=_0x143a3a[_0x28ae('0x12a')][_0x28ae('0x87')](_0x569ead=>({'name':_0x569ead['name'],'description':_0x569ead['description'],'value':_0x569ead[_0x28ae('0x12b')]}));_0x3ac1b8(_0xc19401);}});});}};const _0x4d68cb=_0x413ae8(_0x28ae('0x12c'));const _0x12ddd6=_0x4b45fc[_0x28ae('0x12d')];const {composeBotiumCapabilities:composeBotiumCapabilities$1}=_0x29422f;const _0x2cb471={};const _0x15d5e5={};var _0x2f6bdb={'Subscription':{'liveChatConvoStepAdded':{'subscribe':(_0x1ed937,{conversationId},{pubsub})=>_0x4120f0[_0x28ae('0x12e')](conversationId)}},'Query':{'liveChatConvoSteps'(_0x3398af,{conversationId}){if(!_0x15d5e5[conversationId])return Promise[_0x28ae('0x6d')](new Error('Conversation\x20'+conversationId+_0x28ae('0x12f')));return _0x15d5e5[conversationId];}},'Mutation':{'liveChatStartBot'(_0x502349,{id},{db,pubsub}){const _0x4546b6=_0x1b102a();return db[_0x28ae('0x4d')][_0x28ae('0x9c')]({'where':{'id':id}},_0x28ae('0x130'))[_0x28ae('0x66')](_0x2722db=>{_0x4d68cb(_0x28ae('0x131')+_0x4546b6+')\x20launching\x20bot\x20'+_0x2722db[_0x28ae('0x6b')]+'\x20...');const _0x533b1e=new _0x12ddd6(composeBotiumCapabilities$1(_0x2722db['capabilities']));const _0x34ab7a=(_0x4176cd,_0x564ade)=>{const _0x1e88ae=_0x15d5e5[_0x4546b6][_0x28ae('0x50')];const _0x3eb61c=JSON[_0x28ae('0x81')](Object[_0x28ae('0xb7')](_0x564ade,{'convoStepIndex':_0x1e88ae}));_0x15d5e5[_0x4546b6][_0x28ae('0x4b')](_0x3eb61c);_0x4120f0[_0x28ae('0x132')](_0x4546b6,{'liveChatConvoStepAdded':_0x3eb61c});};_0x533b1e['on'](_0x28ae('0x133'),_0x34ab7a);_0x533b1e['on'](_0x28ae('0x134'),_0x34ab7a);return _0x533b1e[_0x28ae('0x135')]();})[_0x28ae('0x66')](_0x8dd8f4=>{_0x2cb471[_0x4546b6]=_0x8dd8f4;_0x15d5e5[_0x4546b6]=[];_0x4d68cb('liveChatStartBot('+_0x4546b6+_0x28ae('0x136'));return _0x8dd8f4[_0x28ae('0x137')]();})[_0x28ae('0x66')](()=>{_0x4d68cb('liveChatStartBot('+_0x4546b6+_0x28ae('0x138'));return _0x4546b6;});},'liveChatSendToBot'(_0x2b4b30,{conversationId,convoStep},{pubsub}){if(!_0x2cb471[conversationId])return Promise[_0x28ae('0x6d')](new Error(_0x28ae('0x139')+conversationId+_0x28ae('0x12f')));_0x4d68cb(_0x28ae('0x13a')+conversationId+_0x28ae('0x13b')+convoStep);const _0x1da5ff=_0x2cb471[conversationId];_0x1da5ff[_0x28ae('0x13c')](JSON['parse'](convoStep))[_0x28ae('0x5f')](_0xe4f76f=>_0x4d68cb(_0xe4f76f));return!![];},'liveChatStopBot'(_0x24cb63,{conversationId}){if(!_0x2cb471[conversationId])return Promise[_0x28ae('0x6d')](new Error(_0x28ae('0x139')+conversationId+'\x20not\x20available.'));_0x4d68cb(_0x28ae('0x13d')+conversationId+_0x28ae('0x13e'));const _0x528640=_0x2cb471[conversationId];return _0x528640[_0x28ae('0x13f')]()[_0x28ae('0x66')](()=>_0x528640[_0x28ae('0x140')]())[_0x28ae('0x66')](()=>{_0x4d68cb(_0x28ae('0x13d')+conversationId+_0x28ae('0x141'));delete _0x2cb471[conversationId];delete _0x15d5e5[conversationId];return!![];});},async 'liveChatSaveConvoSteps'(_0x199c82,{conversationId,testSetId,newTestSetName,testCaseName},_0x198693){if(!_0x2cb471[conversationId])return Promise[_0x28ae('0x6d')](new Error(_0x28ae('0x139')+conversationId+'\x20not\x20available.'));let _0x266352=null;if(newTestSetName){_0x266352=await _0x198693['db'][_0x28ae('0x5c')]['createTestSet']({'data':{'name':newTestSetName}},_0x28ae('0x142'));}else{_0x266352=await _0x198693['db'][_0x28ae('0x4d')][_0x28ae('0x53')]({'where':{'id':testSetId}},_0x28ae('0x142'));}_0x4d68cb('liveChatSaveConvoSteps('+conversationId+')\x20saving\x20test\x20case\x20for\x20test\x20set\x20'+_0x266352['id']+'/'+_0x266352[_0x28ae('0x6b')]);const _0x4620f8=[testCaseName,''];_0x15d5e5[conversationId][_0x28ae('0x58')](_0x7cd074=>{const _0x720c2e=JSON[_0x28ae('0x77')](_0x7cd074);_0x4620f8[_0x28ae('0x4b')]('#'+_0x720c2e[_0x28ae('0x143')]);if(_0x720c2e[_0x28ae('0x144')]){_0x4620f8[_0x28ae('0x4b')](_0x720c2e[_0x28ae('0x144')]);}if(_0x720c2e[_0x28ae('0x145')]&&_0x720c2e['buttons'][_0x28ae('0x50')]>0x0)_0x4620f8[_0x28ae('0x4b')]('BUTTONS\x20'+_0x720c2e['buttons'][_0x28ae('0x87')](_0x3d1693=>_0x3d1693[_0x28ae('0x146')])[_0x28ae('0x4a')]('|'));if(_0x720c2e[_0x28ae('0x147')]&&_0x720c2e[_0x28ae('0x147')][_0x28ae('0x50')]>0x0)_0x4620f8[_0x28ae('0x4b')](_0x28ae('0x148')+_0x720c2e[_0x28ae('0x147')][_0x28ae('0x87')](_0x2b99f7=>_0x2b99f7[_0x28ae('0x149')])[_0x28ae('0x4a')]('|'));if(_0x720c2e[_0x28ae('0x14a')]&&_0x720c2e[_0x28ae('0x14a')][_0x28ae('0x50')]>0x0){_0x720c2e[_0x28ae('0x14a')][_0x28ae('0x58')](_0x11f748=>{if(_0x11f748[_0x28ae('0x145')]&&_0x11f748[_0x28ae('0x145')]['length']>0x0)_0x4620f8[_0x28ae('0x4b')](_0x28ae('0x14b')+_0x11f748[_0x28ae('0x145')][_0x28ae('0x87')](_0x379a00=>_0x379a00[_0x28ae('0x146')])['join']('|'));if(_0x11f748[_0x28ae('0x14c')])_0x4620f8[_0x28ae('0x4b')]('MEDIA\x20'+_0x11f748[_0x28ae('0x14c')][_0x28ae('0x149')]);});}_0x4620f8[_0x28ae('0x4b')]('');});let _0x3dbae5=await _0x198693['db'][_0x28ae('0x5c')][_0x28ae('0x14d')]({'data':{'name':testCaseName,'script':_0x4620f8[_0x28ae('0x4a')]('\x0a'),'scriptType':_0x28ae('0x86'),'testSet':{'connect':{'id':_0x266352['id']}}}},'{\x20id\x20name\x20}');_0x4d68cb(_0x28ae('0x14e')+conversationId+_0x28ae('0x14f')+_0x266352['id']+'/'+_0x266352[_0x28ae('0x6b')]+_0x28ae('0x150')+_0x3dbae5['id']+'/'+_0x3dbae5['name']);return _0x3dbae5['id'];}}};var _0x10695f={'testsessions'(_0xab259d,{where,orderBy,skip,first},_0x321806,_0x5e3b1c){orderBy=orderBy||_0x28ae('0x151');skip=isNaN(skip)?0x0:skip;first=isNaN(first)?0x64:first;return _0x321806['db'][_0x28ae('0x4d')][_0x28ae('0x152')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x5e3b1c);},'testsession'(_0x4b3462,{id},_0x1685b2,_0x2e44b8){return _0x1685b2['db'][_0x28ae('0x4d')][_0x28ae('0x67')]({'where':{'id':id}},_0x2e44b8);},'testsessiontestcaseresults'(_0x4d4de5,{where,orderBy,skip,first},_0xa94b6d,_0x270426){orderBy=orderBy||'createdAt_DESC';skip=isNaN(skip)?0x0:skip;first=isNaN(first)?0x64:first;return _0xa94b6d['db'][_0x28ae('0x4d')]['testSessionTestCaseResults']({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x270426);},'testsessiontestcaseresult'(_0x8ef35b,{id},_0x580b98,_0x2c566d){return _0x580b98['db']['query'][_0x28ae('0x153')]({'where':{'id':id}},_0x2c566d);}};const _0x504a8a=_0x413ae8(_0x28ae('0x154'));var _0x1149d=(_0x52aeb0,_0x14f130,_0x57a1bb,_0x1e33e4)=>{_0x52aeb0['convos']&&_0x52aeb0['convos']['forEach'](_0x267333=>{let _0x39affb=[];let _0x3bd87b=[];try{if(_0x267333['format']===_0x2d2c32[_0x28ae('0x155')]){const _0x9953a5=Buffer[_0x28ae('0x156')](_0x267333[_0x28ae('0x157')],_0x28ae('0x158'));_0x3bd87b=_0x14f130[_0x28ae('0x159')](_0x9953a5,_0x2d2c32['SCRIPTING_FORMAT_XSLX'],_0x2d2c32[_0x28ae('0x15a')]);_0x39affb=_0x14f130[_0x28ae('0x159')](_0x9953a5,_0x2d2c32['SCRIPTING_FORMAT_XSLX'],_0x2d2c32['SCRIPTING_TYPE_CONVO']);}else if(_0x267333['format']===_0x2d2c32[_0x28ae('0x8a')]){_0x39affb=_0x14f130[_0x28ae('0x159')](_0x267333[_0x28ae('0x157')],_0x2d2c32[_0x28ae('0x8a')],_0x2d2c32[_0x28ae('0x86')]);}if(_0x39affb)_0x39affb[_0x28ae('0x58')](_0x24d7e2=>{_0x24d7e2[_0x28ae('0xc2')]=_0x267333[_0x28ae('0xc2')];});if(_0x3bd87b)_0x3bd87b[_0x28ae('0x58')](_0x1e4817=>{_0x1e4817['sourceTag']=_0x267333['sourceTag'];});}catch(_0x167927){_0x504a8a(_0x167927);throw new Error(_0x52aeb0['name']+_0x28ae('0x15b')+JSON[_0x28ae('0x81')](_0x167927));}});_0x52aeb0[_0x28ae('0xc7')]&&_0x52aeb0[_0x28ae('0xc7')]['forEach'](_0x32a2de=>{let _0x233c3e=[];try{_0x233c3e=_0x14f130[_0x28ae('0x159')](_0x32a2de[_0x28ae('0x157')],_0x2d2c32[_0x28ae('0x8a')],_0x2d2c32[_0x28ae('0x15a')]);if(_0x233c3e)_0x233c3e['forEach'](_0x2adc1d=>{_0x2adc1d[_0x28ae('0xc2')]=_0x32a2de[_0x28ae('0xc2')];});}catch(_0x3829f2){_0x504a8a(_0x3829f2);throw new Error(_0x52aeb0['name']+_0x28ae('0x15c')+JSON[_0x28ae('0x81')](_0x3829f2));}});_0x52aeb0[_0x28ae('0x15d')]&&_0x52aeb0[_0x28ae('0x15d')][_0x28ae('0x58')](_0x887e20=>{try{const {convos,utterances}=_0x14f130[_0x28ae('0x15e')](_0x887e20[_0x28ae('0x11')],_0x887e20['globFilter']);convos&&convos['forEach'](_0x26339c=>{_0x26339c['sourceTag']=Object[_0x28ae('0xb7')]({},_0x26339c['sourceTag'],_0x887e20[_0x28ae('0xc2')]);});utterances&&utterances[_0x28ae('0x58')](_0x3fc6d6=>{_0x3fc6d6['sourceTag']=Object['assign']({},_0x3fc6d6['sourceTag'],_0x887e20[_0x28ae('0xc2')]);});}catch(_0x5bc8f9){_0x504a8a(_0x5bc8f9);throw new Error(_0x52aeb0[_0x28ae('0x6b')]+_0x28ae('0x15f')+_0x887e20+'\x20script\x20compilation\x20failed:\x20'+JSON[_0x28ae('0x81')](_0x5bc8f9));}});let _0x27ead8=Promise[_0x28ae('0x46')]();if(_0x52aeb0[_0x28ae('0x8c')]&&_0x52aeb0['excels'][_0x28ae('0x50')]>0x0){_0x27ead8=Promise[_0x28ae('0x160')](_0x52aeb0[_0x28ae('0x8c')][_0x28ae('0x87')](({id,filename,filecontent,hasConvos,hasUtterances,worksheetsConvos,worksheetsUtterances,startRow,startCol,sourceTag})=>{return new Promise(_0x59dbed=>{const _0x4155fb=Buffer[_0x28ae('0x156')](filecontent,'base64');let _0x2aaddc=[];let _0x1d3718=[];if(hasConvos){if(worksheetsConvos)_0x14f130['caps'][_0x3a5bf9['SCRIPTING_XLSX_SHEETNAMES']]=worksheetsConvos;if(!isNaN(startRow))_0x14f130['caps'][_0x3a5bf9[_0x28ae('0x161')]]=startRow;if(!isNaN(startCol))_0x14f130[_0x28ae('0x162')][_0x3a5bf9[_0x28ae('0x163')]]=startCol;_0x2aaddc=_0x14f130[_0x28ae('0x159')](_0x4155fb,_0x2d2c32[_0x28ae('0x155')],_0x2d2c32[_0x28ae('0x86')]);}if(hasUtterances){if(worksheetsUtterances)_0x14f130[_0x28ae('0x162')][_0x3a5bf9[_0x28ae('0x164')]]=worksheetsUtterances;if(!isNaN(startRow))_0x14f130['caps'][_0x3a5bf9[_0x28ae('0x161')]]=startRow;if(!isNaN(startCol))_0x14f130[_0x28ae('0x162')][_0x3a5bf9[_0x28ae('0x163')]]=startCol;_0x1d3718=_0x14f130[_0x28ae('0x159')](_0x4155fb,_0x2d2c32[_0x28ae('0x155')],_0x2d2c32[_0x28ae('0x15a')]);}_0x2aaddc&&_0x2aaddc['forEach'](_0x5ce333=>{_0x5ce333[_0x28ae('0xc2')]=Object[_0x28ae('0xb7')]({},_0x5ce333[_0x28ae('0xc2')],sourceTag);});_0x1d3718&&_0x1d3718[_0x28ae('0x58')](_0x2c8da2=>{_0x2c8da2['sourceTag']=Object[_0x28ae('0xb7')]({},_0x2c8da2[_0x28ae('0xc2')],sourceTag);});_0x59dbed();});}));}let _0x2b654c=Promise['resolve']();return Promise[_0x28ae('0x160')]([_0x2b654c,_0x27ead8]);};const _0x386e90=_0x2277cf({'dirname':__dirname,'filter':/(.+Provider)\.js$/});var _0x29a0af=Object[_0x28ae('0x165')](_0x386e90);const _0x45c7a8=_0x2277cf({'dirname':__dirname,'filter':/(.+Provider)\.js$/});var _0x1ae431=Object[_0x28ae('0x165')](_0x45c7a8);const _0x56a8f2=_0x29a0af[_0x28ae('0x166')](_0x1ae431);const _0x4d909c={};_0x56a8f2['forEach'](_0x976bc7=>{_0x4d909c[_0x976bc7[_0x28ae('0x167')]['id']]=_0x976bc7;});const _0x4d1803={};_0x29a0af[_0x28ae('0x58')](_0xf8b363=>{_0x4d1803[_0xf8b363[_0x28ae('0x167')]['id']]=_0x28ae('0x168');});_0x1ae431[_0x28ae('0x58')](_0x2d684d=>{_0x4d1803[_0x2d684d[_0x28ae('0x167')]['id']]=_0x28ae('0x169');});var _0x12f333=_0x1bde25=>{if(!(_0x1bde25 in _0x4d1803)){throw Error('Unknown\x20ID:\x20'+_0x1bde25);}return _0x4d909c[_0x1bde25];};var _0x31b7a0=Object[_0x28ae('0x16a')](_0x4d909c);var _0x491c11=[[_0x29a0af,_0x1ae431],[_0x29a0af],[_0x1ae431]];var _0x271b9e=[[_0x29a0af],[_0x1ae431]];var _0x1ed3ae={'GetMutatorById':_0x12f333,'allMutatorNames':_0x31b7a0,'pipelineAllMutatorCombined':_0x491c11,'pipelineAllMutatorNotCombined':_0x271b9e};const {pipelineAllMutatorCombined:pipelineAllMutatorCombined$1,pipelineAllMutatorNotCombined:pipelineAllMutatorNotCombined$1,GetMutatorById:GetMutatorById$1,allMutatorNames:allMutatorNames$1}=_0x1ed3ae;var _0x4f79c5=pipelineAllMutatorCombined$1;var _0x1169fc=pipelineAllMutatorNotCombined$1;var _0x55490d=allMutatorNames$1;var _0x917d8c=(_0x3ae6b0,_0x335801)=>{const _0x4eab24=_0x4e40aa(_0x335801);return _0x5b166b(_0x3ae6b0,_0x4eab24);};const _0x5b166b=(_0x5a2172,_0x7df7a0)=>{let _0x492823=new Set();for(const _0x57e67a of _0x7df7a0){let _0x182c11=[_0x5a2172];for(const _0x373cea of _0x57e67a){let _0xded72b=[];for(const _0x4402dd of _0x373cea){for(const _0x256fe6 of _0x182c11){_0xded72b=_0xded72b[_0x28ae('0x166')](_0x4402dd[_0x28ae('0x16b')](_0x256fe6));}}_0x182c11=_0xded72b;}for(const _0xa1b920 of _0x182c11){if(_0x492823[_0x28ae('0x16c')](_0xa1b920)){console[_0x28ae('0x3d')](_0x28ae('0x16d')+_0xa1b920+'>\x20created\x20by\x20'+JSON[_0x28ae('0x81')](_0x57e67a,0x2));}else{_0x492823[_0x28ae('0x16e')](_0xa1b920);}}}return[..._0x492823];};var _0xc0de6f=_0x5b166b;const _0x4e40aa=_0x1f0548=>{if(!_0x1f0548[_0x28ae('0x16f')]||!_0x1f0548['humanifiersToExecute'][_0x28ae('0x50')]){return[[pipelineAllMutatorNotCombined$1]];}const _0x5afa28=_0x430773=>_0x430773['map'](_0x541100=>GetMutatorById$1(_0x541100));return[[_0x5afa28(_0x1f0548[_0x28ae('0x16f')])]];};var _0x3e8168={'pipelineAllMutatorCombined':_0x4f79c5,'pipelineAllMutatorNotCombined':_0x1169fc,'allHumanifiers':_0x55490d,'Execute':_0x917d8c,'ExecutePipeline':_0xc0de6f};const _0x3abf58=_0x413ae8(_0x28ae('0x170'));const {RetrieveTestSetDetails:RetrieveTestSetDetails$2}=_0x3b6ff9;const _0x4d7a2d=_0x28ae('0x171');var _0x4cea0d={'humanifiers':_0x3e8168[_0x28ae('0x172')]};var _0x97e8af=(_0x91ac22,_0x3224f9)=>{const _0xce8f9=new _0x12d2a0(_0x2b434a['Capabilities']);_0xce8f9[_0x28ae('0x135')]();const _0x2990be=_0x4237c5[_0x28ae('0x4a')](process['env'][_0x28ae('0x173')],_0x28ae('0x174')+_0x53e292(_0x28ae('0x175'),0x5));_0x358caf[_0x28ae('0x176')](_0x2990be);return _0x1149d(RetrieveTestSetDetails$2(_0x91ac22),_0xce8f9,_0x2990be,_0x2b434a['Sources'])['then'](()=>{_0x4a79cf(_0x2990be,_0x33bef6=>{if(_0x33bef6){throw _0x33bef6;}});const _0x115fc={};const _0xcca941=_0x584c43(_0xce8f9,_0x3224f9);_0x115fc[_0x28ae('0xc7')]={'all':Object[_0x28ae('0x16a')](_0xcca941['all'])['length'],'me':_0xcca941['me'][_0x28ae('0x177')],'bot':_0xcca941['bot']['size'],'both':_0xcca941[_0x28ae('0x178')]['size'],'neither':_0xcca941[_0x28ae('0x179')][_0x28ae('0x177')],'toHumanify':Object[_0x28ae('0x165')](_0xcca941[_0x28ae('0x17a')])[_0x28ae('0x17b')](_0x495d69=>_0x495d69)[_0x28ae('0x50')],'allUtteranceCount':_0xcca941[_0x28ae('0x17c')],'utterancesToHumanifyCount':_0xcca941[_0x28ae('0x17d')]};_0x115fc[_0x28ae('0x98')]=_0x44fea3(_0xce8f9,_0xcca941,_0x3224f9);_0x3abf58(_0x28ae('0x17e')+JSON[_0x28ae('0x81')](_0x115fc));return _0x2ce9b0(_0xce8f9,_0x91ac22[_0x28ae('0x6b')]);});};const _0x2ce9b0=(_0x2e9d13,_0x1e59dc)=>{const _0x633649=_0x4237c5['join'](process[_0x28ae('0x47')]['TESTSETDIR'],_0x328b7b(_0x1e59dc)+_0x28ae('0x17f')+_0x53e292('Aa0',0x5));_0x358caf[_0x28ae('0x176')](_0x633649);const _0x576fb2=Object[_0x28ae('0x16a')](_0x2e9d13[_0x28ae('0xc7')]);for(let _0x3607bc=0x0;_0x3607bc<_0x576fb2['length'];_0x3607bc++){let _0x37154e=[_0x576fb2[_0x3607bc]][_0x28ae('0x166')](_0x2e9d13[_0x28ae('0xc7')][_0x576fb2[_0x3607bc]]['utterances'])[_0x28ae('0x4a')]('\x0d\x0a');_0x1b182d[_0x28ae('0x180')](_0x4237c5[_0x28ae('0x4a')](_0x633649,_0x576fb2[_0x3607bc]+_0x28ae('0x181')),_0x37154e,function(_0x3400a6){if(_0x3400a6){throw _0x3400a6;}});}const _0x5d37b7=_0x2e9d13['GetCompiler'](_0x2d2c32['SCRIPTING_FORMAT_TXT']);for(let _0xbe4c3=0x0;_0xbe4c3<_0x2e9d13['convos']['length'];_0xbe4c3++){let _0x37154e=_0x5d37b7[_0x28ae('0x182')]([_0x2e9d13[_0x28ae('0xc6')][_0xbe4c3]]);_0x1b182d[_0x28ae('0x180')](_0x4237c5[_0x28ae('0x4a')](_0x633649,'c'+_0xbe4c3+_0x28ae('0x183')),_0x37154e,function(_0x2b3ab3){if(_0x2b3ab3){throw _0x2b3ab3;}});}return _0x633649;};const _0x584c43=(_0x4054c1,_0x5560ed)=>{const _0x11c2c9={'all':_0x4054c1[_0x28ae('0xc7')],'me':new Set(),'bot':new Set(),'both':null,'neither':null,'toHumanify':{},'allUtteranceCount':0x0,'utterancesToHumanifyCount':0x0};_0x11c2c9['neither']=new Set(Object[_0x28ae('0x16a')](_0x11c2c9[_0x28ae('0x160')]));_0x4054c1[_0x28ae('0xc6')][_0x28ae('0x58')](_0xb0abe6=>{_0xb0abe6[_0x28ae('0x184')][_0x28ae('0x58')](_0x56a5ef=>{if(_0x56a5ef[_0x28ae('0x144')]&&_0x56a5ef[_0x28ae('0x144')]in _0x11c2c9['all']){_0x11c2c9[_0x56a5ef[_0x28ae('0x143')]][_0x28ae('0x16e')](_0x56a5ef[_0x28ae('0x144')]);_0x11c2c9['neither'][_0x28ae('0x185')](_0x56a5ef[_0x28ae('0x144')]);}});});const _0x2f7d0e=_0x10e512['uniq'](Array[_0x28ae('0x156')](_0x11c2c9['me']))['filter'](_0x134f41=>_0x11c2c9[_0x28ae('0x186')][_0x28ae('0x16c')](_0x134f41));_0x11c2c9['both']=new Set(_0x2f7d0e);const _0x5caff9={};let _0x29365e=0x0;let _0x386e90=0x0;if(_0x5560ed[_0x28ae('0x16f')]['length']){[..._0x11c2c9['me'],..._0x2f7d0e,..._0x11c2c9[_0x28ae('0x179')]][_0x28ae('0x58')](_0x3beed9=>{_0x386e90+=_0x11c2c9[_0x28ae('0x160')][_0x3beed9][_0x28ae('0xc7')]['length'];let _0x4cfdfa=Math[_0x28ae('0x187')](_0x386e90*_0x5560ed[_0x28ae('0x188')]-_0x29365e);if(_0x29365e===0x0&&_0x4cfdfa===0x0){_0x4cfdfa=0x1;}_0x5caff9[_0x3beed9]=_0x4cfdfa;_0x29365e+=_0x4cfdfa;});}_0x11c2c9['toHumanify']=_0x5caff9;_0x11c2c9[_0x28ae('0x17c')]=_0x386e90;_0x11c2c9[_0x28ae('0x17d')]=_0x29365e;return _0x11c2c9;};const _0x44fea3=(_0x231ffb,_0x466679,_0x5775d2)=>{_0x466679[_0x28ae('0x178')][_0x28ae('0x58')](_0x211ab0=>{if(_0x466679[_0x28ae('0x17a')][_0x211ab0]){let _0x205391=_0x211ab0+_0x4d7a2d;if(_0x205391 in _0x231ffb[_0x28ae('0xc7')]){throw new Error(_0x28ae('0x189')+_0x205391+_0x28ae('0x18a'));}}});const _0x301571={'humanifiedRefs':[],'humanifiedRefCount':0x0,'humanifiedUtterancesCount':0x0,'duplicates':0x0};_0x466679[_0x28ae('0x178')]['forEach'](_0x18483c=>{if(_0x466679[_0x28ae('0x17a')][_0x18483c]){_0x231ffb[_0x28ae('0xc7')][_0x18483c+_0x4d7a2d]=_0x10e512[_0x28ae('0xc5')](_0x231ffb[_0x28ae('0xc7')][_0x18483c]);}});const _0x3e1c45=_0x56822b=>{_0x231ffb[_0x28ae('0xc7')][_0x56822b][_0x28ae('0xc7')]=_0x10e512[_0x28ae('0x18b')](_0x231ffb[_0x28ae('0xc7')][_0x56822b][_0x28ae('0xc7')]);const _0x572659=_0x466679[_0x28ae('0x17a')][_0x56822b];const _0x14c7d5=_0x231ffb[_0x28ae('0xc7')][_0x56822b][_0x28ae('0xc7')];let _0x394ad3=0x0;for(let _0x552848=0x0;_0x552848<_0x572659;_0x552848++){const _0x2a791e=_0x3e8168['Execute'](_0x14c7d5[_0x552848],{'humanifiersToExecute':_0x5775d2[_0x28ae('0x16f')]});_0x231ffb[_0x28ae('0xc7')][_0x56822b][_0x28ae('0xc7')]=_0x231ffb['utterances'][_0x56822b][_0x28ae('0xc7')][_0x28ae('0x166')](_0x2a791e);_0x394ad3+=_0x2a791e[_0x28ae('0x50')];}let _0x2ecddc=_0x231ffb[_0x28ae('0xc7')][_0x56822b][_0x28ae('0xc7')][_0x28ae('0x50')];_0x231ffb[_0x28ae('0xc7')][_0x56822b][_0x28ae('0xc7')]=_0x10e512[_0x28ae('0x18b')](_0x231ffb[_0x28ae('0xc7')][_0x56822b]['utterances']);return{'humanifiedRefCount':_0x572659,'humanifiedUtterancesCount':_0x394ad3,'duplicates':_0x2ecddc-_0x231ffb[_0x28ae('0xc7')][_0x56822b]['length']};};Object[_0x28ae('0x16a')](_0x466679[_0x28ae('0x17a')])[_0x28ae('0x58')](_0x36a891=>{if(_0x466679[_0x28ae('0x17a')][_0x36a891]){const _0x440fc1=_0x3e1c45(_0x36a891);_0x301571[_0x28ae('0x18c')][_0x28ae('0x4b')](_0x36a891);_0x301571[_0x28ae('0x18d')]+=_0x440fc1[_0x28ae('0x18d')];_0x301571[_0x28ae('0x18e')]+=_0x440fc1[_0x28ae('0x18e')];_0x301571['duplicates']+=_0x440fc1[_0x28ae('0x18f')];}});const _0x486375=(_0x35c6ae,_0x466679)=>{_0x35c6ae[_0x28ae('0x184')]['forEach'](_0x5318cd=>{if(_0x5318cd['messageText']&&_0x466679[_0x28ae('0x178')][_0x28ae('0x16c')](_0x5318cd[_0x28ae('0x144')])){return!![];}});return![];};const _0x110b64=[];_0x231ffb[_0x28ae('0xc6')][_0x28ae('0x58')](_0x350b9a=>{if(_0x486375(_0x350b9a,_0x466679));});_0x231ffb[_0x28ae('0xc6')]=_0x231ffb[_0x28ae('0xc6')][_0x28ae('0x166')](_0x110b64);_0x301571['clonedConvoCount']=_0x110b64[_0x28ae('0x50')];return _0x301571;};var _0x2e5c54={'possibleOptions':_0x4cea0d,'CloneTestset':_0x97e8af};var _0x10c36b={'testsets'(_0x265ee6,{where,orderBy,skip,first},_0x40b049,_0x505485){orderBy=orderBy||_0x28ae('0x127');return _0x40b049['db'][_0x28ae('0x4d')][_0x28ae('0xa3')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x505485);},'testset'(_0x3a5b77,{id},_0x24717a,_0x3860f7){return _0x24717a['db'][_0x28ae('0x4d')][_0x28ae('0x53')]({'where':{'id':id}},_0x3860f7);},'testsetscripts'(_0x8846d1,{testSetId,skip,first},_0x5c6ee2,_0x1c5092){return _0x5c6ee2['db']['query'][_0x28ae('0x190')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x1c5092);},'testsetscript'(_0x20d968,{id},_0x219860,_0x39cef5){return _0x219860['db']['query'][_0x28ae('0xe5')]({'where':{'id':id}},_0x39cef5);},'validatetestsetscript'(_0x12edd9,{script,scriptType}){const _0x71f959=new _0x5b0f87({'AddConvos':()=>{},'AddUtterances':()=>{},'IsAsserterValid':()=>!![],'scriptingEvents':{}},{'SCRIPTING_TXT_EOL':'\x0a'});const _0x41ef55=_0x71f959[_0x28ae('0x159')](script,scriptType);if(_0x41ef55&&_0x41ef55[_0x28ae('0x50')]>0x0){if(scriptType===_0x28ae('0x15a')){return Promise['resolve']({'name':_0x41ef55[0x0][_0x28ae('0x6b')],'description':'Utterances','script':script,'scriptType':scriptType});}else{return Promise['resolve']({'name':_0x41ef55[0x0][_0x28ae('0x191')][_0x28ae('0x6b')],'description':_0x41ef55[0x0][_0x28ae('0x191')]['description'],'script':script,'scriptType':scriptType});}}else{return Promise[_0x28ae('0x6d')](new Error(_0x28ae('0x192')));}},'testsetrepositories'(_0x4b28e5,{testSetId,skip,first},_0xa8ad84,_0x51064a){return _0xa8ad84['db'][_0x28ae('0x4d')][_0x28ae('0x193')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x51064a);},'testsetrepository'(_0x29a4ab,{id},_0x134033,_0x2d9ccb){return _0x134033['db']['query'][_0x28ae('0xe7')]({'where':{'id':id}},_0x2d9ccb);},'testsetfolders'(_0x23f1fa,{testSetId,skip,first},_0x57aa0a,_0x1eaa76){return _0x57aa0a['db']['query'][_0x28ae('0x4e')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x1eaa76);},'testsetfolder'(_0x5b1975,{id},_0x4f9291,_0x5f9d1b){return _0x4f9291['db'][_0x28ae('0x4d')][_0x28ae('0xe8')]({'where':{'id':id}},_0x5f9d1b);},'testsetexcels'(_0x27b34d,{testSetId,skip,first},_0x2da72c,_0x336d3b){return _0x2da72c['db'][_0x28ae('0x4d')][_0x28ae('0x194')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x336d3b);},'testsetexcel'(_0x4fb82e,{id},_0x28e11,_0x51b329){return _0x28e11['db']['query'][_0x28ae('0xeb')]({'where':{'id':id}},_0x51b329);},'clonetestsetoptions'(_0x40b256,_0x312a29,_0x361502,_0x21d334){return _0x2e5c54[_0x28ae('0x195')];}};var _0x4651f5=class Cache{constructor(_0x486682){this[_0x28ae('0x196')]=new _0x1cdec7({'stdTTL':_0x486682,'checkperiod':_0x486682*0.2,'useClones':![]});}[_0x28ae('0x197')](_0x5bada4,_0x362509){const _0x4e83b9=this[_0x28ae('0x196')][_0x28ae('0x197')](_0x5bada4);if(_0x4e83b9){return Promise[_0x28ae('0x46')](_0x4e83b9);}return _0x362509()[_0x28ae('0x66')](_0x4ba2a6=>{this[_0x28ae('0x196')][_0x28ae('0x198')](_0x5bada4,_0x4ba2a6);return _0x4ba2a6;});}[_0x28ae('0x199')](_0x5a802e){this[_0x28ae('0x196')][_0x28ae('0x199')](_0x5a802e);}[_0x28ae('0x19a')](_0x50f43b=''){if(!_0x50f43b){return;}const _0x30b72e=this[_0x28ae('0x196')][_0x28ae('0x16a')]();for(const _0x1fd061 of _0x30b72e){if(_0x1fd061[_0x28ae('0x19b')](_0x50f43b)===0x0){this['del'](_0x1fd061);}}}[_0x28ae('0x19c')](){this['cache'][_0x28ae('0x19d')]();}};const _0x2591b4=new _0x4651f5(0x3c*0x3c*0x1);var _0x3bb8e0={'devicesets'(_0x581d1a,{where,orderBy,skip,first},_0x4c6873,_0xd1567f){orderBy=orderBy||_0x28ae('0x127');return _0x4c6873['db'][_0x28ae('0x4d')][_0x28ae('0xb4')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0xd1567f);},'deviceset'(_0xf6b81e,{id},_0x5039dc,_0x332be2){return _0x5039dc['db']['query'][_0x28ae('0x19e')]({'where':{'id':id}},_0x332be2);},async 'availabledevices'(_0x904865,{provider},_0x1c090a){const _0x13b099=await _0x1c090a['db'][_0x28ae('0x4d')][_0x28ae('0x19f')]({'where':{'id':provider}});if(!_0x13b099)return[];if(_0x13b099[_0x28ae('0x6f')]===_0x28ae('0xb6')){return _0x2591b4[_0x28ae('0x197')](_0x28ae('0xb6'),()=>{return _0x804454({'url':_0x28ae('0x1a0'),'json':!![]})['then'](_0x244bfc=>{const _0x3e9d94=_0x244bfc[_0x28ae('0x17b')](_0x311757=>!_0x311757[_0x28ae('0x1a1')])[_0x28ae('0x87')](_0x23b484=>({'name':_0x23b484['long_name']+'\x20'+_0x23b484[_0x28ae('0x1a2')]+',\x20'+_0x23b484['os'],'value':JSON['stringify']({'type':'DESKTOP','capabilities':{'browserName':_0x23b484['api_name'],'platform':_0x23b484['os'],'version':_0x23b484[_0x28ae('0x1a2')]}})}))[_0x28ae('0x166')](_0x244bfc['filter'](_0x4195f7=>_0x4195f7[_0x28ae('0x1a1')])[_0x28ae('0x87')](_0x58a8b7=>({'name':_0x58a8b7[_0x28ae('0x1a3')]+',\x20'+_0x58a8b7[_0x28ae('0x1a2')],'value':JSON[_0x28ae('0x81')]({'type':'MOBILEBROWSER','capabilities':{'browserName':['iphone','ipad'][_0x28ae('0x19b')](_0x58a8b7['api_name'])>=0x0?_0x28ae('0x1a4'):_0x28ae('0x1a5'),'deviceName':_0x58a8b7[_0x28ae('0x1a1')],'platformName':[_0x28ae('0x1a6'),_0x28ae('0x1a7')]['indexOf'](_0x58a8b7[_0x28ae('0x1a8')])>=0x0?_0x28ae('0x1a9'):_0x28ae('0x1aa'),'platformVersion':_0x58a8b7[_0x28ae('0x1a2')]}})})));return _0x10e512[_0x28ae('0x1ab')](_0x10e512[_0x28ae('0x1ac')](_0x3e9d94,_0x28ae('0x6b'),_0x28ae('0x1ad')),'name');});});}else if(_0x13b099[_0x28ae('0x6f')]===_0x28ae('0x1ae')){return _0x2591b4['get'](_0x28ae('0x1ae'),()=>{return Promise[_0x28ae('0x46')]([{'name':'PhantomJS\x20Virtual\x20Browser','value':JSON[_0x28ae('0x81')]({'type':_0x28ae('0x1af'),'capabilities':{'browserName':_0x28ae('0x1b0')}})},{'name':'Generic\x20Browser\x20(manually\x20set\x20capabilities)','value':JSON[_0x28ae('0x81')]({'type':_0x28ae('0x1af'),'capabilities':{}})},{'name':_0x28ae('0x1b1'),'value':JSON[_0x28ae('0x81')]({'type':_0x28ae('0x1af'),'capabilities':{'browserName':'chrome','chromeOptions':{'args':[_0x28ae('0x1b2'),_0x28ae('0x1b3')]}}})}]);});}else if(_0x13b099[_0x28ae('0x6f')]==='INTEGRATED'){return Promise[_0x28ae('0x46')]([{'name':_0x28ae('0x1b4'),'value':JSON[_0x28ae('0x81')]({'type':'DESKTOP','capabilities':{'browserName':_0x28ae('0x1b0')}})}]);}}};var _0x562029={'testprojects'(_0x3908ef,{where,orderBy,skip,first},_0x1ab8d2,_0xd97e77){orderBy=orderBy||_0x28ae('0x127');return _0x1ab8d2['db'][_0x28ae('0x4d')][_0x28ae('0x1b5')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0xd97e77);},'testproject'(_0x562a70,{id},_0x4cbe3a,_0x863d0a){return _0x4cbe3a['db'][_0x28ae('0x4d')][_0x28ae('0x9d')]({'where':{'id':id}},_0x863d0a);}};var _0x58087f={'users'(_0x5649c1,{where,orderBy,skip,first},_0x565b,_0xc48702){orderBy=orderBy||'name_ASC';return _0x565b['db'][_0x28ae('0x4d')][_0x28ae('0x1b6')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0xc48702);},'user'(_0x6c17c9,{id},_0x15565f,_0x1b3369){return _0x15565f['db'][_0x28ae('0x4d')]['user']({'where':{'id':id}},_0x1b3369);},'apikeys'(_0x5506ae,{where,orderBy,skip,first},_0x19075f,_0x402a16){orderBy=orderBy||_0x28ae('0x127');return _0x19075f['db'][_0x28ae('0x4d')][_0x28ae('0x1b7')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x402a16);},'apikey'(_0x2eccc9,{id},_0x46314c,_0x1eef0f){return _0x46314c['db'][_0x28ae('0x4d')]['apiKey']({'where':{'id':id}},_0x1eef0f);},'deviceproviders'(_0x165614,{where,orderBy,skip,first},_0x5717e0,_0x2c5cc2){orderBy=orderBy||_0x28ae('0x127');return _0x5717e0['db'][_0x28ae('0x4d')][_0x28ae('0x1b8')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x2c5cc2);},'deviceprovider'(_0xb2cf00,{id},_0x5a21f0,_0x2da8b1){return _0x5a21f0['db']['query'][_0x28ae('0x19f')]({'where':{'id':id}},_0x2da8b1);}};const _0x32de21=new _0x4651f5(0x3c*0x5);const _0x3611fe=_0x553160=>{if(_0x553160===_0x28ae('0x1b9')){return _0x37df5f()[_0x28ae('0x1ba')]('day');}else if(_0x553160===_0x28ae('0x1bb')){return _0x37df5f()[_0x28ae('0x1bc')](0x6,_0x28ae('0x1bd'))['startOf']('day');}else if(_0x553160===_0x28ae('0x1be')){return _0x37df5f()[_0x28ae('0x1bc')](0xd,_0x28ae('0x1bd'))['startOf']('day');}else if(_0x553160===_0x28ae('0x1bf')){return _0x37df5f()[_0x28ae('0x1bc')](0x1e,_0x28ae('0x1bd'))[_0x28ae('0x1ba')]('day');}else if(_0x553160===_0x28ae('0x1c0')){return _0x37df5f()['subtract'](0x3c,_0x28ae('0x1bd'))[_0x28ae('0x1ba')](_0x28ae('0x1c1'));}};var _0x51c1e4={'chartFailedCountByTestSetByDay'(_0xe8ceda,{testProjectId,timeFrame},_0x26532b,_0x597503){const _0x4ce09f=_0x3611fe(timeFrame||_0x28ae('0x1be'));const _0x10a3ff=_0x37df5f();const _0x3a854a=_0x28ae('0x1c2')+JSON[_0x28ae('0x81')]({'fromDate':_0x4ce09f,'testProjectId':testProjectId});return _0x32de21[_0x28ae('0x197')](_0x3a854a,()=>{return _0x26532b['db'][_0x28ae('0x4d')][_0x28ae('0xa3')]({'orderBy':_0x28ae('0x127')},_0x28ae('0x142'))[_0x28ae('0x66')](_0x2bac1f=>{return Promise['all'](_0x2bac1f['map'](_0x22e120=>{const _0x73d22b=[];for(const _0x287c75=_0x37df5f(_0x4ce09f);_0x287c75['isBefore'](_0x10a3ff);_0x287c75[_0x28ae('0x16e')](0x1,'days')){const _0x27b0b0=_0x37df5f(_0x287c75);const _0x50136f=_0x37df5f(_0x287c75)['add'](0x1,_0x28ae('0x1bd'));const _0x49b2de={'status_in':[_0x28ae('0xf5'),_0x28ae('0x101')],'testSets_some':{'id':_0x22e120['id']},'createdAt_gte':_0x27b0b0['toDate'](),'createdAt_lte':_0x50136f[_0x28ae('0x1c3')]()};if(testProjectId){_0x49b2de['testProject']={'id':testProjectId};}_0x73d22b[_0x28ae('0x4b')](_0x26532b['db'][_0x28ae('0x4d')][_0x28ae('0x152')]({'where':_0x49b2de},_0x28ae('0x1c4'))[_0x28ae('0x66')](_0x2b4cd6=>{if(!_0x2b4cd6)return undefined;return Math['ceil'](_0x2b4cd6[_0x28ae('0x49')]((_0x373725,_0x2ebf30)=>_0x373725+_0x2ebf30['results'][_0x28ae('0x17b')](_0x569d32=>_0x569d32[_0x28ae('0x53')]&&_0x569d32['testSet']['id']===_0x22e120['id']&&!_0x569d32[_0x28ae('0xdf')])[_0x28ae('0x50')],0x0)/_0x2b4cd6[_0x28ae('0x50')]);}));}return Promise[_0x28ae('0x160')](_0x73d22b)[_0x28ae('0x66')](_0x329c58=>{return{'id':_0x22e120['id'],'name':_0x22e120['name'],'data':_0x329c58};});}));})[_0x28ae('0x66')](_0x270ec9=>{if(testProjectId){return _0x270ec9[_0x28ae('0x17b')](_0x2a754c=>_0x2a754c[_0x28ae('0x6a')]&&_0x2a754c['data']['filter'](_0x4d2100=>!isNaN(_0x4d2100))['length']>0x0);}else{return _0x270ec9[_0x28ae('0x17b')](_0x4d1cf0=>_0x4d1cf0[_0x28ae('0x6a')]&&_0x4d1cf0[_0x28ae('0x6a')][_0x28ae('0x17b')](_0x3bc05b=>!isNaN(_0x3bc05b)&&_0x3bc05b>0x0)[_0x28ae('0x50')]>0x0);}});});},'chartFailedCountByChatbotByDay'(_0xe6198e,{timeFrame},_0x1d13a5,_0x183c55){const _0x1af832=_0x3611fe(timeFrame||'LAST2WEEKS');const _0x4f91c8=_0x37df5f();const _0x19d5bb='chartFailedCountByChatbotByDay_'+JSON['stringify']({'fromDate':_0x1af832});return _0x32de21[_0x28ae('0x197')](_0x19d5bb,()=>{return _0x1d13a5['db'][_0x28ae('0x4d')][_0x28ae('0x1c5')]({'orderBy':'name_ASC'},'{\x20id\x20name\x20}')['then'](_0x5536bf=>{return Promise[_0x28ae('0x160')](_0x5536bf['map'](_0xeebcf4=>{const _0x222faa=[];for(const _0x294218=_0x37df5f(_0x1af832);_0x294218[_0x28ae('0x1c6')](_0x4f91c8);_0x294218[_0x28ae('0x16e')](0x1,_0x28ae('0x1bd'))){const _0x3df7e6=_0x37df5f(_0x294218);const _0x48cc1f=_0x37df5f(_0x294218)[_0x28ae('0x16e')](0x1,'days');_0x222faa[_0x28ae('0x4b')](_0x1d13a5['db']['query']['testSessions']({'where':{'status_in':[_0x28ae('0xf5'),'FAILED'],'chatbot':{'id':_0xeebcf4['id']},'createdAt_gte':_0x3df7e6[_0x28ae('0x1c3')](),'createdAt_lte':_0x48cc1f[_0x28ae('0x1c3')]()}},_0x28ae('0x1c7'))['then'](_0x35256e=>{if(!_0x35256e)return undefined;return Math['ceil'](_0x35256e['reduce']((_0x14cfc8,_0x241aeb)=>_0x14cfc8+_0x241aeb[_0x28ae('0x1c8')][_0x28ae('0x17b')](_0x54dac9=>!_0x54dac9[_0x28ae('0xdf')])[_0x28ae('0x50')],0x0)/_0x35256e[_0x28ae('0x50')]);}));}return Promise['all'](_0x222faa)['then'](_0x31f586=>{return{'id':_0xeebcf4['id'],'name':_0xeebcf4[_0x28ae('0x6b')],'data':_0x31f586};});}));})[_0x28ae('0x66')](_0x2af8d6=>{return _0x2af8d6[_0x28ae('0x17b')](_0x2531c6=>_0x2531c6['data']&&_0x2531c6[_0x28ae('0x6a')][_0x28ae('0x17b')](_0x556393=>!isNaN(_0x556393))[_0x28ae('0x50')]>0x0);});});},'chartTestSetResultCount'(_0x80b115,{testProjectId},_0x4b0dd8,_0x60637a){const _0x43fd83=_0x28ae('0x1c9')+JSON[_0x28ae('0x81')]({'testProjectId':testProjectId});return _0x32de21[_0x28ae('0x197')](_0x43fd83,()=>{return _0x4b0dd8['db'][_0x28ae('0x4d')][_0x28ae('0xa3')]({'orderBy':_0x28ae('0x127')},'{\x20id\x20name\x20}')[_0x28ae('0x66')](_0x13ddd1=>{return Promise[_0x28ae('0x160')](_0x13ddd1[_0x28ae('0x87')](_0x86453f=>{const _0xd86b87={'status_in':[_0x28ae('0xf5'),_0x28ae('0x101')],'testSets_some':{'id':_0x86453f['id']}};if(testProjectId){_0xd86b87[_0x28ae('0x9d')]={'id':testProjectId};}return _0x4b0dd8['db'][_0x28ae('0x4d')][_0x28ae('0x152')]({'where':_0xd86b87,'orderBy':'createdAt_DESC','skip':0x0,'first':0x2},'{\x20id\x20createdAt\x20results\x20{\x20success\x20testSet\x20{\x20id\x20}\x20}\x20}')[_0x28ae('0x66')](_0x49a4e1=>{const _0x4c39a6={'id':_0x86453f['id'],'name':_0x86453f[_0x28ae('0x6b')],'testCaseLastTotalCount':0x0,'testCaseLastSuccessCount':0x0,'testCaseLastSuccessRate':0x0,'testCasePreviousTotalCount':0x0,'testCasePreviousSuccessCount':0x0,'testCasePreviousSuccessRate':0x0,'testCaseTrend':_0x28ae('0x1ca')};if(_0x49a4e1&&_0x49a4e1[_0x28ae('0x50')]>0x0){const _0x1c73f7=_0x49a4e1[0x0][_0x28ae('0x1c8')][_0x28ae('0x17b')](_0x5c887e=>_0x5c887e['testSet']&&_0x5c887e[_0x28ae('0x53')]['id']===_0x86453f['id']);_0x4c39a6[_0x28ae('0x1cb')]=_0x49a4e1[0x0][_0x28ae('0x1cc')];_0x4c39a6[_0x28ae('0x1cd')]=_0x49a4e1[0x0]['id'];_0x4c39a6[_0x28ae('0x1ce')]=_0x1c73f7[_0x28ae('0x50')];_0x4c39a6[_0x28ae('0x1cf')]=_0x1c73f7['filter'](_0x159e94=>_0x159e94[_0x28ae('0xdf')])['length'];_0x4c39a6[_0x28ae('0x1d0')]=_0x4c39a6['testCaseLastTotalCount']===_0x4c39a6[_0x28ae('0x1cf')]?0x64:_0x4c39a6['testCaseLastSuccessCount']/_0x4c39a6[_0x28ae('0x1ce')]*0x64;}if(_0x49a4e1&&_0x49a4e1[_0x28ae('0x50')]>0x1){const _0x12e1fb=_0x49a4e1[0x1][_0x28ae('0x1c8')]['filter'](_0x505389=>_0x505389['testSet']&&_0x505389['testSet']['id']===_0x86453f['id']);_0x4c39a6['previousRun']=_0x49a4e1[0x1][_0x28ae('0x1cc')];_0x4c39a6[_0x28ae('0x1d1')]=_0x49a4e1[0x1]['id'];_0x4c39a6[_0x28ae('0x1d2')]=_0x12e1fb[_0x28ae('0x50')];_0x4c39a6[_0x28ae('0x1d3')]=_0x12e1fb[_0x28ae('0x17b')](_0xb46a71=>_0xb46a71[_0x28ae('0xdf')])[_0x28ae('0x50')];_0x4c39a6[_0x28ae('0x1d4')]=_0x4c39a6['testCasePreviousTotalCount']===_0x4c39a6[_0x28ae('0x1d3')]?0x64:_0x4c39a6[_0x28ae('0x1d3')]/_0x4c39a6[_0x28ae('0x1d2')]*0x64;if(_0x4c39a6[_0x28ae('0x1d0')]>_0x4c39a6[_0x28ae('0x1d4')])_0x4c39a6[_0x28ae('0x1d5')]=_0x28ae('0x1d6');else if(_0x4c39a6[_0x28ae('0x1d0')]<_0x4c39a6[_0x28ae('0x1d4')])_0x4c39a6[_0x28ae('0x1d5')]='BAD';else _0x4c39a6[_0x28ae('0x1d5')]=_0x28ae('0x1d7');}return _0x4c39a6;});}));})[_0x28ae('0x66')](_0x23828f=>{const _0x51e7aa=_0x23828f[_0x28ae('0x17b')](_0x5dcfa3=>_0x5dcfa3[_0x28ae('0x1ce')]>0x0);return _0x10e512[_0x28ae('0x1ac')](_0x51e7aa,'lastRun',_0x28ae('0x1d8'));});});},'chartTestProjectTrainingStatusByTestSet'(_0x20d220,{testProjectId},_0x26e781,_0x3db908){const _0xc96f9='chartTestProjectTrainingStatusByTestSet_'+JSON[_0x28ae('0x81')]({'testProjectId':testProjectId});return _0x32de21[_0x28ae('0x197')](_0xc96f9,async()=>{const _0x7ac95a={'status_in':[_0x28ae('0xf5'),_0x28ae('0x101')],'testProject':{'id':testProjectId}};const _0x77b4be=await _0x26e781['db'][_0x28ae('0x4d')][_0x28ae('0x152')]({'where':_0x7ac95a,'orderBy':_0x28ae('0x151'),'skip':0x0,'first':0x1},_0x28ae('0x1d9'));if(!_0x77b4be||_0x77b4be['length']===0x0)return null;const _0x50deec=_0x77b4be[0x0];const _0x1ba823=_0x10e512[_0x28ae('0x1ab')](_0x50deec[_0x28ae('0x1c8')][_0x28ae('0x87')](_0xca33d6=>_0xca33d6[_0x28ae('0x53')]),'id');_0x1ba823[_0x28ae('0x58')](_0x44074a=>{_0x44074a[_0x28ae('0x1da')]=_0x50deec[_0x28ae('0x1c8')][_0x28ae('0x17b')](_0x364c9f=>_0x364c9f[_0x28ae('0x53')]['id']===_0x44074a['id'])[_0x28ae('0x50')];_0x44074a['successCount']=_0x50deec[_0x28ae('0x1c8')][_0x28ae('0x17b')](_0x830931=>_0x830931['testSet']['id']===_0x44074a['id']&&_0x830931[_0x28ae('0xdf')])[_0x28ae('0x50')];_0x44074a[_0x28ae('0x1db')]=_0x50deec[_0x28ae('0x1c8')][_0x28ae('0x17b')](_0x412be6=>_0x412be6[_0x28ae('0x53')]['id']===_0x44074a['id']&&!_0x412be6[_0x28ae('0xdf')])[_0x28ae('0x50')];});return _0x10e512['sortBy'](_0x1ba823,'name');});},'chartTestProjectTrainingStatusByDeviceSet'(_0x409ede,{testProjectId},_0x530ede,_0x185111){const _0x46662d=_0x28ae('0x1dc')+JSON[_0x28ae('0x81')]({'testProjectId':testProjectId});return _0x32de21['get'](_0x46662d,async()=>{const _0x2d278d={'status_in':[_0x28ae('0xf5'),_0x28ae('0x101')],'testProject':{'id':testProjectId}};const _0x21ed1c=await _0x530ede['db']['query']['testSessions']({'where':_0x2d278d,'orderBy':'createdAt_DESC','skip':0x0,'first':0x1},_0x28ae('0x1dd'));if(!_0x21ed1c||_0x21ed1c[_0x28ae('0x50')]===0x0)return null;const _0x222cc5=_0x21ed1c[0x0];const _0xe1db07=_0x10e512[_0x28ae('0x1ab')](_0x222cc5[_0x28ae('0x1c8')]['filter'](_0x43bef6=>_0x43bef6[_0x28ae('0x19e')])[_0x28ae('0x87')](_0x50081e=>_0x50081e[_0x28ae('0x19e')]),'id');_0xe1db07[_0x28ae('0x58')](_0x412a4f=>{_0x412a4f['totalCount']=_0x222cc5['results'][_0x28ae('0x17b')](_0x4168ec=>_0x4168ec[_0x28ae('0x19e')]&&_0x4168ec[_0x28ae('0x19e')]['id']===_0x412a4f['id'])[_0x28ae('0x50')];_0x412a4f[_0x28ae('0x1de')]=_0x222cc5[_0x28ae('0x1c8')]['filter'](_0x420713=>_0x420713[_0x28ae('0x19e')]&&_0x420713['deviceSet']['id']===_0x412a4f['id']&&_0x420713[_0x28ae('0xdf')])[_0x28ae('0x50')];_0x412a4f['failedCount']=_0x222cc5[_0x28ae('0x1c8')]['filter'](_0x5872a2=>_0x5872a2[_0x28ae('0x19e')]&&_0x5872a2[_0x28ae('0x19e')]['id']===_0x412a4f['id']&&!_0x5872a2['success'])[_0x28ae('0x50')];});if(_0x222cc5[_0x28ae('0x1c8')]['filter'](_0x4fe4bd=>!_0x4fe4bd[_0x28ae('0x19e')])[_0x28ae('0x50')]>0x0){_0xe1db07['push']({'id':'','name':'No\x20Device\x20Set','totalCount':_0x222cc5[_0x28ae('0x1c8')][_0x28ae('0x17b')](_0x33c824=>!_0x33c824[_0x28ae('0x19e')])['length'],'successCount':_0x222cc5[_0x28ae('0x1c8')]['filter'](_0x2ca3f6=>!_0x2ca3f6['deviceSet']&&_0x2ca3f6[_0x28ae('0xdf')])[_0x28ae('0x50')],'failedCount':_0x222cc5[_0x28ae('0x1c8')]['filter'](_0x3be201=>!_0x3be201['deviceSet']&&!_0x3be201[_0x28ae('0xdf')])['length']});}return _0x10e512['sortBy'](_0xe1db07,_0x28ae('0x6b'));});}};const {generateToken:generateToken$2}=_0x192b33;var _0x4f76a3={async 'login'(_0x2fabfb,{name,email,password},_0xb484d6,_0x5b2e86){const _0x420909=name?{'name':name}:email?{'email':email}:null;if(!_0x420909){throw new Error(_0x28ae('0x1df'));}const _0x5a314a=await _0xb484d6['db']['query']['user']({'where':_0x420909});if(!_0x5a314a){throw new Error('No\x20such\x20user\x20found:\x20'+(name?name:email));}const _0x1b2774=await _0x21d046[_0x28ae('0x1e0')](password,_0x5a314a[_0x28ae('0xb9')]);if(!_0x1b2774){throw new Error(_0x28ae('0x1e1'));}return{'token':generateToken$2(_0x5a314a),'user':_0x5a314a};}};var _0x5d6ba3={async 'createAgent'(_0x5265ca,{agent},_0x325d32,_0x27d7a4){},async 'updateAgent'(_0x5bad52,{id,agent},_0x255a5f,_0x1d8d1b){const _0x5f50f6=await _0x255a5f['db'][_0x28ae('0x1e2')][_0x28ae('0x1e3')]({'id':id});if(!_0x5f50f6){throw new Error(_0x28ae('0x1e4')+id);}return _0x255a5f['db'][_0x28ae('0x5c')][_0x28ae('0x7c')]({'where':{'id':id},'data':agent},_0x1d8d1b);},async 'deleteAgent'(_0x1d184d,{id},_0x2afffa){}};var _0x239dc3={async 'createChatbot'(_0x50d858,{chatbot},_0x491eb6,_0x599bb8){return _0x491eb6['db'][_0x28ae('0x5c')][_0x28ae('0x1e5')]({'data':chatbot},_0x599bb8);},async 'updateChatbot'(_0x2384bc,{id,chatbot},_0x4f1694,_0xd1658c){const _0x512a58=await _0x4f1694['db'][_0x28ae('0x1e2')][_0x28ae('0x1e6')]({'id':id});if(!_0x512a58){throw new Error(_0x28ae('0x1e7')+id);}return _0x4f1694['db'][_0x28ae('0x5c')][_0x28ae('0x1e8')]({'where':{'id':id},'data':chatbot},_0xd1658c);},async 'deleteChatbot'(_0x480595,{id},_0x1a1cfd){return new Promise((_0x517ee2,_0x462120)=>{_0x1a1cfd['db'][_0x28ae('0x5c')][_0x28ae('0x1e9')]({'where':{'id':id}},_0x28ae('0x1ea'))[_0x28ae('0x66')](()=>_0x517ee2(!![]))['catch'](_0x781f09=>_0x462120(_0x781f09));});}};const _0x356fc5=_0x413ae8(_0x28ae('0x1eb'));var _0x3138f3={async 'createTestSession'(_0x1d1bc3,{testSession},_0x1a40f5,_0x521aab){return _0x1a40f5['db'][_0x28ae('0x5c')]['createTestSession']({'data':testSession},_0x521aab)[_0x28ae('0x66')](_0x4a7a75=>{return new Promise((_0x48b554,_0x437926)=>{_0x1a40f5[_0x28ae('0xa6')][_0x28ae('0xa7')](_0x28ae('0x10d'),{'title':_0x28ae('0x1ec')+testSession['name'],'testSessionId':_0x4a7a75['id']})[_0x28ae('0xa9')](!![])[_0x28ae('0xaa')](_0x8ea415=>{if(_0x8ea415){return _0x437926(_0x8ea415);}_0x48b554(_0x4a7a75);});});});},async 'deleteTestSession'(_0x1515c3,{id},_0x57044a){return new Promise((_0x430647,_0x480e02)=>{_0x57044a['db']['mutation'][_0x28ae('0x1ed')]({'where':{'testSessionJob':{'testSession':{'id':id}}}})[_0x28ae('0x66')](()=>_0x57044a['db'][_0x28ae('0x5c')][_0x28ae('0x1ee')]({'where':{'testSession':{'id':id}}}))[_0x28ae('0x66')](()=>_0x57044a['db'][_0x28ae('0x5c')][_0x28ae('0x1ef')]({'where':{'testSession':{'id':id}}}))[_0x28ae('0x66')](()=>_0x57044a['db'][_0x28ae('0x5c')]['deleteTestSession']({'where':{'id':id}},_0x28ae('0x1ea')))[_0x28ae('0x66')](()=>_0x430647(!![]))[_0x28ae('0x5f')](_0x550ba6=>{_0x356fc5('Error\x20deleting\x20test\x20session\x20'+id+':\x20'+_0x550ba6);return _0x480e02(_0x550ba6);});});}};var _0x2fedb1={async 'createTestSet'(_0x1150cc,{testSet},_0x5d8009,_0x5a9177){return _0x5d8009['db'][_0x28ae('0x5c')][_0x28ae('0x5d')]({'data':testSet},_0x5a9177);},async 'updateTestSet'(_0x323bdf,{id,testSet},_0x1af292,_0x353552){const _0xfc0bdf=await _0x1af292['db'][_0x28ae('0x1e2')]['TestSet']({'id':id});if(!_0xfc0bdf){throw new Error(_0x28ae('0x1f0')+id);}return _0x1af292['db'][_0x28ae('0x5c')]['updateTestSet']({'where':{'id':id},'data':testSet},_0x353552);},async 'deleteTestSet'(_0x5c8179,{id},_0x306c87){return new Promise((_0x47f03a,_0x3e1fdc)=>{_0x306c87['db']['mutation'][_0x28ae('0x1f1')]({'where':{'id':id}},_0x28ae('0x1ea'))[_0x28ae('0x66')](()=>_0x47f03a(!![]))[_0x28ae('0x5f')](_0x5dcd06=>_0x3e1fdc(_0x5dcd06));});},async 'createTestSetScript'(_0xb9dbd3,{testSetScript},_0x36b893,_0x2326d9){return _0x36b893['db'][_0x28ae('0x5c')][_0x28ae('0x14d')]({'data':testSetScript},_0x2326d9);},async 'updateTestSetScript'(_0x4d4d90,{id,testSetScript},_0x2a0967,_0x3e82db){const _0x1a053a=await _0x2a0967['db'][_0x28ae('0x1e2')]['TestSetScript']({'id':id});if(!_0x1a053a){throw new Error(_0x28ae('0x1f2')+id);}return _0x2a0967['db']['mutation']['updateTestSetScript']({'where':{'id':id},'data':testSetScript},_0x3e82db);},async 'deleteTestSetScript'(_0x5939a4,{id},_0x51ebb5){return new Promise((_0xe0cc7c,_0x16b41f)=>{_0x51ebb5['db'][_0x28ae('0x5c')][_0x28ae('0x1f3')]({'where':{'id':id}},_0x28ae('0x1ea'))[_0x28ae('0x66')](()=>_0xe0cc7c(!![]))[_0x28ae('0x5f')](_0x41e97d=>_0x16b41f(_0x41e97d));});},async 'createTestSetRepository'(_0x2fc50d,{testSetRepository},_0x2ce312,_0xace154){},async 'updateTestSetRepository'(_0x16e112,{id,testSetRepository},_0x51bfe6,_0x35b577){},async 'deleteTestSetRepository'(_0x4086a5,{id},_0x4f02e4){},async 'createTestSetFolder'(_0x5970bb,{testSetFolder},_0xa7c1e7,_0x4e6588){return _0xa7c1e7['db'][_0x28ae('0x5c')][_0x28ae('0x1f4')]({'data':testSetFolder},_0x4e6588);},async 'updateTestSetFolder'(_0x363d3b,{id,testSetFolder},_0x5b4a6c,_0x4edde7){const _0x442873=await _0x5b4a6c['db'][_0x28ae('0x1e2')][_0x28ae('0x1f5')]({'id':id});if(!_0x442873){throw new Error(_0x28ae('0x1f6')+id);}return _0x5b4a6c['db'][_0x28ae('0x5c')][_0x28ae('0x1f7')]({'where':{'id':id},'data':testSetFolder},_0x4edde7);},async 'deleteTestSetFolder'(_0x2e98b5,{id},_0x26e82b){return new Promise((_0x5ce16e,_0x2710a1)=>{_0x26e82b['db']['mutation']['deleteTestSetFolder']({'where':{'id':id}},'{id}')[_0x28ae('0x66')](()=>_0x5ce16e(!![]))['catch'](_0x3e1da2=>_0x2710a1(_0x3e1da2));});},async 'createTestSetExcel'(_0x19387d,{testSetExcel},_0x51fd4e,_0x155c5c){return _0x51fd4e['db'][_0x28ae('0x5c')]['createTestSetExcel']({'data':testSetExcel},_0x155c5c);},async 'updateTestSetExcel'(_0x3c1326,{id,testSetExcel},_0x364dd5,_0x3cf9a0){const _0x2f3354=await _0x364dd5['db'][_0x28ae('0x1e2')]['TestSetExcel']({'id':id});if(!_0x2f3354){throw new Error('TestSetExcel\x20not\x20found\x20'+id);}return _0x364dd5['db'][_0x28ae('0x5c')][_0x28ae('0x1f8')]({'where':{'id':id},'data':testSetExcel},_0x3cf9a0);},async 'deleteTestSetExcel'(_0x16b78c,{id},_0x2d4003){return new Promise((_0x173d81,_0x4932a8)=>{_0x2d4003['db'][_0x28ae('0x5c')]['deleteTestSetExcel']({'where':{'id':id}},'{id}')[_0x28ae('0x66')](()=>_0x173d81(!![]))[_0x28ae('0x5f')](_0x3709ea=>_0x4932a8(_0x3709ea));});},async 'cloneTestSet'(_0x302d2c,{id,options},_0x233913,_0x2fb4d3){const _0x319862=await _0x233913['db']['query'][_0x28ae('0x53')]({'where':{'id':id}},'\x20\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20id\x0a\x20\x20\x20\x20\x20\x20name\x0a\x20\x20\x20\x20\x20\x20expandConvos\x0a\x20\x20\x20\x20\x20\x20expandUtterancesToConvos\x0a\x20\x20\x20\x20\x20\x20expandUtterancesIncomprehension\x0a\x20\x20\x20\x20\x20\x20tags\x0a\x20\x20\x20\x20\x20\x20scripts\x20{\x20id\x20script\x20scriptType\x20}\x0a\x20\x20\x20\x20\x20\x20repositories\x20{\x20id\x20giturl\x20gitbranch\x20gitdir\x20globFilter\x20}\x0a\x20\x20\x20\x20\x20\x20folders\x20{\x20id\x20path\x20globFilter\x20}\x0a\x20\x20\x20\x20\x20\x20excels\x20{\x20id\x20filename\x20filecontent\x20hasConvos\x20hasUtterances\x20worksheetsConvos\x20worksheetsUtterances\x20startRow\x20startCol\x20}\x0a\x20\x20\x20\x20}');if(!_0x319862){throw new Error(_0x28ae('0x1f0')+id);}const _0x1e4648=await _0x2e5c54['CloneTestset'](_0x319862,_0xa84a80);const _0x270b75=_0x319862[_0x28ae('0x6b')]+'/'+_0x4237c5[_0x28ae('0x1f9')](_0x1e4648);const _0x599ece=_0x319862[_0x28ae('0x6b')]+'\x20cloned\x20to\x20\x22'+_0x4237c5[_0x28ae('0x1f9')](_0x1e4648)+_0x28ae('0x1fa')+(_0xa84a80['humanifiersToExecute']&&_0xa84a80[_0x28ae('0x16f')][_0x28ae('0x4a')](',\x20'))+_0x28ae('0x1fb')+_0xa84a80[_0x28ae('0x188')]+'.';const _0x5c3e93={'data':{..._0x319862,'name':_0x270b75,'description':_0x599ece,'tags':{'set':_0x319862['tags']?[..._0x319862['tags'],_0x28ae('0x1fc')]:['Cloned']},'folders':{'create':[{'name':_0x28ae('0x1fd'),'path':_0x4237c5[_0x28ae('0x46')](_0x1e4648)}]},'repositories':{},'scripts':[],'excels':{}}};delete _0x5c3e93[_0x28ae('0x6a')]['id'];return _0x233913['db'][_0x28ae('0x5c')][_0x28ae('0x5d')](_0x5c3e93,_0x2fb4d3);}};const _0x279b20=_0x3138f3[_0x28ae('0x1fe')];const _0x1bd247=_0x413ae8(_0x28ae('0x1ff'));var _0x2302bf={async 'createTestProject'(_0x4b3f54,{testProject},_0x1641df,_0x483f8b){return _0x1641df['db'][_0x28ae('0x5c')][_0x28ae('0x200')]({'data':{...testProject,'code':_0x328b7b(testProject[_0x28ae('0x6b')])}},_0x483f8b);},async 'startTestProject'(_0x16f9a5,{id,code},_0x573997){return _0x573997['db'][_0x28ae('0x4d')][_0x28ae('0x9d')]({'where':{'id':id,'code':code}},'{\x20id\x20name\x20chatbot\x20{\x20id\x20}\x20testSets\x20{\x20id\x20}\x20deviceSets\x20{\x20id\x20}\x20batchCount\x20}')[_0x28ae('0x66')](_0x5b052e=>{if(!_0x5b052e)throw new Error('Test\x20Project\x20'+id+'/'+code+_0x28ae('0x201'));return _0x279b20(_0x16f9a5,{'testSession':{'name':_0x5b052e[_0x28ae('0x6b')]+'\x20-\x20Manual\x20Test\x20Session','status':_0x28ae('0xad'),'tags':{'set':[_0x28ae('0x202')]},'chatbot':{'connect':{'id':_0x5b052e['chatbot']['id']}},'testSets':{'connect':_0x5b052e[_0x28ae('0xa3')]&&_0x5b052e[_0x28ae('0xa3')][_0x28ae('0x87')](_0xaaff95=>{return{'id':_0xaaff95['id']};})},'deviceSets':{'connect':_0x5b052e['deviceSets']&&_0x5b052e['deviceSets'][_0x28ae('0x87')](_0x32b1eb=>{return{'id':_0x32b1eb['id']};})},'testProject':{'connect':{'id':_0x5b052e['id']}},'batchCount':_0x5b052e[_0x28ae('0xa5')]}},_0x573997,_0x28ae('0xda'));})[_0x28ae('0x66')](_0x59b933=>_0x59b933['id']);},async 'quickstartTestProject'(_0x5d519e,{testProject},_0x22f6d9){return _0x22f6d9['db'][_0x28ae('0x5c')][_0x28ae('0x200')]({'data':{...testProject,'code':_0x328b7b(testProject[_0x28ae('0x6b')])}},_0x28ae('0x203'))[_0x28ae('0x66')](_0x126e31=>{return _0x279b20(_0x5d519e,{'testSession':{'name':_0x126e31[_0x28ae('0x6b')]+'\x20-\x20Initial\x20Test\x20Session','status':_0x28ae('0xad'),'tags':{'set':['QuickStart']},'chatbot':{'connect':{'id':_0x126e31[_0x28ae('0x9c')]['id']}},'testSets':{'connect':_0x126e31[_0x28ae('0xa3')]&&_0x126e31['testSets'][_0x28ae('0x87')](_0x57fe5a=>{return{'id':_0x57fe5a['id']};})},'deviceSets':{'connect':_0x126e31[_0x28ae('0xb4')]&&_0x126e31[_0x28ae('0xb4')][_0x28ae('0x87')](_0x5c819d=>{return{'id':_0x5c819d['id']};})},'testProject':{'connect':{'id':_0x126e31['id']}}}},_0x22f6d9,'{\x20id\x20}');})[_0x28ae('0x66')](_0x1e461d=>_0x1e461d['id']);},async 'updateTestProject'(_0x2b5cf6,{id,testProject},_0x215d30,_0xa0d824){const _0x103fee=await _0x215d30['db'][_0x28ae('0x1e2')][_0x28ae('0x204')]({'id':id});if(!_0x103fee){throw new Error(_0x28ae('0x205')+id);}return _0x215d30['db'][_0x28ae('0x5c')]['updateTestProject']({'where':{'id':id},'data':{...testProject,'code':_0x328b7b(testProject[_0x28ae('0x6b')])}},_0xa0d824);},async 'deleteTestProject'(_0x1e06c5,{id},_0x300c94){return new Promise((_0x1bd232,_0x5d56ca)=>{_0x300c94['db'][_0x28ae('0x5c')][_0x28ae('0xff')]({'data':{'testProject':{'disconnect':!![]}},'where':{'testProject':{'id':id}}})[_0x28ae('0x66')](()=>_0x300c94['db'][_0x28ae('0x5c')][_0x28ae('0x206')]({'where':{'id':id}},_0x28ae('0x1ea')))['then'](()=>_0x1bd232(!![]))[_0x28ae('0x5f')](_0x38a5f0=>{_0x1bd247(_0x28ae('0x207')+id+':\x20'+_0x38a5f0);return _0x5d56ca(_0x38a5f0);});});}};const _0x21d2fe=_0x413ae8(_0x28ae('0x208'));let _0x26b9c3=[_0x28ae('0x1ae')];var _0x6a339f={async 'createUser'(_0x514c1,{user},_0x1e8db9,_0x1bdf5d){if(user[_0x28ae('0xb9')]){user[_0x28ae('0xb9')]=await _0x21d046['hash'](user['password'],0xa);}if(!user[_0x28ae('0x209')]){user[_0x28ae('0x209')]={'set':[_0x28ae('0x20a')]};}return _0x1e8db9['db']['mutation']['createUser']({'data':user},_0x1bdf5d);},async 'updateUser'(_0x260183,{id,user},_0x3d3f88,_0x1b8b3a){const _0x5eeb24=await _0x3d3f88['db'][_0x28ae('0x4d')]['user']({'where':{'id':id}});if(!_0x5eeb24){throw new Error(_0x28ae('0x20b')+id);}if(_0x3d3f88['request']['user']['id']!==id&&_0x3d3f88[_0x28ae('0x125')][_0x28ae('0x126')][_0x28ae('0x209')][_0x28ae('0x20c')](_0x35b16b=>_0x35b16b===_0x28ae('0x20d'))<0x0){throw new Error(_0x28ae('0x20e'));}if(user[_0x28ae('0xb9')]){user[_0x28ae('0xb9')]=await _0x21d046[_0x28ae('0x20f')](user[_0x28ae('0xb9')],0xa);}if(_0x5eeb24[_0x28ae('0x6b')]==='admin'){user[_0x28ae('0x6b')]=_0x28ae('0x210');user[_0x28ae('0x209')]={'set':['ADMIN']};}if(!user[_0x28ae('0x209')]){user[_0x28ae('0x209')]={'set':['USER']};}return _0x3d3f88['db'][_0x28ae('0x5c')][_0x28ae('0x211')]({'where':{'id':id},'data':user},_0x1b8b3a);},async 'deleteUser'(_0x3edd40,{id},_0x43c9ab){const _0x39abc7=await _0x43c9ab['db'][_0x28ae('0x4d')]['user']({'where':{'id':id}});if(!_0x39abc7)return!![];if(_0x39abc7[_0x28ae('0x6b')]===_0x28ae('0x210')){throw new Error('Not\x20allowed\x20to\x20delete\x20user\x20\x22admin\x22');}return _0x43c9ab['db'][_0x28ae('0x5c')][_0x28ae('0x212')]({'where':{'id':id}},_0x28ae('0x1ea'))[_0x28ae('0x66')](()=>!![])[_0x28ae('0x5f')](_0x262752=>{_0x21d2fe(_0x28ae('0x213')+id+':\x20'+_0x262752);throw _0x262752;});},async 'createApiKey'(_0x4bce6f,{apiKey},_0x11ffef,_0xae8241){apiKey[_0x28ae('0x214')]=_0x53e292(_0x28ae('0x175'),0x14);return _0x11ffef['db'][_0x28ae('0x5c')][_0x28ae('0x215')]({'data':apiKey},_0xae8241);},async 'updateApiKey'(_0x30a664,{id,apiKey},_0x2c090,_0x2f1c9e){const _0x2caff8=await _0x2c090['db'][_0x28ae('0x1e2')]['ApiKey']({'id':id});if(!_0x2caff8){throw new Error('ApiKey\x20not\x20found\x20'+id);}delete apiKey[_0x28ae('0x214')];return _0x2c090['db'][_0x28ae('0x5c')][_0x28ae('0x216')]({'where':{'id':id},'data':apiKey},_0x2f1c9e);},async 'deleteApiKey'(_0x897bdc,{id},_0x25df6f){return _0x25df6f['db'][_0x28ae('0x5c')][_0x28ae('0x217')]({'where':{'id':id}},_0x28ae('0x1ea'))[_0x28ae('0x66')](()=>!![])[_0x28ae('0x5f')](_0x5cd545=>{_0x21d2fe('Error\x20deleting\x20ApiKey\x20'+id+':\x20'+_0x5cd545);throw _0x5cd545;});},async 'createDeviceProvider'(_0x277cb9,{deviceProvider},_0x5855b6,_0x1f6d47){if(deviceProvider[_0x28ae('0x6f')]===_0x28ae('0xbe')){throw new Error('DeviceProvider\x20type\x20INTEGRATED\x20not\x20allowed\x20to\x20create');}if(_0x26b9c3[_0x28ae('0x19b')](deviceProvider[_0x28ae('0x6f')])<0x0){throw new Error(_0x28ae('0x218')+deviceProvider[_0x28ae('0x6f')]+_0x28ae('0x219'));}return _0x5855b6['db'][_0x28ae('0x5c')][_0x28ae('0x21a')]({'data':deviceProvider},_0x1f6d47);},async 'updateDeviceProvider'(_0x97a98d,{id,deviceProvider},_0x4d6a85,_0x2fa6c3){const _0x39b337=await _0x4d6a85['db']['exists']['DeviceProvider']({'id':id});if(!_0x39b337){throw new Error(_0x28ae('0x21b')+id);}if(_0x26b9c3['indexOf'](deviceProvider[_0x28ae('0x6f')])<0x0){throw new Error(_0x28ae('0x218')+deviceProvider[_0x28ae('0x6f')]+'\x20not\x20supported\x20in\x20this\x20version');}return _0x4d6a85['db'][_0x28ae('0x5c')][_0x28ae('0x21c')]({'where':{'id':id},'data':deviceProvider},_0x2fa6c3);},async 'deleteDeviceProvider'(_0x4ae037,{id},_0xfe01a){const _0x27e45f=await _0xfe01a['db'][_0x28ae('0x4d')][_0x28ae('0x19f')]({'where':{'id':id}});if(!_0x27e45f)return!![];if(_0x27e45f[_0x28ae('0x6f')]===_0x28ae('0xbe')){throw new Error(_0x28ae('0x21d'));}try{await _0xfe01a['db']['mutation'][_0x28ae('0x21e')]({'where':{'id':id}},_0x28ae('0x1ea'));return!![];}catch(_0x3956f8){_0x21d2fe(_0x28ae('0x21f')+id+':\x20'+_0x3956f8);throw _0x3956f8;}}};const _0x58b9a5=_0x413ae8(_0x28ae('0x220'));var _0x1d73df={async 'createDeviceSet'(_0x2c4acf,{deviceSet},_0x4f511f,_0xf78d15){return _0x4f511f['db'][_0x28ae('0x5c')][_0x28ae('0x221')]({'data':deviceSet},_0xf78d15);},async 'updateDeviceSet'(_0x519b25,{id,deviceSet},_0x50752a,_0x26f52e){const _0x1f4170=await _0x50752a['db'][_0x28ae('0x1e2')][_0x28ae('0x222')]({'id':id});if(!_0x1f4170){throw new Error(_0x28ae('0x223')+id);}return _0x50752a['db'][_0x28ae('0x5c')][_0x28ae('0x224')]({'where':{'id':id},'data':deviceSet},_0x26f52e);},async 'deleteDeviceSet'(_0x1f8256,{id},_0x29417c){return new Promise((_0x34097e,_0x6d2501)=>{_0x29417c['db']['query'][_0x28ae('0x19e')]({'where':{'id':id}},_0x28ae('0x225'))[_0x28ae('0x66')](_0x57b08c=>{if(!_0x57b08c)throw new Error(_0x28ae('0x223')+id);return _0x29417c['db']['mutation'][_0x28ae('0x226')]({'where':{'id_in':_0x57b08c['devices'][_0x28ae('0x87')](_0x3bbd67=>_0x3bbd67['id'])}});})['then'](()=>_0x29417c['db']['mutation']['deleteDeviceSet']({'where':{'id':id}},'{id}'))[_0x28ae('0x66')](()=>_0x34097e(!![]))[_0x28ae('0x5f')](_0x163766=>{_0x58b9a5(_0x28ae('0x227')+id+':\x20'+_0x163766);return _0x6d2501(_0x163766);});});}};const _0x199ae4={};var _0x13627b=_0x199ae4;const {withFilter}=_0x3d4e12;var _0xadd449={'testSessionProgress':{'subscribe':withFilter((_0x2435e7,{testSessionId},{pubsub})=>_0x4120f0[_0x28ae('0x12e')](_0x28ae('0x105')),(_0x2a8a14,{testSessionId})=>{return _0x2a8a14[_0x28ae('0x11d')]['id']===testSessionId;})},'newTestSession':{'subscribe':(_0x8f8599,_0x5ce8f7,_0x44498d,_0x4c92d0)=>{return _0x44498d['db']['subscription'][_0x28ae('0x67')]({'where':{'mutation_in':[_0x28ae('0x228')]}},_0x4c92d0);}},'changeTestSession':{'subscribe':(_0x5d5c83,{ids},_0x3c54a4,_0x402e91)=>{return _0x3c54a4['db'][_0x28ae('0x229')][_0x28ae('0x67')]({'where':{'mutation_in':['UPDATED'],'node':{'id_in':ids}}},_0x402e91);}},'changeTestSessionJobs':{'subscribe':(_0xf75f0a,{testSessionIds},_0x4ae832,_0x50f73c)=>{return _0x4ae832['db'][_0x28ae('0x229')][_0x28ae('0x22a')]({'where':{'mutation_in':[_0x28ae('0x22b')],'node':{'testSession':{'id_in':testSessionIds}}}},_0x50f73c);}},'newTestSessionJobLogs':{'subscribe':(_0x101d9c,{testSessionJobId},_0x708529,_0x31fb6f)=>{return _0x708529['db'][_0x28ae('0x229')][_0x28ae('0x22c')]({'where':{'mutation_in':['CREATED'],'node':{'testSessionJob':{'id':testSessionJobId}}}},_0x31fb6f);}},'newTestSessionTestCaseResults':{'subscribe':(_0x13d182,{testSessionIds},_0x224755,_0x204ea5)=>{return _0x224755['db']['subscription'][_0x28ae('0x153')]({'where':{'mutation_in':[_0x28ae('0x228')],'node':{'testSession':{'id_in':testSessionIds}}}},_0x204ea5);}}};var _0x13bd1a={'Query':{..._0xe90884,..._0x9f3c1c,..._0x1b2d7c,..._0x2f6bdb[_0x28ae('0x22d')],..._0x10695f,..._0x10c36b,..._0x3bb8e0,..._0x562029,..._0x58087f,..._0x51c1e4},'Mutation':{..._0x4f76a3,..._0x5d6ba3,..._0x239dc3,..._0x2f6bdb[_0x28ae('0x22e')],..._0x3138f3,..._0x2fedb1,..._0x2302bf,..._0x6a339f,..._0x1d73df},'Subscription':{..._0x13627b,..._0x2f6bdb[_0x28ae('0x22f')],..._0xadd449}};const _0xfdb35='request.user';const _0x1a213e=_0x28ae('0x230');const _0x4b17ac=_0x2498ca=>_0x509437(_0x2498ca,_0xfdb35);const _0xf34e26=_0x1ac455=>_0x509437(_0x1ac455,_0x1a213e);const _0x9fbf2c=_0x285068=>{const _0x519fe5=_0x4b17ac(_0x285068);const _0x195cbf=_0xf34e26(_0x285068);if(!_0x519fe5&&!_0x195cbf)throw new Error(_0x28ae('0x231'));return _0x519fe5||_0x195cbf;};var _0x3bee70={'isAuthenticated':(_0x5c54fc,_0x42f196,_0x1ba340,_0x1841a6)=>{_0x9fbf2c(_0x1841a6);return _0x5c54fc();},'hasRole':(_0x396fad,_0x4961d1,{roles},_0x31cab2)=>{const _0x38c5ae=_0x9fbf2c(_0x31cab2);for(const _0x3ebd2d in _0x38c5ae['roles']||[]){const _0x150dbd=_0x38c5ae['roles'][_0x3ebd2d];if(roles[_0x28ae('0x232')](_0x150dbd)){return _0x396fad();}}throw new Error(_0x28ae('0x233'));}};const {jwtSettings:jwtSettings$1,tokenToUserId:tokenToUserId$1}=_0x192b33;const _0xcc66a6=_0x413ae8(_0x28ae('0x234'));let _0x1dd233=null;const _0x23a159=async(_0x5c0cc3,_0xaadb0c,_0x4fc11b,_0x19404b)=>{const _0x29d257=_0x5c0cc3[_0x28ae('0x4d')][_0x28ae('0x235')]||_0x5c0cc3[_0x28ae('0x236')]&&_0x5c0cc3[_0x28ae('0x236')]['APIKEY']||_0x5c0cc3[_0x28ae('0x237')][_0x28ae('0x235')];const _0x2a34bc=_0x19404b(_0x5c0cc3);if(_0x29d257){_0x29422f[_0x28ae('0x238')](_0x2a34bc['db'],_0x29d257)[_0x28ae('0x66')](_0x38bcc7=>{if(_0x38bcc7){_0xcc66a6(_0x28ae('0x239')+_0x41a0b['inspect'](_0x38bcc7));_0x5c0cc3['apiKey']=_0x38bcc7;return _0x4fc11b();}else{_0xcc66a6('Api\x20Key\x20not\x20found\x20-\x20'+_0x29d257);return _0x4fc11b();}})[_0x28ae('0x5f')](_0x546fcb=>{_0xcc66a6('Api\x20Key\x20lookup\x20error\x20-\x20'+_0x29d257+_0x28ae('0x150')+_0x546fcb);return _0x4fc11b();});}else{return _0x4fc11b();}};const _0x34f774=async(_0x39391f,_0x145a72,_0x3e4d03,_0x185d3d)=>{if(_0x39391f['user']){const _0x2aa659=_0x185d3d(_0x39391f)['db'];const _0x3d2aa3=_0x39391f['user'];const _0x1257f1=await _0x2aa659[_0x28ae('0x4d')][_0x28ae('0x126')]({'where':{'id':tokenToUserId$1(_0x3d2aa3)}},_0x28ae('0x124'));_0x39391f[_0x28ae('0x126')]={..._0x1257f1,'token':_0x3d2aa3};return _0x3e4d03();}if(process['env'][_0x28ae('0x23a')]){if(!_0x1dd233){const _0x171384=_0x185d3d(_0x39391f)['db'];_0x1dd233=await _0x171384[_0x28ae('0x4d')][_0x28ae('0x126')]({'where':{'name':process[_0x28ae('0x47')]['JWT_AUTOLOGIN_USERNAME']}},_0x28ae('0x124'));_0xcc66a6(_0x28ae('0x23b')+process[_0x28ae('0x47')]['JWT_AUTOLOGIN_USERNAME']+'.');}_0x39391f['user']={..._0x1dd233,'token':null};return _0x3e4d03();}return _0x3e4d03();};const _0x4b30b5=()=>_0xa0ad02(Object[_0x28ae('0xb7')]({},jwtSettings$1(),{'credentialsRequired':![],'getToken':_0x2fc5b2=>{if(_0x2fc5b2[_0x28ae('0x237')][_0x28ae('0x23c')]&&_0x2fc5b2[_0x28ae('0x237')][_0x28ae('0x23c')][_0x28ae('0x23d')]('\x20')[0x0]===_0x28ae('0x23e')){return _0x2fc5b2[_0x28ae('0x237')][_0x28ae('0x23c')][_0x28ae('0x23d')]('\x20')[0x1];}else if(_0x2fc5b2[_0x28ae('0x4d')]&&_0x2fc5b2[_0x28ae('0x4d')][_0x28ae('0x23f')]){return _0x2fc5b2[_0x28ae('0x4d')][_0x28ae('0x23f')];}else if(_0x2fc5b2[_0x28ae('0x236')]&&_0x2fc5b2[_0x28ae('0x236')][_0x28ae('0x23f')]){return _0x2fc5b2[_0x28ae('0x236')][_0x28ae('0x23f')];}return null;}}));var _0x1fe881=(_0x2fac58,_0x3da0d0,_0x1c6e53)=>{_0x2fac58[_0x28ae('0x240')](_0x4b30b5());_0x2fac58['use']((_0x5181a3,_0x1259db,_0x3aa253)=>_0x34f774(_0x5181a3,_0x1259db,_0x3aa253,_0x1c6e53));_0x2fac58[_0x28ae('0x240')]((_0x54477a,_0x802d38,_0x5348a7)=>_0x23a159(_0x54477a,_0x802d38,_0x5348a7,_0x1c6e53));};const _0x42a83e=_0x413ae8(_0x28ae('0x241'));var _0x577ca4=(_0x376932,_0xc2ebb)=>{_0x376932[_0x28ae('0x197')](_0x28ae('0x242'),(_0x5ff65,_0x18066a)=>{const _0xc86f61=_0x5ff65[_0x28ae('0x243')]['id'];const _0x15de61=_0xc2ebb(_0x5ff65);_0x29422f[_0x28ae('0x244')](_0x15de61['db'],_0xc86f61)[_0x28ae('0x66')](_0x33edf4=>{if(_0x33edf4){const _0x476c48=new Buffer(_0x33edf4[_0x28ae('0x8d')],_0x28ae('0x158'));_0x18066a['writeHead'](0xc8,{'Content-disposition':_0x28ae('0x245')+_0x33edf4['filename'],'Content-Length':_0x476c48[_0x28ae('0x50')]});_0x18066a[_0x28ae('0x246')](_0x476c48);}else{_0x42a83e(_0x28ae('0x247')+_0xc86f61);_0x18066a['sendStatus'](0x194);}})[_0x28ae('0x5f')](_0x442523=>{_0x42a83e(_0x28ae('0x248')+_0xc86f61+'\x20-\x20'+_0x442523);_0x18066a[_0x28ae('0x249')](0x194);});});_0x376932[_0x28ae('0x197')](_0x28ae('0x24a'),(_0x56053d,_0x4788bf)=>{const _0x214a10=_0x56053d[_0x28ae('0x243')]['id'];const _0x5cd69c=_0xc2ebb(_0x56053d);_0x29422f[_0x28ae('0x24b')](_0x5cd69c['db'],_0x214a10)[_0x28ae('0x66')](_0x577ca4=>{if(_0x577ca4){const _0x9f20fe=new Buffer(_0x577ca4[_0x28ae('0x158')],'base64');_0x4788bf[_0x28ae('0x24c')](0xc8,{'Content-Disposition':'inline;\x20filename='+_0x577ca4[_0x28ae('0x6b')],'Content-Type':_0x577ca4['mimeType'],'Content-Length':_0x9f20fe[_0x28ae('0x50')]});_0x4788bf['end'](_0x9f20fe);}else{_0x42a83e(_0x28ae('0x24d')+_0x214a10);_0x4788bf[_0x28ae('0x249')](0x194);}})['catch'](_0x1c8405=>{_0x42a83e('Attachment\x20lookup\x20error\x20-\x20'+_0x214a10+_0x28ae('0x150')+_0x1c8405);_0x4788bf[_0x28ae('0x249')](0x194);});});};const _0x54e8dc=_0x413ae8(_0x28ae('0x24e'));const _0x56a820=_0x3138f3[_0x28ae('0x1fe')];const _0x5eeb9a=(_0x4b145c,_0x1ea9fe)=>{return _0x4b145c[_0x28ae('0x4d')][_0x1ea9fe]||_0x4b145c[_0x28ae('0x236')]&&_0x4b145c['body'][_0x1ea9fe]||_0x4b145c[_0x28ae('0x237')][_0x1ea9fe];};const _0x5c7295=(_0x46e46a,_0xca7144,_0x26cf53,_0x1238ad)=>{_0x29422f[_0x28ae('0x24f')](_0xca7144['db'],_0x46e46a)['then'](_0x1b2bfd=>{if(!_0x1b2bfd){throw new Error(_0x28ae('0x95')+_0x46e46a+_0x28ae('0x201'));}const _0x3712e0=_0x5eeb9a(_0x26cf53,_0x28ae('0x250'))||_0x28ae('0x251');if(_0x3712e0===_0x28ae('0x251')){delete _0x1b2bfd['results'];if(_0x1b2bfd['status']===_0x28ae('0x101')){_0x1238ad[_0x28ae('0xcd')](0x1f4)[_0x28ae('0x252')](_0x1b2bfd);}else{_0x1238ad[_0x28ae('0xcd')](0xc8)[_0x28ae('0x252')](_0x1b2bfd);}}else if(_0x3712e0==='junit'){const _0x1dac36=_0x10e512[_0x28ae('0x253')](_0x1b2bfd[_0x28ae('0x1c8')],_0x35c30f=>_0x35c30f['testSet']?_0x35c30f['testSet']['name']:'');const _0x1392b3=_0x10e512[_0x28ae('0x16a')](_0x1dac36)[_0x28ae('0x87')](_0x52c7ca=>{const _0x4ce66a=_0x1dac36[_0x52c7ca];const _0x307483={'testsuite':[{'_attr':{'name':_0x52c7ca||_0x28ae('0x254'),'tests':_0x4ce66a[_0x28ae('0x50')],'failures':_0x4ce66a[_0x28ae('0x17b')](_0x3f13eb=>!_0x3f13eb[_0x28ae('0xdf')])[_0x28ae('0x50')]}}]};return _0x307483;});const _0x2471f9=_0x440cad({'testsuites':[{'_attr':{'name':_0x1b2bfd['name'],'tests':_0x1b2bfd[_0x28ae('0x1c8')][_0x28ae('0x50')],'failures':_0x1b2bfd[_0x28ae('0x1c8')][_0x28ae('0x17b')](_0x551b6c=>!_0x551b6c['success'])[_0x28ae('0x50')]}}]['concat'](_0x1392b3)},{'declaration':!![]});_0x1238ad[_0x28ae('0x198')](_0x28ae('0x255'),_0x28ae('0x256'));_0x1238ad['status'](0xc8)[_0x28ae('0x252')](_0x2471f9);}else{_0x1238ad['sendStatus'](0x194)[_0x28ae('0x252')](_0x28ae('0x257'));}})[_0x28ae('0x5f')](_0x3da592=>{_0x54e8dc(_0x28ae('0x258')+_0x46e46a+'\x20-\x20'+_0x3da592);_0x1238ad[_0x28ae('0x249')](0x194);});};const _0x5b83a5=(_0x40c466,_0x37cff9,_0x1d3dbf,_0x4541dc)=>{const _0xffd7eb=_0x37cff9[_0x28ae('0x104')]['asyncIterator']('TEST_SESSION_PROGRESS');(async function loop(){while(!![]){const {value}=await _0xffd7eb[_0x28ae('0x259')]();if(value['testSessionProgress']&&value[_0x28ae('0x11d')][_0x28ae('0xcd')]&&value[_0x28ae('0x11d')]['id']===_0x40c466){_0x54e8dc('Test\x20Project\x20'+_0x40c466+_0x28ae('0x25a')+value[_0x28ae('0x11d')][_0x28ae('0xcd')]);if(value['testSessionProgress'][_0x28ae('0xcd')]===_0x28ae('0xf5')){return _0x5c7295(_0x40c466,_0x37cff9,_0x1d3dbf,_0x4541dc);}if(value['testSessionProgress'][_0x28ae('0xcd')]===_0x28ae('0x101')){return _0x5c7295(_0x40c466,_0x37cff9,_0x1d3dbf,_0x4541dc);}}}}());};const _0x117c8c=({ctxFactory,testProjectCode,req,res})=>{const _0x389d11=_0x327e07(req);_0x389d11['db'][_0x28ae('0x4d')][_0x28ae('0x9d')]({'where':{'code':testProjectCode}},_0x28ae('0x203'))[_0x28ae('0x66')](_0x422e3a=>{if(!_0x422e3a){throw new Error('Test\x20Project\x20'+testProjectCode+_0x28ae('0x201'));}const _0x26f5c2=_0x5eeb9a(req,_0x28ae('0x25b'));const _0x51b86a=_0x5eeb9a(req,'BUILDCOMMENT');const _0x258037=_0x5eeb9a(req,_0x28ae('0x25c'));const _0x813ce6=_0x14e356=>{return Object['keys'](_0x14e356)['reduce']((_0x49df7b,_0x224ecc)=>{_0x49df7b['push']({'name':_0x224ecc,'type':_0x28ae('0x25d'),'stringValue':_0x14e356[_0x224ecc]});return _0x49df7b;},[]);};const _0x158ea3=req[_0x28ae('0x236')]&&req['body'][_0x28ae('0x25e')]&&_0x813ce6(req['body'][_0x28ae('0x25e')])||[];const _0x2a2ed6=req[_0x28ae('0x236')]&&req[_0x28ae('0x236')][_0x28ae('0x25f')]&&_0x813ce6(req['body'][_0x28ae('0x25f')])||[];const _0x412042=req[_0x28ae('0x236')]&&req['body'][_0x28ae('0x260')]&&_0x813ce6(req[_0x28ae('0x236')][_0x28ae('0x260')])||[];const _0x2e90a6={'name':_0x26f5c2||_0x422e3a[_0x28ae('0x6b')]+'\x20-\x20Test\x20Session','description':_0x51b86a,'status':_0x28ae('0xad'),'tags':{'set':_0x258037?_0x10e512[_0x28ae('0x261')](_0x258037)?_0x258037:[_0x258037]:[]},'chatbot':{'connect':{'id':_0x422e3a[_0x28ae('0x9c')]['id']}},'testSets':{'connect':_0x422e3a[_0x28ae('0xa3')]&&_0x422e3a['testSets'][_0x28ae('0x87')](_0x3ead51=>{return{'id':_0x3ead51['id']};})},'deviceSets':{'connect':_0x422e3a[_0x28ae('0xb4')]&&_0x422e3a[_0x28ae('0xb4')]['map'](_0x3b0a04=>{return{'id':_0x3b0a04['id']};})},'testProject':{'connect':{'id':_0x422e3a['id']}},'capabilities':{'create':_0x158ea3},'sources':{'create':_0x2a2ed6},'envs':{'create':_0x412042},'batchCount':_0x422e3a[_0x28ae('0xa5')]};_0x54e8dc(_0x28ae('0x262')+JSON['stringify'](_0x2e90a6,null,0x2));return _0x56a820(null,{'testSession':_0x2e90a6},_0x389d11,'{\x20id\x20status\x20}');})[_0x28ae('0x66')](_0x244376=>{const _0x586f14=_0x5eeb9a(req,_0x28ae('0x263'));if(_0x244376[_0x28ae('0xcd')]!==_0x28ae('0xf5')&&_0x244376[_0x28ae('0xcd')]!==_0x28ae('0x101')&&_0x586f14==='1'){_0x5b83a5(_0x244376['id'],_0x389d11,req,res);}else{_0x5c7295(_0x244376['id'],_0x389d11,req,res);}})[_0x28ae('0x5f')](_0x4a316f=>{_0x54e8dc(_0x28ae('0x264')+testProjectCode+_0x28ae('0x150')+_0x4a316f);res[_0x28ae('0x249')](0x194);});};const _0xbe1db1=({ctxFactory,nameOrId,req,res})=>{const _0x52b871=_0x327e07(req);_0x52b871['db']['query'][_0x28ae('0x152')]({'where':{'OR':[{'id':nameOrId},{'name':nameOrId}]},'orderBy':'createdAt_DESC','first':0x1},_0x28ae('0x265'))[_0x28ae('0x66')](_0x2af9d0=>{if(!_0x2af9d0){return res[_0x28ae('0x249')](0x194);}const _0x2dfeda=_0x2af9d0[0x0];const _0x242bd7=_0x5eeb9a(req,_0x28ae('0x263'));if(_0x2dfeda[_0x28ae('0xcd')]!==_0x28ae('0xf5')&&_0x2dfeda['status']!==_0x28ae('0x101')&&_0x242bd7==='1'){_0x5b83a5(_0x2dfeda['id'],_0x52b871,req,res);}else{_0x5c7295(_0x2dfeda['id'],_0x52b871,req,res);}})['catch'](_0x129ddb=>{_0x54e8dc(_0x28ae('0x258')+nameOrId+_0x28ae('0x150')+_0x129ddb);res[_0x28ae('0x249')](0x194);});};var _0x478913=(_0x102edb,_0x3b1925)=>{const _0x430e85=(_0x907cf,_0x3e87e7)=>{_0x117c8c({'testProjectCode':_0x907cf[_0x28ae('0x243')]['code'],'ctxFactory':_0x3b1925,'req':_0x907cf,'res':_0x3e87e7});};const _0x1401b5=(_0x11de13,_0x5b53b5)=>{_0xbe1db1({'nameOrId':_0x11de13[_0x28ae('0x243')][_0x28ae('0x266')],'ctxFactory':_0x3b1925,'req':_0x11de13,'res':_0x5b53b5});};_0x102edb['post'](_0x28ae('0x267'),_0x430e85);_0x102edb['get']('/api/triggerbuild/:code',_0x430e85);_0x102edb[_0x28ae('0x197')](_0x28ae('0x268'),_0x1401b5);};var _0x2f77e2=(_0x2b19a6,_0xb5f45a)=>{_0x2b19a6[_0x28ae('0x197')]('/api/version',(_0x474f6f,_0x363493)=>{_0x363493[_0x28ae('0xcd')](0xc8)[_0x28ae('0x252')](_0x3fe459[_0x28ae('0x269')]);});};const _0x57eae7=_0x413ae8('botium-box-server-endpoints');const _0x1ffedd=(_0x380af6,_0x3902cf,_0x14482a,_0x3b94c6)=>{if(!_0x3902cf[_0x28ae('0x26a')]&&!_0x3902cf['user'])return _0x14482a[_0x28ae('0x249')](0x191);else return _0x3b94c6();};var _0x3a396a=(_0x2ee7e7,_0x5d4a1d)=>{_0x2ee7e7[_0x28ae('0x240')](_0x473d05[_0x28ae('0x251')]({'limit':'50mb','extended':!![]}));_0x2ee7e7['use']([_0x28ae('0x26b'),_0x28ae('0x26c'),_0x28ae('0x26d')],_0x1ffedd[_0x28ae('0x26e')](null,_0x5d4a1d));_0x577ca4(_0x2ee7e7,_0x5d4a1d);_0x478913(_0x2ee7e7,_0x5d4a1d);_0x2f77e2(_0x2ee7e7,_0x5d4a1d);};_0x19ed99['config']();_0x3fe459['printVersion']();const {GraphQLServer,PubSub}=_0x3d4e12;const {Prisma}=_0x18fd94;const {validateToken:validateToken$1}=_0x192b33;const _0x5e0f11=_0x413ae8(_0x28ae('0x26f'));const _0x524300=()=>{return new Prisma({'typeDefs':process[_0x28ae('0x47')][_0x28ae('0x270')]||'src/generated/prisma.graphql','endpoint':process['env']['PRISMA_ENDPOINT'],'debug':process[_0x28ae('0x47')][_0x28ae('0x271')],'secret':process[_0x28ae('0x47')][_0x28ae('0x272')]});};const _0x44813a=(_0x4d60df,_0xd8284a)=>{if(_0x4d60df)console[_0x28ae('0x3d')](_0x4d60df);if(_0xd8284a)console['log'](_0xd8284a);process['exit'](0x1);};let _0x53aeb4={};if(process[_0x28ae('0x47')]['BOTIUMBOX_QUEUE_SETTINGS']){try{_0x53aeb4=JSON[_0x28ae('0x77')](process['env'][_0x28ae('0x273')]);_0x5e0f11(_0x28ae('0x274')+JSON[_0x28ae('0x81')](_0x53aeb4)+'\x27');}catch(_0xe60ef0){_0x44813a(_0x28ae('0x275')+process['env']['BOTIUMBOX_QUEUE_SETTINGS']+'\x22:',_0xe60ef0);}}else{if(process[_0x28ae('0x47')]['BOTIUMBOX_QUEUE_PREFIX']){_0x53aeb4['prefix']=process[_0x28ae('0x47')][_0x28ae('0x276')];}if(process[_0x28ae('0x47')][_0x28ae('0x277')]){_0x53aeb4[_0x28ae('0x278')]=process[_0x28ae('0x47')]['BOTIUMBOX_QUEUE_REDISURL'];}}_0x5e0f11(_0x28ae('0x279')+JSON[_0x28ae('0x81')](_0x53aeb4)+'\x27');const _0x1a355a=_0x2d94a7['createQueue'](_0x53aeb4);_0x1a355a['on']('error',_0x186f44=>{_0x44813a('ERROR\x20connecting\x20to\x20queue\x20\x27'+JSON[_0x28ae('0x81')](_0x53aeb4)+'\x27:',_0x186f44);});process[_0x28ae('0x47')]['BOTIUM_TEMPDIR']=process[_0x28ae('0x47')]['BOTIUM_TEMPDIR']||_0x28ae('0x27a');try{_0x358caf[_0x28ae('0x176')](process[_0x28ae('0x47')][_0x28ae('0x173')]);_0x5e0f11(_0x28ae('0x27b')+process['env'][_0x28ae('0x173')]);}catch(_0x24b849){_0x44813a(_0x28ae('0x27c')+process[_0x28ae('0x47')]['BOTIUM_TEMPDIR']+'\x27:',_0x24b849);}process['env'][_0x28ae('0x5e')]=process[_0x28ae('0x47')]['TESTSETDIR']||'./testsets';try{_0x358caf[_0x28ae('0x176')](process['env'][_0x28ae('0x5e')]);_0x5e0f11('Using\x20TESTSETDIR\x20'+process[_0x28ae('0x47')][_0x28ae('0x5e')]);}catch(_0x2f7911){_0x44813a(_0x28ae('0x27d')+process['env']['TESTSETDIR']+'\x27:',_0x2f7911);}_0x58d381['scanForTestSets'](_0x524300());const _0x4120f0=new PubSub();const _0x327e07=_0x363bb2=>({..._0x363bb2||{},'db':_0x524300(),'queueConnector':_0x1a355a,'pubsub':_0x4120f0});const _0x11a359=new GraphQLServer({'typeDefs':process['env'][_0x28ae('0x27e')]||_0x28ae('0x27f'),'resolvers':_0x13bd1a,'resolverValidationOptions':{'requireResolversForResolveType':![]},'directiveResolvers':_0x3bee70,'context':_0x327e07});const _0xa84a80={'port':process['env'][_0x28ae('0x280')]||0xfa0,'endpoint':_0x28ae('0x281'),'subscriptions':{'path':_0x28ae('0x282'),'onConnect':async(_0x4d9248,_0x5a9e52,_0x33baaa)=>{if(_0x4d9248['Authorization']){_0x5e0f11(_0x28ae('0x283')+_0x4d9248[_0x28ae('0x284')]);const _0xdafcd5=await validateToken$1(_0x4d9248['Authorization'],_0x524300());return{'user':_0xdafcd5};}throw new Error(_0x28ae('0x285'));},'onDisconnect':(_0x48055b,_0x11dc14)=>{}},'playground':'/playground'};_0x1fe881(_0x11a359['express'],_0xa84a80,_0x327e07);_0x3a396a(_0x11a359[_0x28ae('0x1f')],_0x327e07);_0x11a359[_0x28ae('0x108')](_0xa84a80,({port})=>{const _0xd4ec8a=_0x4237c5[_0x28ae('0x4a')](__dirname,_0x28ae('0x286'));_0x11a359[_0x28ae('0x1f')][_0x28ae('0x240')](_0x1952d6());_0x11a359[_0x28ae('0x1f')][_0x28ae('0x240')]('/',_0x1d9fc2[_0x28ae('0x287')](_0xd4ec8a));console[_0x28ae('0x3d')](_0x28ae('0x288')+port+_0x28ae('0x289')+_0xd4ec8a);});const _0x314d44=new _0x3a5433(_0x327e07);_0x314d44[_0x28ae('0x108')]();var _0x26d3bf={};return _0x26d3bf;}));