var _0x5aa6=['hash','password','createUser','sign','No\x20such\x20user\x20found\x20for\x20email:\x20','createAgent','exists','Agent','Agent\x20not\x20found\x20','deleteAgent','{id}','Chatbot','Chatbot\x20not\x20found\x20','updateChatbot','deleteChatbot','botium-box-server-mutation-testsession','Job\x20Creation\x20Job\x20for\x20Test\x20Session\x20','deleteManyTestSessionJobLogs','deleteManyTestSessionJobs','deleteManyTestSessionTestCaseResults','Error\x20deleting\x20test\x20session\x20','TestSet','deleteTestSet','createTestSetScript','TestSetScript','TestSetScript\x20not\x20found\x20','deleteTestSetScript','createTestSetRepository','TestSetRepository\x20not\x20found\x20','updateTestSetRepository','createTestSetFolder','TestSetFolder','deleteTestSetFolder','createTestSession','botium-box-server-mutation-testproject','{\x20id\x20name\x20chatbot\x20{\x20id\x20}\x20testSets\x20{\x20id\x20}\x20deviceSets\x20{\x20id\x20}\x20}','\x20not\x20found','\x20-\x20Manual\x20Test\x20Session','Manual','createTestProject','\x20-\x20Initial\x20Test\x20Session','TestProject','TestProject\x20not\x20found\x20','updateTestProject','deleteTestProject','Error\x20deleting\x20TestProject\x20','botium-box-server-mutation-settings','key','Aa0','createApiKey','ApiKey','ApiKey\x20not\x20found\x20','updateApiKey','deleteApiKey','Error\x20deleting\x20ApiKey\x20','botium-box-server-mutation-deviceset','DeviceSet','DeviceSet\x20not\x20found\x20','{\x20id\x20devices\x20{\x20id\x20}\x20}','deleteManyDeviceDescriptors','devices','deleteDeviceSet','Error\x20deleting\x20DeviceSet\x20','subscription','CREATED','UPDATED','testSessionJob','testSessionJobLog','testSessionTestCaseResult','Query','Mutation','Subscription','getAttachment','base64','writeHead','mimeType','Attachment\x20not\x20found\x20-\x20','sendStatus','Attachment\x20lookup\x20error\x20-\x20','botium-box-server-endpoints-build','body','headers','asyncIterator','TEST_SESSION_PROGRESS','next','status','send','Test\x20Project\x20','BUILDID','\x20-\x20Test\x20Session','isArray','Creating\x20Test\x20Session\x20','WAIT','Test\x20Project\x20start\x20error\x20-\x20','TODO','params','code','nameOrId','/api/triggerbuild/:code','/api/build/:nameOrId','botium-box-server-endpoints','APIKEY','lookupApiKey','inspect','Api\x20Key\x20lookup\x20error\x20-\x20','use','/api/build/*','/api/triggerbuild/*','PRISMA_SCHEMA','src/generated/prisma.graphql','PRISMA_DEBUG','PRISMA_SECRET','BOTIUM_QUEUE_SETTINGS','Got\x20queue\x20settings\x20\x22','ERROR\x20parsing\x20queue\x20settings\x20\x22','exit','BOTIUM_QUEUE_PREFIX','prefix','BOTIUM_QUEUE_REDISURL','redis','createQueue','ERROR\x20connecting\x20to\x20queue\x20\x27','./src/schema.graphql','PORT','/subscriptions','onConnect\x20called','onDisconnect\x20called','start','../../client/build','static','\x20for\x20incoming\x20requests,\x20static\x20files\x20served\x20from\x20','object','undefined','exports','async','watson-developer-cloud/assistant/v1','uuid/v1','botium-core','botium-core/src/scripting/CompilerTxt','node-cache','request-promise-native','moment','bcryptjs','slugify','randomatic','graphql-yoga','lodash','debug','express','path','function','amd','util','prisma-binding','kue','connect-history-api-fallback','main','v1$1','CompilerTxt','nodeCache','requestPromiseNative','jsonwebtoken','graphqlYoga','prismaBinding','connectHistoryApiFallback','hasOwnProperty','default','botium-box-server-agents-utils','query','testSessionTestCaseResultAttachment','now','toISOString','apiKeys','then','length','testSession','{\x20id\x20name\x20batchCount\x20\x0a\x20\x20\x20\x20chatbot\x20{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}\x20\x0a\x20\x20\x20\x20testSets\x20{\x20id\x20name\x20scripts\x20{\x20id\x20script\x20scriptType\x20}\x20repositories\x20{\x20id\x20giturl\x20gitbranch\x20gitdir\x20}\x20folders\x20{\x20id\x20path\x20}\x20}\x0a\x20\x20\x20\x20deviceSets\x20{\x20id\x20name\x20provider\x20devices\x20{\x20id\x20name\x20capabilities\x20}\x20}\x20\x0a\x20\x20\x20\x20testProject\x20{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}\x0a\x20\x20\x20\x20agent\x20{\x20id\x20name\x20}\x20}','data','name','group','reject','agent','type','TEXT','INT','intValue','booleanValue','JSON','parse','keys','forEach','botium-box-server-agents-heartbeat','findAgentFromJobData','mutation','updateAgent','log','botium-box-server-agents-registeragent','{\x20id,\x20name,\x20capabilities\x20{\x20name,\x20stringValue\x20}\x20}','composeBotiumCapabilities','capabilities','Agent\x20registered,\x20config:\x20','stringify','Agent\x20','\x20not\x20configured','catch','findFullTestSession','Test\x20Session\x20','testSessionId','process','startTestSession\x20','\x20queueToSend:\x20','combineBotiumCapabilities','chatbot','testProject','\x20testSessionCaps:\x20','reduce','filter','scriptType','SCRIPTING_TYPE_CONVO','SCRIPTING_FORMAT_TXT','script','\x20testSessionConvos:\x20','testSets','scripts','SCRIPTING_TYPE_UTTERANCES','\x20testSessionUtterances:\x20','repositories','giturl','gitbranch','gitdir','\x20testSessionRepositories:\x20','folders','map','\x20testSessionFolders:\x20','resolve','queueConnector','create','Processing\x20Job\x20#','\x20for\x20Test\x20Session\x20','removeOnComplete','delay','save','PENDING','{\x20id,\x20jobId\x20}','TestSessionJob\x20for\x20TestSession\x20','\x20registered\x20(jobId:\x20','\x20id:\x20','):\x20','deviceSets','provider','SAUCELABS','assign','botium','LOCALSELENIUM','\x20testSessionDevices:\x20','cloneDeep','sourceTag','deviceSetId','deviceName','deviceOptions','{\x20id,\x20testSession\x20{\x20id\x20name\x20}\x20\x20}','\x20not\x20registered\x20as\x20test\x20session\x20job.\x20Skipping.','updateManyTestSessions','RUNNING','Test\x20Session\x20Job\x20','\x20set\x20Test\x20Session\x20RUNNING.','updateManyTestSessionJobs','\x20set\x20Test\x20Session\x20Job\x20RUNNING.','isNumber','\x20set\x20Test\x20Session\x20Job\x20progressPercent\x20','{\x20id\x20}','\x20wrote\x20log:\x20','testcase','source','success','err','messages','filename','testSetFilename','testSet','testSetScriptId','testSetScript','testSetRepositoryId','testSetRepository','testSetFolderId','testSetFolder','deviceSet','attachments','createTestSessionTestCaseResult','TestResult\x20for\x20TestCase\x20','\x20in\x20TestSession\x20','testSessionJobs','READY','Job\x20completed','Job\x20','FAILED','\x20failed:\x20','createTestSessionJobLog','Job\x20failed:\x20','{\x20id\x20name\x20status\x20jobs\x20{\x20id\x20progressPercent\x20}\x20}','pubsub','botium-box-server-agents','ctxFactory','agent.heartbeat','agent.register','box.createprocessingjobs:\x20','startTestSession','error','ERROR\x20connecting\x20to\x20queue:','job\x20enqueue','\x20got\x20queued\x20of\x20type\x20','job\x20error','\x20error\x20','testSessionJobFailed','job\x20complete','\x20completed\x20','testSessionJobCompleted','job\x20progress','\x20progress\x20','testSessionProgress','user','request','get','Authorization','replace','Bearer\x20','verify','env','APP_SECRET','Not\x20authorized','name_ASC','listWorkspaces','workspaces','workspace_id','botium-box-server-livechat','Conversation\x20','\x20not\x20available.','{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}','\x20...','push','publish','MESSAGE_SENTTOBOT','liveChatStartBot(',')\x20container\x20built,\x20now\x20starting','Start',')\x20container\x20started.',')\x20sending\x20convoStep\x20','UserSays','liveChatStopBot(','Stop','Clean',')\x20container\x20stopped.','createTestSet','{\x20id\x20name\x20}','liveChatSaveConvoSteps(',')\x20saving\x20test\x20case\x20for\x20test\x20set\x20','sender','messageText','buttons','BUTTONS\x20','media','MEDIA\x20','mediaUri','join','cards','image',')\x20saved\x20test\x20case\x20for\x20test\x20set\x20','\x20-\x20','createdAt_DESC','testSessions','testSetScripts','Compile','Utterances','header','no\x20script\x20provided','testSetFolders','cache','set','del','delStartWith','indexOf','flush','flushAll','https://saucelabs.com/rest/v1/info/platforms/all','device','api_name','concat','long_name','short_version','iphone','ipad','Safari','Chrome','Android','uniqBy','orderBy','asc','Google\x20Chrome\x20(Headless)','chrome','--headless','--disable-gpu','testProjects','TODAY','startOf','day','subtract','days','LAST2WEEKS','LASTMONTH','chatbots','all','isBefore','add','toDate','{\x20id\x20results\x20{\x20success\x20}\x20}','results','{\x20id\x20results\x20{\x20success\x20testSet\x20{\x20id\x20}\x20}\x20}','UNKNOWN','testCaseLastTotalCount','testCaseLastSuccessCount','testCasePreviousTotalCount','testCasePreviousSuccessCount','testCasePreviousSuccessRate','testCaseLastSuccessRate','testCaseTrend','GOOD','BAD'];(function(_0x4e8f4f,_0x5c434e){var _0x5cf543=function(_0x4774ed){while(--_0x4774ed){_0x4e8f4f['push'](_0x4e8f4f['shift']());}};var _0x5333a6=function(){var _0x15786d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x240991,_0x200144,_0x27de9e,_0x4e034e){_0x4e034e=_0x4e034e||{};var _0x4cea98=_0x200144+'='+_0x27de9e;var _0xd20ff1=0x0;for(var _0xd20ff1=0x0,_0x338f25=_0x240991['length'];_0xd20ff1<_0x338f25;_0xd20ff1++){var _0x598d2d=_0x240991[_0xd20ff1];_0x4cea98+=';\x20'+_0x598d2d;var _0x228da0=_0x240991[_0x598d2d];_0x240991['push'](_0x228da0);_0x338f25=_0x240991['length'];if(_0x228da0!==!![]){_0x4cea98+='='+_0x228da0;}}_0x4e034e['cookie']=_0x4cea98;},'removeCookie':function(){return'dev';},'getCookie':function(_0x491a8a,_0x1e6a64){_0x491a8a=_0x491a8a||function(_0x68feef){return _0x68feef;};var _0x1f0039=_0x491a8a(new RegExp('(?:^|;\x20)'+_0x1e6a64['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x3a97bf=function(_0x492780,_0x2f0638){_0x492780(++_0x2f0638);};_0x3a97bf(_0x5cf543,_0x5c434e);return _0x1f0039?decodeURIComponent(_0x1f0039[0x1]):undefined;}};var _0x551b1d=function(){var _0x1fd32=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1fd32['test'](_0x15786d['removeCookie']['toString']());};_0x15786d['updateCookie']=_0x551b1d;var _0x35e1fc='';var _0x4498e3=_0x15786d['updateCookie']();if(!_0x4498e3){_0x15786d['setCookie'](['*'],'counter',0x1);}else if(_0x4498e3){_0x35e1fc=_0x15786d['getCookie'](null,'counter');}else{_0x15786d['removeCookie']();}};_0x5333a6();}(_0x5aa6,0x83));var _0x945d=function(_0x20475f,_0x29a625){_0x20475f=_0x20475f-0x0;var _0x12b8a5=_0x5aa6[_0x20475f];return _0x12b8a5;};(function(_0x5eea6d,_0x91a5b8){var _0xd28118=function(){var _0x14832d=!![];return function(_0x5194b1,_0x122e62){var _0x5e91ee=_0x14832d?function(){if(_0x122e62){var _0x6e7c01=_0x122e62['apply'](_0x5194b1,arguments);_0x122e62=null;return _0x6e7c01;}}:function(){};_0x14832d=![];return _0x5e91ee;};}();var _0xf923e4=_0xd28118(this,function(){var _0x3de74d=function(){return'\x64\x65\x76';},_0x2b0193=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x388e09=function(){var _0x16180b=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x16180b['\x74\x65\x73\x74'](_0x3de74d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1e379c=function(){var _0x166b42=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x166b42['\x74\x65\x73\x74'](_0x2b0193['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5ed09e=function(_0x3fdc93){var _0x5d0ff9=~-0x1>>0x1+0xff%0x0;if(_0x3fdc93['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5d0ff9)){_0x532c0a(_0x3fdc93);}};var _0x532c0a=function(_0x3f84e9){var _0x231246=~-0x4>>0x1+0xff%0x0;if(_0x3f84e9['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x231246){_0x5ed09e(_0x3f84e9);}};if(!_0x388e09()){if(!_0x1e379c()){_0x5ed09e('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5ed09e('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5ed09e('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0xf923e4();typeof exports===_0x945d('0x0')&&typeof module!==_0x945d('0x1')?module[_0x945d('0x2')]=_0x91a5b8(require(_0x945d('0x3')),require(_0x945d('0x4')),require(_0x945d('0x5')),require(_0x945d('0x6')),require(_0x945d('0x7')),require(_0x945d('0x8')),require(_0x945d('0x9')),require(_0x945d('0xa')),require('jsonwebtoken'),require(_0x945d('0xb')),require(_0x945d('0xc')),require(_0x945d('0xd')),require(_0x945d('0xe')),require(_0x945d('0xf')),require(_0x945d('0x10')),require('util'),require('prisma-binding'),require(_0x945d('0x11')),require(_0x945d('0x12')),require('kue'),require('connect-history-api-fallback')):typeof define===_0x945d('0x13')&&define[_0x945d('0x14')]?define(['async','watson-developer-cloud/assistant/v1',_0x945d('0x5'),'botium-core',_0x945d('0x7'),_0x945d('0x8'),_0x945d('0x9'),_0x945d('0xa'),'jsonwebtoken',_0x945d('0xb'),_0x945d('0xc'),_0x945d('0xd'),_0x945d('0xe'),_0x945d('0xf'),_0x945d('0x10'),_0x945d('0x15'),_0x945d('0x16'),'express',_0x945d('0x12'),_0x945d('0x17'),_0x945d('0x18')],_0x91a5b8):_0x5eea6d[_0x945d('0x19')]=_0x91a5b8(_0x5eea6d[_0x945d('0x3')],_0x5eea6d['v1'],_0x5eea6d[_0x945d('0x1a')],_0x5eea6d['botiumCore'],_0x5eea6d[_0x945d('0x1b')],_0x5eea6d[_0x945d('0x1c')],_0x5eea6d[_0x945d('0x1d')],_0x5eea6d[_0x945d('0xa')],_0x5eea6d[_0x945d('0x1e')],_0x5eea6d[_0x945d('0xb')],_0x5eea6d[_0x945d('0xc')],_0x5eea6d[_0x945d('0xd')],_0x5eea6d[_0x945d('0x1f')],_0x5eea6d[_0x945d('0xf')],_0x5eea6d['debug'],_0x5eea6d[_0x945d('0x15')],_0x5eea6d[_0x945d('0x20')],_0x5eea6d[_0x945d('0x11')],_0x5eea6d[_0x945d('0x12')],_0x5eea6d[_0x945d('0x17')],_0x5eea6d[_0x945d('0x21')]);}(this,function(_0x11a8b5,_0x29b5d5,_0x4e9d58,_0xce0100,_0x5da0c8,_0x3676c6,_0x44a2c2,_0x850a6e,_0x4cb3eb,_0x593096,_0x5d8361,_0x3b2eb0,_0x4294fa,_0x3adf5a,_0x2c203d,_0x58abdb,_0x495d3c,_0x45724e,_0x4bfb29,_0x50742d,_0x32eb2e){'use strict';_0x11a8b5=_0x11a8b5&&_0x11a8b5[_0x945d('0x22')](_0x945d('0x23'))?_0x11a8b5[_0x945d('0x23')]:_0x11a8b5;_0x29b5d5=_0x29b5d5&&_0x29b5d5['hasOwnProperty'](_0x945d('0x23'))?_0x29b5d5[_0x945d('0x23')]:_0x29b5d5;_0x4e9d58=_0x4e9d58&&_0x4e9d58[_0x945d('0x22')](_0x945d('0x23'))?_0x4e9d58['default']:_0x4e9d58;_0xce0100=_0xce0100&&_0xce0100[_0x945d('0x22')](_0x945d('0x23'))?_0xce0100['default']:_0xce0100;_0x5da0c8=_0x5da0c8&&_0x5da0c8['hasOwnProperty'](_0x945d('0x23'))?_0x5da0c8['default']:_0x5da0c8;_0x3676c6=_0x3676c6&&_0x3676c6[_0x945d('0x22')](_0x945d('0x23'))?_0x3676c6[_0x945d('0x23')]:_0x3676c6;_0x44a2c2=_0x44a2c2&&_0x44a2c2[_0x945d('0x22')](_0x945d('0x23'))?_0x44a2c2[_0x945d('0x23')]:_0x44a2c2;_0x850a6e=_0x850a6e&&_0x850a6e[_0x945d('0x22')]('default')?_0x850a6e['default']:_0x850a6e;_0x4cb3eb=_0x4cb3eb&&_0x4cb3eb[_0x945d('0x22')](_0x945d('0x23'))?_0x4cb3eb['default']:_0x4cb3eb;_0x593096=_0x593096&&_0x593096[_0x945d('0x22')](_0x945d('0x23'))?_0x593096[_0x945d('0x23')]:_0x593096;_0x5d8361=_0x5d8361&&_0x5d8361[_0x945d('0x22')](_0x945d('0x23'))?_0x5d8361[_0x945d('0x23')]:_0x5d8361;_0x3b2eb0=_0x3b2eb0&&_0x3b2eb0['hasOwnProperty'](_0x945d('0x23'))?_0x3b2eb0[_0x945d('0x23')]:_0x3b2eb0;_0x4294fa=_0x4294fa&&_0x4294fa['hasOwnProperty'](_0x945d('0x23'))?_0x4294fa[_0x945d('0x23')]:_0x4294fa;_0x3adf5a=_0x3adf5a&&_0x3adf5a['hasOwnProperty'](_0x945d('0x23'))?_0x3adf5a[_0x945d('0x23')]:_0x3adf5a;_0x2c203d=_0x2c203d&&_0x2c203d['hasOwnProperty']('default')?_0x2c203d[_0x945d('0x23')]:_0x2c203d;_0x58abdb=_0x58abdb&&_0x58abdb['hasOwnProperty'](_0x945d('0x23'))?_0x58abdb['default']:_0x58abdb;_0x495d3c=_0x495d3c&&_0x495d3c['hasOwnProperty']('default')?_0x495d3c[_0x945d('0x23')]:_0x495d3c;_0x45724e=_0x45724e&&_0x45724e[_0x945d('0x22')](_0x945d('0x23'))?_0x45724e['default']:_0x45724e;_0x4bfb29=_0x4bfb29&&_0x4bfb29[_0x945d('0x22')](_0x945d('0x23'))?_0x4bfb29[_0x945d('0x23')]:_0x4bfb29;_0x50742d=_0x50742d&&_0x50742d[_0x945d('0x22')]('default')?_0x50742d['default']:_0x50742d;_0x32eb2e=_0x32eb2e&&_0x32eb2e[_0x945d('0x22')](_0x945d('0x23'))?_0x32eb2e['default']:_0x32eb2e;const _0x2d415b=_0x2c203d(_0x945d('0x24'));var _0xc01afe=(_0x53ed28,_0x3a1710)=>{return _0x53ed28[_0x945d('0x25')][_0x945d('0x26')]({'where':{'id':_0x3a1710}},'{\x20id\x20name\x20mimeType\x20base64\x20}');};var _0xa51ac4=(_0x2a1d6e,_0x3d643f)=>{const _0x49f790=new Date(Date[_0x945d('0x27')]())[_0x945d('0x28')]();const _0xfb7484={'where':{'AND':[{'key':_0x3d643f},{'OR':[{'validFrom':null},{'validFrom_lte':_0x49f790}]},{'OR':[{'validTo':null},{'validTo_gte':_0x49f790}]}]}};return _0x2a1d6e[_0x945d('0x25')][_0x945d('0x29')](_0xfb7484,'{\x20id\x20name\x20}')[_0x945d('0x2a')](_0x15ad50=>{if(!_0x15ad50||_0x15ad50[_0x945d('0x2b')]===0x0)return null;return _0x15ad50[0x0];});};var _0x46868c=(_0x196558,_0x59cc21)=>{return _0x196558[_0x945d('0x25')][_0x945d('0x2c')]({'where':{'id':_0x59cc21}},_0x945d('0x2d'));};var _0x228837=(_0x24d2e0,_0xaa8838,_0x1cc6ec)=>{if(!_0xaa8838[_0x945d('0x2e')][_0x945d('0x2f')]||!_0xaa8838[_0x945d('0x2e')][_0x945d('0x30')]){const _0x35daaf='invalid\x20agent\x20event,\x20name\x20or\x20group\x20not\x20given\x20'+_0xaa8838['data'];_0x2d415b(_0x35daaf);return Promise[_0x945d('0x31')](_0x35daaf);}return _0x24d2e0['query'][_0x945d('0x32')]({'where':{'name':_0xaa8838['data']['name']}},_0x1cc6ec);};var _0x59bbf4=_0x95b406=>{return _0x95b406['reduce']((_0x5a3e98,_0x8fbdf7)=>{if(_0x8fbdf7[_0x945d('0x33')]==='STRING'||_0x8fbdf7[_0x945d('0x33')]===_0x945d('0x34'))_0x5a3e98[_0x8fbdf7[_0x945d('0x2f')]]=_0x8fbdf7['stringValue'];if(_0x8fbdf7['type']===_0x945d('0x35'))_0x5a3e98[_0x8fbdf7[_0x945d('0x2f')]]=parseInt(_0x8fbdf7[_0x945d('0x36')]);if(_0x8fbdf7['type']==='BOOLEAN')_0x5a3e98[_0x8fbdf7['name']]=_0x8fbdf7[_0x945d('0x37')]?!![]:![];if(_0x8fbdf7['type']===_0x945d('0x38'))_0x5a3e98[_0x8fbdf7[_0x945d('0x2f')]]=JSON[_0x945d('0x39')](_0x8fbdf7['jsonValue']);return _0x5a3e98;},{});};var _0x1bec57=(..._0x49bb7c)=>{const _0xf9d2f0={};_0x49bb7c&&_0x49bb7c['forEach'](_0x4fcc0a=>{_0x4fcc0a&&Object[_0x945d('0x3a')](_0x4fcc0a)[_0x945d('0x3b')](_0x44c8a1=>{_0xf9d2f0[_0x44c8a1]=_0x4fcc0a[_0x44c8a1];});});return _0xf9d2f0;};var _0x4bcd46={'getAttachment':_0xc01afe,'lookupApiKey':_0xa51ac4,'findFullTestSession':_0x46868c,'findAgentFromJobData':_0x228837,'composeBotiumCapabilities':_0x59bbf4,'combineBotiumCapabilities':_0x1bec57};const _0x36547e=_0x2c203d(_0x945d('0x3c'));var _0x4cf824=(_0x5e4823,_0x18bac9,_0x228059)=>{_0x4bcd46[_0x945d('0x3d')](_0x5e4823['db'],_0x18bac9,'{\x20id,\x20name\x20}')[_0x945d('0x2a')](_0x37e7e3=>{if(_0x37e7e3){_0x5e4823['db'][_0x945d('0x3e')][_0x945d('0x3f')]({'where':{'id':_0x37e7e3['id']},'data':{'heartbeat':new Date(Date[_0x945d('0x27')]())[_0x945d('0x28')]()}})[_0x945d('0x2a')](()=>_0x228059());}else{const _0x4e0a33='Agent\x20'+_0x18bac9['data'][_0x945d('0x2f')]+'\x20not\x20configured';_0x36547e(_0x4e0a33);return _0x228059(_0x4e0a33);}})['catch'](_0x1a4a09=>{console[_0x945d('0x40')](_0x1a4a09);return _0x228059(_0x1a4a09);});};const _0x24f9d6=_0x2c203d(_0x945d('0x41'));var _0x51dbd6=(_0xefc18f,_0x96735a,_0x3c15ce)=>{_0x4bcd46[_0x945d('0x3d')](_0xefc18f['db'],_0x96735a,_0x945d('0x42'))['then'](_0x122805=>{if(_0x122805){const _0x5ab0ea=_0x4bcd46[_0x945d('0x43')](_0x122805[_0x945d('0x44')]);const _0x1df41b={'debug':![],'botium':{'Capabilities':_0x5ab0ea}};_0x24f9d6(_0x945d('0x45')+JSON[_0x945d('0x46')](_0x1df41b));return _0x3c15ce(null,_0x1df41b);}else{const _0x3bfff1=_0x945d('0x47')+_0x96735a[_0x945d('0x2e')][_0x945d('0x2f')]+_0x945d('0x48');_0x24f9d6(_0x3bfff1);return _0x3c15ce(_0x3bfff1);}})[_0x945d('0x49')](_0x59aedd=>{console[_0x945d('0x40')](_0x59aedd);return _0x3c15ce(_0x59aedd);});};const _0x3fff19=_0x2c203d('botium-box-server-agents-testsession');var _0x14bc6c=(_0x2c3476,_0x43f9fe,_0xbdee4d)=>{_0x4bcd46[_0x945d('0x4a')](_0x2c3476['db'],_0x43f9fe['data']['testSessionId'])[_0x945d('0x2a')](_0x35c7d6=>{if(!_0x35c7d6){const _0x530401=_0x945d('0x4b')+_0x43f9fe[_0x945d('0x2e')][_0x945d('0x4c')]+_0x945d('0x48');_0x3fff19(_0x530401);return _0xbdee4d(_0x530401);}_0x3fff19('startTestSession\x20'+_0x35c7d6['id']);const _0xcbbec=_0x35c7d6[_0x945d('0x32')]?'process.'+_0x35c7d6[_0x945d('0x32')][_0x945d('0x2f')]:_0x945d('0x4d');_0x3fff19(_0x945d('0x4e')+_0x35c7d6['id']+_0x945d('0x4f')+_0xcbbec);const _0xf87dc=_0x4bcd46[_0x945d('0x50')]({'PROJECTNAME':_0x35c7d6[_0x945d('0x2f')]},_0x4bcd46['composeBotiumCapabilities'](_0x35c7d6[_0x945d('0x51')][_0x945d('0x44')]),_0x35c7d6['testProject']&&_0x4bcd46['composeBotiumCapabilities'](_0x35c7d6[_0x945d('0x52')][_0x945d('0x44')])||[]);_0x3fff19(_0x945d('0x4e')+_0x35c7d6['id']+_0x945d('0x53')+JSON[_0x945d('0x46')](_0xf87dc));const _0x4e8b45=_0x35c7d6['testSets'][_0x945d('0x54')]((_0x3e4133,_0x341eb3)=>{return[..._0x3e4133,..._0x341eb3['scripts'][_0x945d('0x55')](_0x20d78f=>_0x20d78f[_0x945d('0x56')]===_0x945d('0x57'))['map'](_0x2bc3a7=>{return{'format':_0x945d('0x58'),'content':_0x2bc3a7[_0x945d('0x59')],'sourceTag':{'testSetId':_0x341eb3['id'],'testSetScriptId':_0x2bc3a7['id']}};})];},[]);_0x3fff19(_0x945d('0x4e')+_0x35c7d6['id']+_0x945d('0x5a')+_0x4e8b45[_0x945d('0x2b')]);const _0x4ffce0=_0x35c7d6[_0x945d('0x5b')][_0x945d('0x54')]((_0x264f1,_0x3e901b)=>{return[..._0x264f1,..._0x3e901b[_0x945d('0x5c')][_0x945d('0x55')](_0x574145=>_0x574145['scriptType']===_0x945d('0x5d'))['map'](_0x2224a8=>{return{'format':_0x945d('0x58'),'content':_0x2224a8[_0x945d('0x59')],'sourceTag':{'testSetId':_0x3e901b['id'],'testSetScriptId':_0x2224a8['id']}};})];},[]);_0x3fff19('startTestSession\x20'+_0x35c7d6['id']+_0x945d('0x5e')+_0x4ffce0[_0x945d('0x2b')]);const _0x18d347=_0x35c7d6['testSets']['reduce']((_0x5e3971,_0x1793d6)=>{return[..._0x5e3971,..._0x1793d6[_0x945d('0x5f')]['map'](_0x217f5e=>{return{'giturl':_0x217f5e[_0x945d('0x60')],'gitbranch':_0x217f5e[_0x945d('0x61')],'gitdir':_0x217f5e[_0x945d('0x62')],'sourceTag':{'testSetId':_0x1793d6['id'],'testSetRepositoryId':_0x217f5e['id']}};})];},[]);_0x3fff19(_0x945d('0x4e')+_0x35c7d6['id']+_0x945d('0x63')+_0x18d347);const _0x50210b=_0x35c7d6['testSets']['reduce']((_0x214295,_0x11ff01)=>{return[..._0x214295,..._0x11ff01[_0x945d('0x64')][_0x945d('0x65')](_0x177531=>{return{'path':_0x177531['path'],'sourceTag':{'testSetId':_0x11ff01['id'],'testSetFolderId':_0x177531['id']}};})];},[]);_0x3fff19(_0x945d('0x4e')+_0x35c7d6['id']+_0x945d('0x66')+_0x50210b);const _0x1c642d=(_0x3d15b3,_0xaf9b3d,_0x4a1220,_0x38bb57,_0x212309)=>{const _0x3c2f23=_0x35c7d6['batchCount']||0x1;let _0x458d0a=Promise[_0x945d('0x67')]();for(let _0x2de41e=0x1;_0x2de41e<=_0x3c2f23;_0x2de41e++){const _0xc7aa8b=_0x2de41e;_0x458d0a=_0x458d0a[_0x945d('0x2a')](()=>new Promise(_0x3853ea=>{const _0x2d3870=_0x2c3476[_0x945d('0x68')][_0x945d('0x69')](_0xcbbec,{'title':_0x945d('0x6a')+_0xc7aa8b+'/'+_0x3c2f23+_0x945d('0x6b')+_0x35c7d6['name'],'botium':{'Capabilities':_0x3d15b3},'convos':_0xaf9b3d,'utterances':_0x4a1220,'repositories':_0x38bb57,'folders':_0x212309,'myBatchNum':_0xc7aa8b,'batchCount':_0x3c2f23})[_0x945d('0x6c')](!![])[_0x945d('0x6d')](0x1388)[_0x945d('0x6e')](_0x530401=>{if(_0x530401)return _0x3fff19(_0x530401);const _0x409ba7=_0x2d3870['id'];_0x2c3476['db'][_0x945d('0x3e')]['createTestSessionJob']({'data':{'jobId':_0x409ba7,'status':_0x945d('0x6f'),'progressPercent':0x0,'testSession':{'connect':{'id':_0x35c7d6['id']}}}},_0x945d('0x70'))[_0x945d('0x2a')](_0x5ef058=>{_0x3fff19(_0x945d('0x71')+_0x35c7d6['name']+_0x945d('0x72')+_0x409ba7+_0x945d('0x73')+_0x5ef058['id']+')');_0x3853ea();})['catch'](_0x530401=>{_0x3fff19(_0x945d('0x71')+_0x35c7d6[_0x945d('0x2f')]+'\x20registration\x20failed\x20(jobId:\x20'+_0x409ba7+_0x945d('0x74')+_0x530401);_0x3853ea();});});}));}return _0x458d0a;};if(_0x35c7d6[_0x945d('0x75')]&&_0x35c7d6[_0x945d('0x75')][_0x945d('0x2b')]>0x0){const _0x987a96=_0x35c7d6[_0x945d('0x75')][_0x945d('0x54')]((_0x2e4750,_0x3b93f0)=>{return[..._0x2e4750,..._0x3b93f0['devices'][_0x945d('0x65')](_0x541339=>{if(_0x3b93f0[_0x945d('0x76')]===_0x945d('0x77')){return{'deviceSetId':_0x3b93f0['id'],'deviceName':_0x541339['name'],'deviceOptions':{'desiredCapabilities':Object[_0x945d('0x78')]({},JSON[_0x945d('0x39')](_0x541339[_0x945d('0x44')]),{'name':_0x35c7d6[_0x945d('0x2f')],'username':_0x945d('0x79'),'accessKey':'194c4c3f-3559-4eb6-b02c-b461fe631c41'}),'host':'ondemand.saucelabs.com','port':0x50}};}else if(_0x3b93f0['provider']===_0x945d('0x7a')){return{'deviceSetId':_0x3b93f0['id'],'deviceName':_0x541339['name'],'deviceOptions':{'desiredCapabilities':Object[_0x945d('0x78')]({},JSON[_0x945d('0x39')](_0x541339[_0x945d('0x44')]),{'name':_0x35c7d6['name']})}};}})];},[]);_0x3fff19(_0x945d('0x4e')+_0x35c7d6['id']+_0x945d('0x7b')+JSON[_0x945d('0x46')](_0x987a96,null,0x2));let _0x109ef9=Promise[_0x945d('0x67')]();_0x987a96[_0x945d('0x3b')](_0x4d0af3=>{const _0x2181f5=_0x3bc6ba=>{return _0x3bc6ba&&_0x3bc6ba[_0x945d('0x65')](_0x3731e5=>{const _0x5cc09b=_0x3adf5a[_0x945d('0x7c')](_0x3731e5);_0x5cc09b[_0x945d('0x7d')]=Object[_0x945d('0x78')]({},_0x5cc09b[_0x945d('0x7d')],{'deviceSetId':_0x4d0af3[_0x945d('0x7e')],'deviceName':_0x4d0af3[_0x945d('0x7f')]});return _0x5cc09b;});};const _0x59fc40=_0x2181f5(_0x4e8b45);const _0x199987=_0x2181f5(_0x4ffce0);const _0x3b5493=_0x2181f5(_0x18d347);const _0x411e2f=_0x2181f5(_0x50210b);const _0x10260e=Object[_0x945d('0x78')]({},_0xf87dc,{'WEBDRIVERIO_OPTIONS':_0x4d0af3[_0x945d('0x80')]});_0x109ef9=_0x109ef9[_0x945d('0x2a')](()=>_0x1c642d(_0x10260e,_0x59fc40,_0x199987,_0x3b5493,_0x411e2f));});return _0x109ef9[_0x945d('0x2a')](()=>_0xbdee4d())[_0x945d('0x49')](_0xbdee4d);}else{return _0x1c642d(_0xf87dc,_0x4e8b45,_0x4ffce0,_0x18d347,_0x50210b)[_0x945d('0x2a')](()=>_0xbdee4d())['catch'](_0xbdee4d);}})[_0x945d('0x49')](_0x21e7d1=>{_0x3fff19(_0x21e7d1);_0xbdee4d(_0x21e7d1);});};var _0x12cc27=(_0x315635,_0x3c0748,_0x424a1a,_0x5eb2a4)=>{_0x315635['db'][_0x945d('0x25')]['testSessionJobs']({'where':{'jobId':_0x3c0748}},_0x945d('0x81'))[_0x945d('0x2a')](_0x2ae36b=>{if(!_0x2ae36b||_0x2ae36b[_0x945d('0x2b')]===0x0){return _0x3fff19('Job\x20'+_0x3c0748+_0x945d('0x82'));}const _0x5136f2=_0x2ae36b[0x0];_0x315635['db']['mutation'][_0x945d('0x83')]({'data':{'status':_0x945d('0x84')},'where':{'status':_0x945d('0x6f'),'jobs_some':{'id':_0x5136f2['id']}}})[_0x945d('0x2a')](()=>{_0x3fff19(_0x945d('0x85')+_0x3c0748+'/'+_0x5136f2['id']+_0x945d('0x86'));})[_0x945d('0x49')](_0x584e35=>{_0x3fff19(_0x584e35);});_0x315635['db']['mutation'][_0x945d('0x87')]({'data':{'status':_0x945d('0x84'),'started':new Date(Date[_0x945d('0x27')]())[_0x945d('0x28')]()},'where':{'status':'PENDING','id':_0x5136f2['id']}})[_0x945d('0x2a')](()=>{_0x3fff19(_0x945d('0x85')+_0x3c0748+'/'+_0x5136f2['id']+_0x945d('0x88'));})['catch'](_0x404e16=>{_0x3fff19(_0x404e16);});if(_0x3adf5a[_0x945d('0x89')](_0x424a1a)){_0x315635['db'][_0x945d('0x3e')][_0x945d('0x87')]({'data':{'progressPercent':_0x424a1a},'where':{'status':_0x945d('0x84'),'id':_0x5136f2['id']}})[_0x945d('0x2a')](()=>{_0x3fff19(_0x945d('0x85')+_0x3c0748+'/'+_0x5136f2['id']+_0x945d('0x8a')+_0x424a1a+'.');})['then'](()=>_0x12a751(_0x315635,_0x5136f2[_0x945d('0x2c')]['id']))[_0x945d('0x49')](_0x2c7333=>{_0x3fff19(_0x2c7333);});}if(_0x5eb2a4['log']){_0x315635['db'][_0x945d('0x3e')]['createTestSessionJobLog']({'data':{'log':_0x5eb2a4[_0x945d('0x40')],'testSessionJob':{'connect':{'id':_0x5136f2['id']}}}},_0x945d('0x8b'))[_0x945d('0x2a')](()=>{_0x3fff19(_0x945d('0x85')+_0x3c0748+'/'+_0x5136f2['id']+_0x945d('0x8c')+_0x5eb2a4[_0x945d('0x40')]);})['catch'](_0x5a2df9=>{_0x3fff19(_0x5a2df9);});}if(_0x5eb2a4[_0x945d('0x8d')]){const _0x1b977c={'testcaseName':_0x5eb2a4[_0x945d('0x8d')],'testcaseSource':_0x5eb2a4[_0x945d('0x8e')],'success':_0x5eb2a4[_0x945d('0x8f')],'err':_0x5eb2a4[_0x945d('0x90')],'testSession':{'connect':{'id':_0x5136f2[_0x945d('0x2c')]['id']}}};if(_0x5eb2a4[_0x945d('0x91')]){_0x1b977c[_0x945d('0x91')]=_0x3adf5a['isString'](_0x5eb2a4[_0x945d('0x91')])?_0x5eb2a4['messages']:JSON[_0x945d('0x46')](_0x5eb2a4[_0x945d('0x91')]);}if(_0x5eb2a4[_0x945d('0x7d')]){if(_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x92')])_0x1b977c[_0x945d('0x93')]=_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x92')];if(_0x5eb2a4[_0x945d('0x7d')]['testSetId'])_0x1b977c[_0x945d('0x94')]={'connect':{'id':_0x5eb2a4[_0x945d('0x7d')]['testSetId']}};if(_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x95')])_0x1b977c[_0x945d('0x96')]={'connect':{'id':_0x5eb2a4[_0x945d('0x7d')]['testSetScriptId']}};if(_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x97')])_0x1b977c[_0x945d('0x98')]={'connect':{'id':_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x97')]}};if(_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x99')])_0x1b977c[_0x945d('0x9a')]={'connect':{'id':_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x99')]}};if(_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x7e')])_0x1b977c[_0x945d('0x9b')]={'connect':{'id':_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x7e')]}};if(_0x5eb2a4['sourceTag']['deviceName'])_0x1b977c[_0x945d('0x7f')]=_0x5eb2a4[_0x945d('0x7d')][_0x945d('0x7f')];}if(_0x5eb2a4[_0x945d('0x9c')]){_0x1b977c[_0x945d('0x9c')]={'create':_0x5eb2a4[_0x945d('0x9c')][_0x945d('0x65')](_0x440327=>{return{'name':_0x440327['name'],'mimeType':_0x440327['mimeType'],'base64':_0x440327['base64']};})};}_0x315635['db'][_0x945d('0x3e')][_0x945d('0x9d')]({'data':_0x1b977c},'{\x20id\x20}')[_0x945d('0x2a')](_0x3d027a=>{_0x3fff19(_0x945d('0x9e')+_0x5eb2a4[_0x945d('0x8d')]+_0x945d('0x9f')+_0x5136f2[_0x945d('0x2c')]['name']+_0x945d('0x72')+_0x3c0748+_0x945d('0x73')+_0x3d027a['id']+')');})['catch'](_0x58d068=>{_0x3fff19(_0x58d068);});}})[_0x945d('0x49')](_0x54b3ad=>{_0x3fff19(_0x54b3ad);});};var _0x1713a9=(_0x536f38,_0x331093,_0x3bd209)=>{_0x536f38['db'][_0x945d('0x25')][_0x945d('0xa0')]({'where':{'jobId':_0x331093}},_0x945d('0x81'))['then'](_0x52e20e=>{if(!_0x52e20e||_0x52e20e[_0x945d('0x2b')]===0x0){return _0x3fff19('Job\x20'+_0x331093+_0x945d('0x82'));}const _0x3e6463=_0x52e20e[0x0];_0x536f38['db']['mutation']['updateTestSessionJob']({'data':{'status':_0x945d('0xa1'),'jobId':null,'progressPercent':0x64,'finished':new Date(Date[_0x945d('0x27')]())[_0x945d('0x28')]()},'where':{'id':_0x3e6463['id']}})[_0x945d('0x2a')](()=>{_0x3fff19(_0x945d('0x85')+_0x331093+'/'+_0x3e6463['id']+'\x20completed.');})[_0x945d('0x2a')](()=>{_0x536f38['db'][_0x945d('0x3e')]['createTestSessionJobLog']({'data':{'log':_0x945d('0xa2'),'testSessionJob':{'connect':{'id':_0x3e6463['id']}}}},_0x945d('0x8b'))[_0x945d('0x49')](_0x18b74d=>{_0x3fff19(_0x18b74d);});})[_0x945d('0x2a')](()=>_0x350432(_0x536f38,_0x331093,_0x3e6463['id']))[_0x945d('0x2a')](()=>_0x12a751(_0x536f38,_0x3e6463[_0x945d('0x2c')]['id']))[_0x945d('0x49')](_0x59dae1=>{_0x3fff19(_0x59dae1);});});};var _0x5470bb=(_0x307999,_0x41523d,_0x42ba20)=>{_0x307999['db']['query']['testSessionJobs']({'where':{'jobId':_0x41523d}},_0x945d('0x81'))[_0x945d('0x2a')](_0x2b90fa=>{if(!_0x2b90fa||_0x2b90fa['length']===0x0){return _0x3fff19(_0x945d('0xa3')+_0x41523d+'\x20not\x20registered\x20as\x20test\x20session\x20job.\x20Skipping.');}const _0x8af9ee=_0x2b90fa[0x0];_0x307999['db'][_0x945d('0x3e')]['updateTestSessionJob']({'data':{'status':_0x945d('0xa4'),'jobId':null,'err':_0x42ba20},'where':{'id':_0x8af9ee['id']}})[_0x945d('0x2a')](()=>{_0x3fff19('Test\x20Session\x20Job\x20'+_0x41523d+'/'+_0x8af9ee['id']+_0x945d('0xa5')+_0x42ba20+'.');})[_0x945d('0x2a')](()=>{_0x307999['db']['mutation'][_0x945d('0xa6')]({'data':{'log':_0x945d('0xa7')+_0x42ba20,'testSessionJob':{'connect':{'id':_0x8af9ee['id']}}}},_0x945d('0x8b'))[_0x945d('0x49')](_0x42ba20=>{_0x3fff19(_0x42ba20);});})[_0x945d('0x2a')](()=>_0x350432(_0x307999,_0x41523d,_0x8af9ee['id']))['then'](()=>_0x12a751(_0x307999,_0x8af9ee[_0x945d('0x2c')]['id']))[_0x945d('0x49')](_0x42ba20=>{_0x3fff19(_0x42ba20);});});};const _0x350432=(_0x2a70ab,_0x1493c5,_0x1d67fd)=>{_0x3fff19(_0x945d('0x85')+_0x1493c5+'/'+_0x1d67fd+'\x20testSessionCheckFinished');return _0x2a70ab['db'][_0x945d('0x3e')][_0x945d('0x83')]({'data':{'status':'READY'},'where':{'AND':[{'jobs_some':{'id':_0x1d67fd}},{'results_every':{'success':!![]}},{'jobs_every':{'status':_0x945d('0xa1')}}]}})[_0x945d('0x49')](_0x2c0b9f=>{_0x3fff19(_0x2c0b9f);})['then'](()=>_0x2a70ab['db'][_0x945d('0x3e')][_0x945d('0x83')]({'data':{'status':'FAILED'},'where':{'AND':[{'jobs_some':{'id':_0x1d67fd}},{'jobs_every':{'status_in':[_0x945d('0xa1'),_0x945d('0xa4')]}},{'OR':[{'results_some':{'success':![]}},{'jobs_some':{'status':_0x945d('0xa4')}}]}]}}))[_0x945d('0x49')](_0x5543e5=>{_0x3fff19(_0x5543e5);});};const _0x12a751=(_0x2f5652,_0x4d4f6d)=>{_0x3fff19(_0x945d('0x4b')+_0x4d4f6d+'\x20sendSubscriptionProgress');_0x2f5652['db'][_0x945d('0x25')][_0x945d('0x2c')]({'where':{'id':_0x4d4f6d}},_0x945d('0xa8'))[_0x945d('0x2a')](_0xe6d26f=>{if(!_0xe6d26f)return;_0x2f5652[_0x945d('0xa9')]['publish']('TEST_SESSION_PROGRESS',{'testSessionProgress':_0xe6d26f});});};var _0x25b1ea={'startTestSession':_0x14bc6c,'testSessionProgress':_0x12cc27,'testSessionJobCompleted':_0x1713a9,'testSessionJobFailed':_0x5470bb};const _0x431f9c=_0x2c203d(_0x945d('0xaa'));var _0x213051=class AgentsConnector{constructor(_0x3d030e){this['ctxFactory']=_0x3d030e;}['start'](){const _0x3c380e=this[_0x945d('0xab')]();_0x3c380e['queueConnector'][_0x945d('0x4d')](_0x945d('0xac'),(_0x2d2905,_0x50445c)=>{_0x431f9c('agent.heartbeat:\x20'+JSON['stringify'](_0x2d2905[_0x945d('0x2e')]));_0x4cf824(_0x3c380e,_0x2d2905,_0x50445c);});_0x3c380e[_0x945d('0x68')]['process'](_0x945d('0xad'),(_0x43d707,_0x3eabb3)=>{_0x431f9c('agent.register:\x20'+JSON[_0x945d('0x46')](_0x43d707[_0x945d('0x2e')]));_0x51dbd6(_0x3c380e,_0x43d707,_0x3eabb3);});_0x3c380e[_0x945d('0x68')][_0x945d('0x4d')]('box.createprocessingjobs',(_0x111b1f,_0x4ccd58)=>{_0x431f9c(_0x945d('0xae')+JSON['stringify'](_0x111b1f['data']));_0x25b1ea[_0x945d('0xaf')](_0x3c380e,_0x111b1f,_0x4ccd58);});_0x3c380e[_0x945d('0x68')]['on'](_0x945d('0xb0'),_0x183720=>{_0x431f9c(_0x945d('0xb1'));_0x431f9c(_0x183720);});_0x3c380e['queueConnector']['on'](_0x945d('0xb2'),(_0x2c3083,_0x49f245)=>{_0x431f9c('Job\x20'+_0x2c3083+_0x945d('0xb3')+_0x49f245);});_0x3c380e['queueConnector']['on'](_0x945d('0xb4'),(_0x16fbdc,_0x7fe034)=>{_0x431f9c(_0x945d('0xa3')+_0x16fbdc+_0x945d('0xb5')+_0x7fe034);_0x25b1ea[_0x945d('0xb6')](_0x3c380e,_0x16fbdc,_0x7fe034);});_0x3c380e['queueConnector']['on'](_0x945d('0xb7'),(_0x2afd27,_0x33647a)=>{_0x431f9c(_0x945d('0xa3')+_0x2afd27+_0x945d('0xb8')+JSON[_0x945d('0x46')](_0x33647a));_0x25b1ea[_0x945d('0xb9')](_0x3c380e,_0x2afd27,_0x33647a);});_0x3c380e[_0x945d('0x68')]['on'](_0x945d('0xba'),(_0x4d0664,_0x496667,_0x2f7848)=>{_0x431f9c('Job\x20'+_0x4d0664+_0x945d('0xbb')+_0x496667);_0x25b1ea[_0x945d('0xbc')](_0x3c380e,_0x4d0664,_0x496667,_0x2f7848);});}};const _0x26ad47={'user':async({user:{id}},_0x1f9222,_0x278052,_0x3fc455)=>{return _0x278052['db'][_0x945d('0x25')][_0x945d('0xbd')]({'where':{'id':id}},_0x3fc455);}};var _0x1db33d={'AuthPayload':_0x26ad47};function _0x5eef71(_0x5f2d4d){const _0x5acc5a=_0x5f2d4d[_0x945d('0xbe')][_0x945d('0xbf')](_0x945d('0xc0'));if(_0x5acc5a){const _0x3f2f77=_0x5acc5a[_0x945d('0xc1')](_0x945d('0xc2'),'');const {userId}=_0x4cb3eb[_0x945d('0xc3')](_0x3f2f77,process[_0x945d('0xc4')][_0x945d('0xc5')]);return userId;}throw new _0x31c138();}class _0x31c138 extends Error{constructor(){super(_0x945d('0xc6'));}}var _0x52b99f={'getUserId':_0x5eef71,'AuthError':_0x31c138};const {getUserId:getUserId$1}=_0x52b99f;var _0x399891={'me'(_0x148c64,_0x544d9e,_0x36bd1e,_0x213d4d){const _0x1a8b05=getUserId$1(_0x36bd1e);return _0x36bd1e['db'][_0x945d('0x25')]['user']({'where':{'id':_0x1a8b05}},_0x213d4d);}};var _0x1963a3={'agents'(_0x89d04e,{where,orderBy,skip,first},_0x56fdde,_0xe9318e){orderBy=orderBy||_0x945d('0xc7');skip=skip||0x0;first=first||0xa;return _0x56fdde['db'][_0x945d('0x25')]['agents']({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0xe9318e);},'agent'(_0x522940,{id},_0x223190,_0x688aa6){return _0x223190['db'][_0x945d('0x25')][_0x945d('0x32')]({'where':{'id':id}},_0x688aa6);}};var _0x33b079={'chatbots'(_0x4c7389,{where,orderBy,skip,first},_0x256e2d,_0x57ad5d){orderBy=orderBy||_0x945d('0xc7');skip=skip||0x0;first=first||0xa;return _0x256e2d['db']['query']['chatbots']({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x57ad5d);},'chatbot'(_0x16763f,{id},_0x5c3ad2,_0x2cacf7){return _0x5c3ad2['db'][_0x945d('0x25')][_0x945d('0x51')]({'where':{'id':id}},_0x2cacf7);},'availablewatsonworkspaces'(_0x3cdcfb,{url,version,username,password}){return new Promise((_0x39353d,_0x2141d4)=>{const _0x529465=new _0x29b5d5({'url':url,'version':version,'username':username,'password':password});_0x529465[_0x945d('0xc8')]((_0x2c5863,_0x124271)=>{if(_0x2c5863){_0x2141d4(_0x2c5863);}else{const _0x1227fc=_0x124271[_0x945d('0xc9')]['map'](_0x196efd=>({'name':_0x196efd[_0x945d('0x2f')],'description':_0x196efd['description'],'value':_0x196efd[_0x945d('0xca')]}));_0x39353d(_0x1227fc);}});});}};const _0x54be9f=_0x2c203d(_0x945d('0xcb'));const _0x2a8017=_0xce0100['BotDriver'];const {composeBotiumCapabilities:composeBotiumCapabilities$1}=_0x4bcd46;const _0x1722cd={};const _0x572512={};var _0xc9a23f={'Subscription':{'liveChatConvoStepAdded':{'subscribe':(_0xd01689,{conversationId},{pubsub})=>_0x25197b['asyncIterator'](conversationId)}},'Query':{'liveChatConvoSteps'(_0x114d72,{conversationId}){if(!_0x572512[conversationId])return Promise['reject'](new Error(_0x945d('0xcc')+conversationId+_0x945d('0xcd')));return _0x572512[conversationId];}},'Mutation':{'liveChatStartBot'(_0x54a111,{id},{db,pubsub}){const _0x356768=_0x4e9d58();return db[_0x945d('0x25')][_0x945d('0x51')]({'where':{'id':id}},_0x945d('0xce'))[_0x945d('0x2a')](_0x1bd025=>{_0x54be9f('liveChatStartBot('+_0x356768+')\x20launching\x20bot\x20'+_0x1bd025[_0x945d('0x2f')]+_0x945d('0xcf'));const _0xb9b984=new _0x2a8017(composeBotiumCapabilities$1(_0x1bd025['capabilities']));const _0x59a859=(_0x40bc94,_0x4dbf31)=>{const _0x11de4e=_0x572512[_0x356768][_0x945d('0x2b')];const _0x1ff478=JSON[_0x945d('0x46')](Object[_0x945d('0x78')](_0x4dbf31,{'convoStepIndex':_0x11de4e}));_0x572512[_0x356768][_0x945d('0xd0')](_0x1ff478);_0x25197b[_0x945d('0xd1')](_0x356768,{'liveChatConvoStepAdded':_0x1ff478});};_0xb9b984['on'](_0x945d('0xd2'),_0x59a859);_0xb9b984['on']('MESSAGE_RECEIVEDFROMBOT',_0x59a859);return _0xb9b984['Build']();})[_0x945d('0x2a')](_0x5eb467=>{_0x1722cd[_0x356768]=_0x5eb467;_0x572512[_0x356768]=[];_0x54be9f(_0x945d('0xd3')+_0x356768+_0x945d('0xd4'));return _0x5eb467[_0x945d('0xd5')]();})[_0x945d('0x2a')](()=>{_0x54be9f(_0x945d('0xd3')+_0x356768+_0x945d('0xd6'));return _0x356768;});},'liveChatSendToBot'(_0x532fac,{conversationId,convoStep},{pubsub}){if(!_0x1722cd[conversationId])return Promise[_0x945d('0x31')](new Error('Conversation\x20'+conversationId+_0x945d('0xcd')));_0x54be9f('liveChatSendToBot('+conversationId+_0x945d('0xd7')+convoStep);const _0x404452=_0x1722cd[conversationId];_0x404452[_0x945d('0xd8')](JSON[_0x945d('0x39')](convoStep))[_0x945d('0x49')](_0x1ffaa5=>_0x54be9f(_0x1ffaa5));return!![];},'liveChatStopBot'(_0x571d19,{conversationId}){if(!_0x1722cd[conversationId])return Promise[_0x945d('0x31')](new Error(_0x945d('0xcc')+conversationId+_0x945d('0xcd')));_0x54be9f(_0x945d('0xd9')+conversationId+')\x20stopping\x20container');const _0x3e840f=_0x1722cd[conversationId];return _0x3e840f[_0x945d('0xda')]()[_0x945d('0x2a')](()=>_0x3e840f[_0x945d('0xdb')]())[_0x945d('0x2a')](()=>{_0x54be9f(_0x945d('0xd9')+conversationId+_0x945d('0xdc'));delete _0x1722cd[conversationId];delete _0x572512[conversationId];return!![];});},async 'liveChatSaveConvoSteps'(_0x95792a,{conversationId,testSetId,newTestSetName,testCaseName},_0x3bb640){if(!_0x1722cd[conversationId])return Promise[_0x945d('0x31')](new Error(_0x945d('0xcc')+conversationId+_0x945d('0xcd')));let _0x3f0f70=null;if(newTestSetName){_0x3f0f70=await _0x3bb640['db'][_0x945d('0x3e')][_0x945d('0xdd')]({'data':{'name':newTestSetName}},_0x945d('0xde'));}else{_0x3f0f70=await _0x3bb640['db'][_0x945d('0x25')][_0x945d('0x94')]({'where':{'id':testSetId}},_0x945d('0xde'));}_0x54be9f(_0x945d('0xdf')+conversationId+_0x945d('0xe0')+_0x3f0f70['id']+'/'+_0x3f0f70[_0x945d('0x2f')]);const _0x54e5d4=[testCaseName,''];_0x572512[conversationId]['forEach'](_0x70d521=>{const _0x144f25=JSON[_0x945d('0x39')](_0x70d521);_0x54e5d4[_0x945d('0xd0')]('#'+_0x144f25[_0x945d('0xe1')]);if(_0x144f25[_0x945d('0xe2')]){_0x54e5d4[_0x945d('0xd0')](_0x144f25['messageText']);}if(_0x144f25['buttons']&&_0x144f25[_0x945d('0xe3')][_0x945d('0x2b')]>0x0)_0x54e5d4['push'](_0x945d('0xe4')+_0x144f25[_0x945d('0xe3')]['map'](_0x545ee9=>_0x545ee9['text'])['join']('|'));if(_0x144f25[_0x945d('0xe5')]&&_0x144f25['media'][_0x945d('0x2b')]>0x0)_0x54e5d4['push'](_0x945d('0xe6')+_0x144f25[_0x945d('0xe5')][_0x945d('0x65')](_0x19d56a=>_0x19d56a[_0x945d('0xe7')])[_0x945d('0xe8')]('|'));if(_0x144f25[_0x945d('0xe9')]&&_0x144f25[_0x945d('0xe9')][_0x945d('0x2b')]>0x0){_0x144f25[_0x945d('0xe9')]['forEach'](_0x3aa6ce=>{if(_0x3aa6ce['buttons']&&_0x3aa6ce[_0x945d('0xe3')][_0x945d('0x2b')]>0x0)_0x54e5d4[_0x945d('0xd0')](_0x945d('0xe4')+_0x3aa6ce[_0x945d('0xe3')][_0x945d('0x65')](_0x589da0=>_0x589da0['text'])[_0x945d('0xe8')]('|'));if(_0x3aa6ce[_0x945d('0xea')])_0x54e5d4[_0x945d('0xd0')](_0x945d('0xe6')+_0x3aa6ce[_0x945d('0xea')][_0x945d('0xe7')]);});}_0x54e5d4[_0x945d('0xd0')]('');});let _0xe2921c=await _0x3bb640['db'][_0x945d('0x3e')]['createTestSetScript']({'data':{'name':testCaseName,'script':_0x54e5d4[_0x945d('0xe8')]('\x0a'),'scriptType':_0x945d('0x57'),'testSet':{'connect':{'id':_0x3f0f70['id']}}}},_0x945d('0xde'));_0x54be9f('liveChatSaveConvoSteps('+conversationId+_0x945d('0xeb')+_0x3f0f70['id']+'/'+_0x3f0f70[_0x945d('0x2f')]+_0x945d('0xec')+_0xe2921c['id']+'/'+_0xe2921c[_0x945d('0x2f')]);return _0xe2921c['id'];}}};var _0x52f011={'testsessions'(_0x194cc1,{where,orderBy,skip,first},_0x5c078b,_0x1b61ac){orderBy=orderBy||_0x945d('0xed');skip=skip||0x0;first=first||0xa;return _0x5c078b['db']['query'][_0x945d('0xee')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x1b61ac);},'testsession'(_0x3d756e,{id},_0x3198e9,_0x1fd25d){return _0x3198e9['db'][_0x945d('0x25')][_0x945d('0x2c')]({'where':{'id':id}},_0x1fd25d);}};var _0x451b37={'testsets'(_0x1cbf51,{where,orderBy,skip,first},_0x44c7a0,_0x54dff2){orderBy=orderBy||'name_ASC';skip=skip||0x0;first=first||0xa;return _0x44c7a0['db'][_0x945d('0x25')][_0x945d('0x5b')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x54dff2);},'testset'(_0x2c4455,{id},_0x59471b,_0xec39c6){return _0x59471b['db'][_0x945d('0x25')][_0x945d('0x94')]({'where':{'id':id}},_0xec39c6);},'testsetscripts'(_0x1e9495,{testSetId,skip,first},_0x4a4ae2,_0x2f8c6c){skip=skip||0x0;first=first||0xa;return _0x4a4ae2['db'][_0x945d('0x25')][_0x945d('0xef')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x2f8c6c);},'testsetscript'(_0x3b81ad,{id},_0x1acadb,_0x2ac3bb){return _0x1acadb['db'][_0x945d('0x25')][_0x945d('0x96')]({'where':{'id':id}},_0x2ac3bb);},'validatetestsetscript'(_0x4b875a,{script,scriptType}){const _0x501ba7=new _0x5da0c8({'AddConvos':()=>{},'AddUtterances':()=>{},'IsAsserterValid':()=>!![],'scriptingEvents':{}},{'SCRIPTING_TXT_EOL':'\x0a'});const _0x2904c6=_0x501ba7[_0x945d('0xf0')](script,scriptType);if(_0x2904c6[_0x945d('0x2b')]>0x0){if(scriptType===_0x945d('0x5d')){return Promise[_0x945d('0x67')]({'name':_0x2904c6[0x0]['name'],'description':_0x945d('0xf1'),'script':script,'scriptType':scriptType});}else{return Promise[_0x945d('0x67')]({'name':_0x2904c6[0x0][_0x945d('0xf2')][_0x945d('0x2f')],'description':_0x2904c6[0x0]['header']['description'],'script':script,'scriptType':scriptType});}}else{return Promise['reject'](new Error(_0x945d('0xf3')));}},'testsetrepositories'(_0x1f657c,{testSetId,skip,first},_0x343ed9,_0x1da7f1){skip=skip||0x0;first=first||0xa;return _0x343ed9['db'][_0x945d('0x25')]['testSetRepositories']({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x1da7f1);},'testsetrepository'(_0x3c9234,{id},_0x2674ce,_0x2518b2){return _0x2674ce['db'][_0x945d('0x25')][_0x945d('0x98')]({'where':{'id':id}},_0x2518b2);},'testsetfolders'(_0x1e0110,{testSetId,skip,first},_0x2c7f70,_0x1da3da){skip=skip||0x0;first=first||0xa;return _0x2c7f70['db']['query'][_0x945d('0xf4')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x1da3da);},'testsetfolder'(_0x282b43,{id},_0x497745,_0x27e82c){return _0x497745['db'][_0x945d('0x25')]['testSetFolder']({'where':{'id':id}},_0x27e82c);}};var _0x25ad07=class Cache{constructor(_0x18f7fc){this[_0x945d('0xf5')]=new _0x3676c6({'stdTTL':_0x18f7fc,'checkperiod':_0x18f7fc*0.2,'useClones':![]});}[_0x945d('0xbf')](_0x327b0a,_0x5ea83b){const _0x5e285c=this[_0x945d('0xf5')]['get'](_0x327b0a);if(_0x5e285c){return Promise[_0x945d('0x67')](_0x5e285c);}return _0x5ea83b()['then'](_0x5d2231=>{this[_0x945d('0xf5')][_0x945d('0xf6')](_0x327b0a,_0x5d2231);return _0x5d2231;});}[_0x945d('0xf7')](_0x2650d5){this[_0x945d('0xf5')][_0x945d('0xf7')](_0x2650d5);}[_0x945d('0xf8')](_0x3816a3=''){if(!_0x3816a3){return;}const _0x3cab5a=this['cache']['keys']();for(const _0x25a1f2 of _0x3cab5a){if(_0x25a1f2[_0x945d('0xf9')](_0x3816a3)===0x0){this[_0x945d('0xf7')](_0x25a1f2);}}}[_0x945d('0xfa')](){this[_0x945d('0xf5')][_0x945d('0xfb')]();}};const _0x232735=new _0x25ad07(0x3c*0x3c*0x1);var _0x1d8842={'devicesets'(_0x334210,{where,orderBy,skip,first},_0x1b9c31,_0xc5adf0){orderBy=orderBy||_0x945d('0xc7');skip=skip||0x0;first=first||0xa;return _0x1b9c31['db']['query'][_0x945d('0x75')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0xc5adf0);},'deviceset'(_0x5add9e,{id},_0xbbe52d,_0x3a2fc8){return _0xbbe52d['db'][_0x945d('0x25')][_0x945d('0x9b')]({'where':{'id':id}},_0x3a2fc8);},'availabledevices'(_0x2c0693,{provider}){if(provider===_0x945d('0x77')){return _0x232735[_0x945d('0xbf')]('SAUCELABS',()=>{return _0x44a2c2({'url':_0x945d('0xfc'),'json':!![]})[_0x945d('0x2a')](_0x598368=>{result=_0x598368[_0x945d('0x55')](_0x5241be=>!_0x5241be[_0x945d('0xfd')])['map'](_0x5d3e04=>({'name':_0x5d3e04['long_name']+'\x20'+_0x5d3e04['short_version']+',\x20'+_0x5d3e04['os'],'value':JSON['stringify']({'type':'DESKTOP','capabilities':{'browserName':_0x5d3e04[_0x945d('0xfe')],'platform':_0x5d3e04['os'],'version':_0x5d3e04['short_version']}})}))[_0x945d('0xff')](_0x598368[_0x945d('0x55')](_0x591359=>_0x591359[_0x945d('0xfd')])[_0x945d('0x65')](_0x25fa3e=>({'name':_0x25fa3e[_0x945d('0x100')]+',\x20'+_0x25fa3e[_0x945d('0x101')],'value':JSON[_0x945d('0x46')]({'type':'MOBILEBROWSER','capabilities':{'browserName':[_0x945d('0x102'),_0x945d('0x103')]['indexOf'](_0x25fa3e[_0x945d('0xfe')])>=0x0?_0x945d('0x104'):_0x945d('0x105'),'deviceName':_0x25fa3e[_0x945d('0xfd')],'platformName':['iphone',_0x945d('0x103')][_0x945d('0xf9')](_0x25fa3e[_0x945d('0xfe')])>=0x0?'iOS':_0x945d('0x106'),'platformVersion':_0x25fa3e['short_version']}})})));return _0x3adf5a[_0x945d('0x107')](_0x3adf5a[_0x945d('0x108')](result,_0x945d('0x2f'),_0x945d('0x109')),_0x945d('0x2f'));});});}else if(provider===_0x945d('0x7a')){return _0x232735[_0x945d('0xbf')](_0x945d('0x7a'),()=>{return Promise[_0x945d('0x67')]([{'name':'PhantomJS\x20Virtual\x20Browser','value':JSON['stringify']({'type':'DESKTOP','capabilities':{'browserName':'phantomjs'}})},{'name':_0x945d('0x10a'),'value':JSON['stringify']({'type':'DESKTOP','capabilities':{'browserName':_0x945d('0x10b'),'chromeOptions':{'args':[_0x945d('0x10c'),_0x945d('0x10d')]}}})}]);});}}};var _0x3da5c8={'testprojects'(_0x15f290,{where,orderBy,skip,first},_0x364cd4,_0x6c51c5){orderBy=orderBy||_0x945d('0xc7');skip=skip||0x0;first=first||0xa;return _0x364cd4['db'][_0x945d('0x25')][_0x945d('0x10e')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x6c51c5);},'testproject'(_0x16ee32,{id},_0x542e11,_0x50b0f4){return _0x542e11['db'][_0x945d('0x25')][_0x945d('0x52')]({'where':{'id':id}},_0x50b0f4);}};var _0x895310={'apikeys'(_0x1abc0d,{where,orderBy,skip,first},_0x20c3bb,_0x41c32b){orderBy=orderBy||_0x945d('0xc7');skip=skip||0x0;first=first||0xa;return _0x20c3bb['db'][_0x945d('0x25')][_0x945d('0x29')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x41c32b);},'apikey'(_0x7c810a,{id},_0x3a1c6d,_0x1c61eb){return _0x3a1c6d['db']['query']['apiKey']({'where':{'id':id}},_0x1c61eb);}};const _0x568a30=_0x5b7cb3=>{if(_0x5b7cb3===_0x945d('0x10f')){return _0x850a6e()[_0x945d('0x110')](_0x945d('0x111'));}else if(_0x5b7cb3==='LASTWEEK'){return _0x850a6e()[_0x945d('0x112')](0x6,_0x945d('0x113'))['startOf']('day');}else if(_0x5b7cb3===_0x945d('0x114')){return _0x850a6e()['subtract'](0xd,_0x945d('0x113'))[_0x945d('0x110')](_0x945d('0x111'));}else if(_0x5b7cb3===_0x945d('0x115')){return _0x850a6e()[_0x945d('0x112')](0x1e,_0x945d('0x113'))['startOf']('day');}else if(_0x5b7cb3==='LAST2MONTHS'){return _0x850a6e()['subtract'](0x3c,_0x945d('0x113'))[_0x945d('0x110')](_0x945d('0x111'));}};var _0x4a7b16={'chartFailedCountByChatbotByDay'(_0x2d4f94,{timeFrame},_0x5c3255,_0x18581c){let _0x582f85=_0x568a30(timeFrame||_0x945d('0x114'));const _0x4dc93f=_0x850a6e();return _0x5c3255['db'][_0x945d('0x25')][_0x945d('0x116')]({'orderBy':_0x945d('0xc7')},_0x945d('0xde'))[_0x945d('0x2a')](_0x1d3130=>{return Promise[_0x945d('0x117')](_0x1d3130[_0x945d('0x65')](_0x3ae5a4=>{const _0x137b94=[];for(const _0x3c6779=_0x850a6e(_0x582f85);_0x3c6779[_0x945d('0x118')](_0x4dc93f);_0x3c6779[_0x945d('0x119')](0x1,_0x945d('0x113'))){const _0xd807cb=_0x850a6e(_0x3c6779);const _0x241066=_0x850a6e(_0x3c6779)[_0x945d('0x119')](0x1,_0x945d('0x113'));_0x137b94['push'](_0x5c3255['db']['query'][_0x945d('0xee')]({'where':{'status_in':[_0x945d('0xa1'),_0x945d('0xa4')],'chatbot':{'id':_0x3ae5a4['id']},'createdAt_gte':_0xd807cb[_0x945d('0x11a')](),'createdAt_lte':_0x241066['toDate']()}},_0x945d('0x11b'))[_0x945d('0x2a')](_0x20a7b4=>{if(!_0x20a7b4)return undefined;return Math['ceil'](_0x20a7b4['reduce']((_0x530b0e,_0xe88b2b)=>_0x530b0e+_0xe88b2b[_0x945d('0x11c')][_0x945d('0x55')](_0x326d1f=>!_0x326d1f['success'])[_0x945d('0x2b')],0x0)/_0x20a7b4['length']);}));}return Promise[_0x945d('0x117')](_0x137b94)[_0x945d('0x2a')](_0x2af0b1=>{return{'id':_0x3ae5a4['id'],'name':_0x3ae5a4['name'],'data':_0x2af0b1};});}));})['then'](_0x5e85ae=>{return _0x5e85ae[_0x945d('0x55')](_0x4245f0=>_0x4245f0[_0x945d('0x2e')]&&_0x4245f0[_0x945d('0x2e')]['filter'](_0x5588df=>!isNaN(_0x5588df))[_0x945d('0x2b')]>0x0);});},'chartTestSetResultCount'(_0x1aad58,_0x3168b6,_0x2b1925,_0x1c5fdb){return _0x2b1925['db'][_0x945d('0x25')][_0x945d('0x5b')]({'orderBy':_0x945d('0xc7')},_0x945d('0xde'))[_0x945d('0x2a')](_0x3402b3=>{return Promise[_0x945d('0x117')](_0x3402b3[_0x945d('0x65')](_0x4ca739=>{let _0x22e1ed=_0x568a30(_0x945d('0x115'));const _0x49f936=_0x850a6e();return _0x2b1925['db']['query'][_0x945d('0xee')]({'where':{'status_in':[_0x945d('0xa1'),_0x945d('0xa4')],'testSets_some':{'id':_0x4ca739['id']},'createdAt_gte':_0x22e1ed[_0x945d('0x11a')](),'createdAt_lte':_0x49f936['toDate']()},'orderBy':_0x945d('0xed'),'skip':0x0,'first':0x2},_0x945d('0x11d'))[_0x945d('0x2a')](_0x1eae9a=>{const _0x578e00={'id':_0x4ca739['id'],'name':_0x4ca739[_0x945d('0x2f')],'testCaseLastTotalCount':0x0,'testCaseLastSuccessCount':0x0,'testCaseLastSuccessRate':0x0,'testCasePreviousTotalCount':0x0,'testCasePreviousSuccessCount':0x0,'testCasePreviousSuccessRate':0x0,'testCaseTrend':_0x945d('0x11e')};if(_0x1eae9a&&_0x1eae9a[_0x945d('0x2b')]>0x0){const _0x15a4f0=_0x1eae9a[0x0][_0x945d('0x11c')][_0x945d('0x55')](_0xef93e8=>_0xef93e8[_0x945d('0x94')]&&_0xef93e8[_0x945d('0x94')]['id']===_0x4ca739['id']);_0x578e00[_0x945d('0x11f')]=_0x15a4f0[_0x945d('0x2b')];_0x578e00['testCaseLastSuccessCount']=_0x15a4f0[_0x945d('0x55')](_0x241405=>_0x241405[_0x945d('0x8f')])[_0x945d('0x2b')];_0x578e00['testCaseLastSuccessRate']=_0x578e00['testCaseLastTotalCount']===_0x578e00[_0x945d('0x120')]?0x64:_0x578e00[_0x945d('0x120')]/_0x578e00[_0x945d('0x11f')]*0x64;}if(_0x1eae9a&&_0x1eae9a[_0x945d('0x2b')]>0x1){const _0x4a9bc3=_0x1eae9a[0x1][_0x945d('0x11c')][_0x945d('0x55')](_0x38eb91=>_0x38eb91[_0x945d('0x94')]&&_0x38eb91[_0x945d('0x94')]['id']===_0x4ca739['id']);_0x578e00[_0x945d('0x121')]=_0x4a9bc3['length'];_0x578e00[_0x945d('0x122')]=_0x4a9bc3[_0x945d('0x55')](_0x281927=>_0x281927[_0x945d('0x8f')])[_0x945d('0x2b')];_0x578e00[_0x945d('0x123')]=_0x578e00['testCasePreviousTotalCount']===_0x578e00[_0x945d('0x122')]?0x64:_0x578e00[_0x945d('0x122')]/_0x578e00[_0x945d('0x121')]*0x64;if(_0x578e00[_0x945d('0x124')]>_0x578e00['testCasePreviousSuccessRate'])_0x578e00[_0x945d('0x125')]=_0x945d('0x126');else if(_0x578e00[_0x945d('0x124')]<_0x578e00[_0x945d('0x123')])_0x578e00[_0x945d('0x125')]=_0x945d('0x127');else _0x578e00[_0x945d('0x125')]='CONSTANT';}return _0x578e00;});}));})['then'](_0x55f677=>{return _0x55f677[_0x945d('0x55')](_0x46e2c1=>_0x46e2c1[_0x945d('0x11f')]>0x0);});}};var _0xfd0572={async 'signup'(_0x30b2d9,_0x12eb3f,_0x46de2b,_0x25b501){const _0x15c498=await _0x593096[_0x945d('0x128')](_0x12eb3f[_0x945d('0x129')],0xa);const _0x171295=await _0x46de2b['db']['mutation'][_0x945d('0x12a')]({'data':{..._0x12eb3f,'password':_0x15c498}});return{'token':_0x4cb3eb[_0x945d('0x12b')]({'userId':_0x171295['id']},process[_0x945d('0xc4')][_0x945d('0xc5')]),'user':_0x171295};},async 'login'(_0x49598b,{email,password},_0x29b9e2,_0x5b8931){const _0x51c6c7=await _0x29b9e2['db']['query'][_0x945d('0xbd')]({'where':{'email':email}});if(!_0x51c6c7){throw new Error(_0x945d('0x12c')+email);}const _0x4091ec=await _0x593096['compare'](password,_0x51c6c7[_0x945d('0x129')]);if(!_0x4091ec){throw new Error('Invalid\x20password');}return{'token':_0x4cb3eb[_0x945d('0x12b')]({'userId':_0x51c6c7['id']},process[_0x945d('0xc4')][_0x945d('0xc5')]),'user':_0x51c6c7};}};var _0x29ba5f={async 'createAgent'(_0x3bc8d5,{agent},_0x50a6b3,_0x29a289){return _0x50a6b3['db'][_0x945d('0x3e')][_0x945d('0x12d')]({'data':agent},_0x29a289);},async 'updateAgent'(_0x57c9b2,{id,agent},_0x9440e1,_0x4e3e3d){const _0xf73774=await _0x9440e1['db'][_0x945d('0x12e')][_0x945d('0x12f')]({'id':id});if(!_0xf73774){throw new Error(_0x945d('0x130')+id);}return _0x9440e1['db'][_0x945d('0x3e')][_0x945d('0x3f')]({'where':{'id':id},'data':agent},_0x4e3e3d);},async 'deleteAgent'(_0x245411,{id},_0x40e88c){return new Promise((_0x29aa2e,_0x2dc880)=>{_0x40e88c['db'][_0x945d('0x3e')][_0x945d('0x131')]({'where':{'id':id}},_0x945d('0x132'))[_0x945d('0x2a')](()=>_0x29aa2e(!![]))[_0x945d('0x49')](_0x14d54a=>_0x2dc880(_0x14d54a));});}};var _0x5822cd={async 'createChatbot'(_0x343e36,{chatbot},_0x5cb2a8,_0x28452e){return _0x5cb2a8['db'][_0x945d('0x3e')]['createChatbot']({'data':chatbot},_0x28452e);},async 'updateChatbot'(_0x317ea9,{id,chatbot},_0x285247,_0x315bea){const _0x516059=await _0x285247['db'][_0x945d('0x12e')][_0x945d('0x133')]({'id':id});if(!_0x516059){throw new Error(_0x945d('0x134')+id);}return _0x285247['db'][_0x945d('0x3e')][_0x945d('0x135')]({'where':{'id':id},'data':chatbot},_0x315bea);},async 'deleteChatbot'(_0x10c049,{id},_0x137827){return new Promise((_0x12a8cb,_0x6e51eb)=>{_0x137827['db'][_0x945d('0x3e')][_0x945d('0x136')]({'where':{'id':id}},_0x945d('0x132'))[_0x945d('0x2a')](()=>_0x12a8cb(!![]))[_0x945d('0x49')](_0x1423fd=>_0x6e51eb(_0x1423fd));});}};const _0x58a517=_0x2c203d(_0x945d('0x137'));var _0x189997={async 'createTestSession'(_0x5d4af6,{testSession},_0xca2e71,_0x5f7458){return _0xca2e71['db'][_0x945d('0x3e')]['createTestSession']({'data':testSession},_0x5f7458)[_0x945d('0x2a')](_0x177559=>{return new Promise((_0x2ef23a,_0x558653)=>{_0xca2e71[_0x945d('0x68')][_0x945d('0x69')]('box.createprocessingjobs',{'title':_0x945d('0x138')+testSession[_0x945d('0x2f')],'testSessionId':_0x177559['id']})[_0x945d('0x6c')](!![])[_0x945d('0x6e')](_0xe020ba=>{if(_0xe020ba){return _0x558653(_0xe020ba);}_0x2ef23a(_0x177559);});});});},async 'deleteTestSession'(_0x228d89,{id},_0x14ed6a){return new Promise((_0x3ab124,_0x1a0447)=>{_0x14ed6a['db']['mutation'][_0x945d('0x139')]({'where':{'testSessionJob':{'testSession':{'id':id}}}})[_0x945d('0x2a')](()=>_0x14ed6a['db'][_0x945d('0x3e')][_0x945d('0x13a')]({'where':{'testSession':{'id':id}}}))[_0x945d('0x2a')](()=>_0x14ed6a['db'][_0x945d('0x3e')][_0x945d('0x13b')]({'where':{'testSession':{'id':id}}}))[_0x945d('0x2a')](()=>_0x14ed6a['db'][_0x945d('0x3e')]['deleteTestSession']({'where':{'id':id}},_0x945d('0x132')))[_0x945d('0x2a')](()=>_0x3ab124(!![]))[_0x945d('0x49')](_0x506eed=>{_0x58a517(_0x945d('0x13c')+id+':\x20'+_0x506eed);return _0x1a0447(_0x506eed);});});}};var _0x38ed43={async 'createTestSet'(_0xd247c6,{testSet},_0x17a7bc,_0x554d41){return _0x17a7bc['db'][_0x945d('0x3e')][_0x945d('0xdd')]({'data':testSet},_0x554d41);},async 'updateTestSet'(_0x4595ba,{id,testSet},_0x318068,_0x53bc56){const _0x48ed51=await _0x318068['db']['exists'][_0x945d('0x13d')]({'id':id});if(!_0x48ed51){throw new Error('TestSet\x20not\x20found\x20'+id);}return _0x318068['db'][_0x945d('0x3e')]['updateTestSet']({'where':{'id':id},'data':testSet},_0x53bc56);},async 'deleteTestSet'(_0x59e318,{id},_0x6c01de){return new Promise((_0x246739,_0x1e9e1a)=>{_0x6c01de['db']['mutation'][_0x945d('0x13e')]({'where':{'id':id}},_0x945d('0x132'))['then'](()=>_0x246739(!![]))[_0x945d('0x49')](_0x191dcd=>_0x1e9e1a(_0x191dcd));});},async 'createTestSetScript'(_0x730f13,{testSetScript},_0x5cfeb8,_0x133eef){return _0x5cfeb8['db'][_0x945d('0x3e')][_0x945d('0x13f')]({'data':testSetScript},_0x133eef);},async 'updateTestSetScript'(_0x1f1768,{id,testSetScript},_0x5a4758,_0x473092){const _0x830dc0=await _0x5a4758['db']['exists'][_0x945d('0x140')]({'id':id});if(!_0x830dc0){throw new Error(_0x945d('0x141')+id);}return _0x5a4758['db'][_0x945d('0x3e')]['updateTestSetScript']({'where':{'id':id},'data':testSetScript},_0x473092);},async 'deleteTestSetScript'(_0xd0a85e,{id},_0xa27b73){return new Promise((_0x30781d,_0x2c48f4)=>{_0xa27b73['db'][_0x945d('0x3e')][_0x945d('0x142')]({'where':{'id':id}},_0x945d('0x132'))[_0x945d('0x2a')](()=>_0x30781d(!![]))[_0x945d('0x49')](_0x1563ac=>_0x2c48f4(_0x1563ac));});},async 'createTestSetRepository'(_0x3024cb,{testSetRepository},_0x5f20ee,_0x44187e){return _0x5f20ee['db'][_0x945d('0x3e')][_0x945d('0x143')]({'data':testSetRepository},_0x44187e);},async 'updateTestSetRepository'(_0x368a8d,{id,testSetRepository},_0x242832,_0x2fa44f){const _0x5ac3d0=await _0x242832['db'][_0x945d('0x12e')]['TestSetRepository']({'id':id});if(!_0x5ac3d0){throw new Error(_0x945d('0x144')+id);}return _0x242832['db'][_0x945d('0x3e')][_0x945d('0x145')]({'where':{'id':id},'data':testSetRepository},_0x2fa44f);},async 'deleteTestSetRepository'(_0x4fd88e,{id},_0x2f2cea){return new Promise((_0xbeee9b,_0xa6c382)=>{_0x2f2cea['db'][_0x945d('0x3e')]['deleteTestSetRepository']({'where':{'id':id}},_0x945d('0x132'))[_0x945d('0x2a')](()=>_0xbeee9b(!![]))[_0x945d('0x49')](_0x5edcea=>_0xa6c382(_0x5edcea));});},async 'createTestSetFolder'(_0x483f6e,{testSetFolder},_0x34af9b,_0x3f23ed){return _0x34af9b['db'][_0x945d('0x3e')][_0x945d('0x146')]({'data':testSetFolder},_0x3f23ed);},async 'updateTestSetFolder'(_0x4e530e,{id,testSetFolder},_0x1e7510,_0x3797c2){const _0x2e1912=await _0x1e7510['db'][_0x945d('0x12e')][_0x945d('0x147')]({'id':id});if(!_0x2e1912){throw new Error('TestSetFolder\x20not\x20found\x20'+id);}return _0x1e7510['db']['mutation']['updateTestSetFolder']({'where':{'id':id},'data':testSetFolder},_0x3797c2);},async 'deleteTestSetFolder'(_0x582887,{id},_0x2f2db6){return new Promise((_0x33aa72,_0x4db800)=>{_0x2f2db6['db'][_0x945d('0x3e')][_0x945d('0x148')]({'where':{'id':id}},_0x945d('0x132'))[_0x945d('0x2a')](()=>_0x33aa72(!![]))['catch'](_0x31a349=>_0x4db800(_0x31a349));});}};const _0x5650ba=_0x189997[_0x945d('0x149')];const _0x51c311=_0x2c203d(_0x945d('0x14a'));var _0x570e45={async 'createTestProject'(_0x4953b0,{testProject},_0x1c4277,_0xfa4ea5){return _0x1c4277['db'][_0x945d('0x3e')]['createTestProject']({'data':{...testProject,'code':_0x5d8361(testProject[_0x945d('0x2f')])}},_0xfa4ea5);},async 'startTestProject'(_0x38a623,{id,code},_0xfd1d5d){return _0xfd1d5d['db']['query']['testProject']({'where':{'id':id,'code':code}},_0x945d('0x14b'))[_0x945d('0x2a')](_0x3fa5c1=>{if(!_0x3fa5c1)throw new Error('Test\x20Project\x20'+id+'/'+code+_0x945d('0x14c'));return _0x5650ba(_0x38a623,{'testSession':{'name':_0x3fa5c1[_0x945d('0x2f')]+_0x945d('0x14d'),'status':_0x945d('0x6f'),'tags':{'set':[_0x945d('0x14e')]},'chatbot':{'connect':{'id':_0x3fa5c1[_0x945d('0x51')]['id']}},'testSets':{'connect':_0x3fa5c1[_0x945d('0x5b')]&&_0x3fa5c1[_0x945d('0x5b')][_0x945d('0x65')](_0x136f4e=>{return{'id':_0x136f4e['id']};})},'deviceSets':{'connect':_0x3fa5c1[_0x945d('0x75')]&&_0x3fa5c1[_0x945d('0x75')]['map'](_0x2a5d61=>{return{'id':_0x2a5d61['id']};})},'testProject':{'connect':{'id':_0x3fa5c1['id']}}}},_0xfd1d5d,_0x945d('0x8b'));})[_0x945d('0x2a')](_0x5eb3ba=>_0x5eb3ba['id']);},async 'quickstartTestProject'(_0x11fc2b,{testProject},_0x4e5004){return _0x4e5004['db']['mutation'][_0x945d('0x14f')]({'data':{...testProject,'code':_0x5d8361(testProject[_0x945d('0x2f')])}},_0x945d('0x14b'))[_0x945d('0x2a')](_0x22a105=>{return _0x5650ba(_0x11fc2b,{'testSession':{'name':_0x22a105['name']+_0x945d('0x150'),'status':_0x945d('0x6f'),'tags':{'set':['QuickStart']},'chatbot':{'connect':{'id':_0x22a105[_0x945d('0x51')]['id']}},'testSets':{'connect':_0x22a105['testSets']&&_0x22a105[_0x945d('0x5b')][_0x945d('0x65')](_0x580008=>{return{'id':_0x580008['id']};})},'deviceSets':{'connect':_0x22a105[_0x945d('0x75')]&&_0x22a105[_0x945d('0x75')][_0x945d('0x65')](_0x5696eb=>{return{'id':_0x5696eb['id']};})},'testProject':{'connect':{'id':_0x22a105['id']}}}},_0x4e5004,'{\x20id\x20}');})['then'](_0x4c07d0=>_0x4c07d0['id']);},async 'updateTestProject'(_0x38e55c,{id,testProject},_0x1a142a,_0xf0553e){const _0x3feb5f=await _0x1a142a['db'][_0x945d('0x12e')][_0x945d('0x151')]({'id':id});if(!_0x3feb5f){throw new Error(_0x945d('0x152')+id);}return _0x1a142a['db'][_0x945d('0x3e')][_0x945d('0x153')]({'where':{'id':id},'data':{...testProject,'code':_0x5d8361(testProject[_0x945d('0x2f')])}},_0xf0553e);},async 'deleteTestProject'(_0x24963c,{id},_0x39dfdb){return new Promise((_0x33e770,_0x4ce76a)=>{_0x39dfdb['db'][_0x945d('0x3e')][_0x945d('0x83')]({'data':{'testProject':{'disconnect':!![]}},'where':{'testProject':{'id':id}}})[_0x945d('0x2a')](()=>_0x39dfdb['db']['mutation'][_0x945d('0x154')]({'where':{'id':id}},_0x945d('0x132')))['then'](()=>_0x33e770(!![]))[_0x945d('0x49')](_0x554893=>{_0x51c311(_0x945d('0x155')+id+':\x20'+_0x554893);return _0x4ce76a(_0x554893);});});}};const _0x350cb3=_0x2c203d(_0x945d('0x156'));var _0x75b957={async 'createApiKey'(_0x527ff8,{apiKey},_0x16f632,_0x7d7f03){apiKey[_0x945d('0x157')]=_0x3b2eb0(_0x945d('0x158'),0x14);return _0x16f632['db'][_0x945d('0x3e')][_0x945d('0x159')]({'data':apiKey},_0x7d7f03);},async 'updateApiKey'(_0x16592a,{id,apiKey},_0x56fb1d,_0x52418a){const _0x4c3a0c=await _0x56fb1d['db'][_0x945d('0x12e')][_0x945d('0x15a')]({'id':id});if(!_0x4c3a0c){throw new Error(_0x945d('0x15b')+id);}delete apiKey[_0x945d('0x157')];return _0x56fb1d['db'][_0x945d('0x3e')][_0x945d('0x15c')]({'where':{'id':id},'data':apiKey},_0x52418a);},async 'deleteApiKey'(_0x3d8a18,{id},_0x474ebb){return _0x474ebb['db']['mutation'][_0x945d('0x15d')]({'where':{'id':id}},'{id}')['then'](()=>!![])[_0x945d('0x49')](_0x3b0572=>{_0x350cb3(_0x945d('0x15e')+id+':\x20'+_0x3b0572);throw _0x3b0572;});}};const _0x21eb9f=_0x2c203d(_0x945d('0x15f'));var _0x2f595d={async 'createDeviceSet'(_0x38cb8b,{deviceSet},_0x531fec,_0x48b47d){return _0x531fec['db'][_0x945d('0x3e')]['createDeviceSet']({'data':deviceSet},_0x48b47d);},async 'updateDeviceSet'(_0x28399f,{id,deviceSet},_0x26363b,_0x1065da){const _0xa41d5d=await _0x26363b['db'][_0x945d('0x12e')][_0x945d('0x160')]({'id':id});if(!_0xa41d5d){throw new Error(_0x945d('0x161')+id);}return _0x26363b['db'][_0x945d('0x3e')]['updateDeviceSet']({'where':{'id':id},'data':deviceSet},_0x1065da);},async 'deleteDeviceSet'(_0x45f026,{id},_0x1f48c0){return new Promise((_0x42e666,_0x1ec5a0)=>{_0x1f48c0['db'][_0x945d('0x25')][_0x945d('0x9b')]({'where':{'id':id}},_0x945d('0x162'))['then'](_0x59f2c6=>{if(!_0x59f2c6)throw new Error(_0x945d('0x161')+id);return _0x1f48c0['db'][_0x945d('0x3e')][_0x945d('0x163')]({'where':{'id_in':_0x59f2c6[_0x945d('0x164')][_0x945d('0x65')](_0x2f4f61=>_0x2f4f61['id'])}});})[_0x945d('0x2a')](()=>_0x1f48c0['db'][_0x945d('0x3e')][_0x945d('0x165')]({'where':{'id':id}},_0x945d('0x132')))['then'](()=>_0x42e666(!![]))[_0x945d('0x49')](_0x44b1bc=>{_0x21eb9f(_0x945d('0x166')+id+':\x20'+_0x44b1bc);return _0x1ec5a0(_0x44b1bc);});});}};const _0x280634={};var _0x5b8260=_0x280634;const {withFilter}=_0x4294fa;var _0x199cdf={'testSessionProgress':{'subscribe':withFilter((_0x10bdc6,{testSessionId},{pubsub})=>_0x25197b['asyncIterator']('TEST_SESSION_PROGRESS'),(_0x14278c,{testSessionId})=>{return _0x14278c[_0x945d('0xbc')]['id']===testSessionId;})},'newTestSession':{'subscribe':(_0x9ff8bd,_0x1cfdc9,_0x1b8127,_0x553372)=>{return _0x1b8127['db'][_0x945d('0x167')][_0x945d('0x2c')]({'where':{'mutation_in':[_0x945d('0x168')]}},_0x553372);}},'changeTestSession':{'subscribe':(_0x4efd2b,{ids},_0x236670,_0x2fef9b)=>{return _0x236670['db'][_0x945d('0x167')][_0x945d('0x2c')]({'where':{'mutation_in':[_0x945d('0x169')],'node':{'id_in':ids}}},_0x2fef9b);}},'changeTestSessionJobs':{'subscribe':(_0x21b1a0,{testSessionIds},_0xa7b4cd,_0xc12b98)=>{return _0xa7b4cd['db'][_0x945d('0x167')][_0x945d('0x16a')]({'where':{'mutation_in':[_0x945d('0x169')],'node':{'testSession':{'id_in':testSessionIds}}}},_0xc12b98);}},'newTestSessionJobLogs':{'subscribe':(_0x287a43,{testSessionJobId},_0x181c9a,_0x5a2d1a)=>{return _0x181c9a['db'][_0x945d('0x167')][_0x945d('0x16b')]({'where':{'mutation_in':[_0x945d('0x168')],'node':{'testSessionJob':{'id':testSessionJobId}}}},_0x5a2d1a);}},'newTestSessionTestCaseResults':{'subscribe':(_0x74ca57,{testSessionIds},_0x364a04,_0x32dd8d)=>{return _0x364a04['db'][_0x945d('0x167')][_0x945d('0x16c')]({'where':{'mutation_in':[_0x945d('0x168')],'node':{'testSession':{'id_in':testSessionIds}}}},_0x32dd8d);}}};const {AuthPayload:AuthPayload$1}=_0x1db33d;var _0x19ea58={'Query':{..._0x399891,..._0x1963a3,..._0x33b079,..._0xc9a23f[_0x945d('0x16d')],..._0x52f011,..._0x451b37,..._0x1d8842,..._0x3da5c8,..._0x895310,..._0x4a7b16},'Mutation':{..._0xfd0572,..._0x29ba5f,..._0x5822cd,..._0xc9a23f[_0x945d('0x16e')],..._0x189997,..._0x38ed43,..._0x570e45,..._0x75b957,..._0x2f595d},'Subscription':{..._0x5b8260,..._0xc9a23f[_0x945d('0x16f')],..._0x199cdf},'AuthPayload':AuthPayload$1};const _0x416281=_0x2c203d('botium-box-server-endpoints-attachments');var _0x577018=(_0x16577c,_0x2a938a)=>{_0x16577c[_0x945d('0xbf')]('/api/attachment/:id',(_0x20899c,_0x4f0cba)=>{const _0x557002=_0x20899c['params']['id'];const _0x4d94a8=_0x2a938a(_0x20899c);_0x4bcd46[_0x945d('0x170')](_0x4d94a8['db'],_0x557002)[_0x945d('0x2a')](_0x577018=>{if(_0x577018){const _0x5dd87f=new Buffer(_0x577018[_0x945d('0x171')],_0x945d('0x171'));_0x4f0cba[_0x945d('0x172')](0xc8,{'Content-Type':_0x577018[_0x945d('0x173')],'Content-Length':_0x5dd87f['length']});_0x4f0cba['end'](_0x5dd87f);}else{_0x416281(_0x945d('0x174')+_0x557002);_0x4f0cba[_0x945d('0x175')](0x194);}})[_0x945d('0x49')](_0x52baab=>{_0x416281(_0x945d('0x176')+_0x557002+_0x945d('0xec')+_0x52baab);_0x4f0cba[_0x945d('0x175')](0x194);});});};const _0x239195=_0x2c203d(_0x945d('0x177'));const _0x49ac4f=_0x189997['createTestSession'];const _0x9537f2=(_0x1d8041,_0x7b6978)=>{return _0x1d8041[_0x945d('0x25')][_0x7b6978]||_0x1d8041[_0x945d('0x178')]&&_0x1d8041[_0x945d('0x178')][_0x7b6978]||_0x1d8041[_0x945d('0x179')][_0x7b6978];};const _0x7f1535=(_0x49aed0,_0x33e61e,_0xd79918)=>{const _0x4a853a=_0x33e61e[_0x945d('0xa9')][_0x945d('0x17a')](_0x945d('0x17b'));(async function loop(){while(!![]){const {value}=await _0x4a853a[_0x945d('0x17c')]();if(value[_0x945d('0xbc')]&&value[_0x945d('0xbc')][_0x945d('0x17d')]&&value[_0x945d('0xbc')]['id']===_0x49aed0){_0x239195('Test\x20Project\x20'+_0x49aed0+'\x20got\x20status:\x20'+value[_0x945d('0xbc')]['status']);if(value['testSessionProgress'][_0x945d('0x17d')]===_0x945d('0xa1')){_0xd79918['status'](0xc8)[_0x945d('0x17e')]({'testSessionId':value['testSessionProgress']['id'],'status':value[_0x945d('0xbc')][_0x945d('0x17d')]});return;}if(value[_0x945d('0xbc')][_0x945d('0x17d')]===_0x945d('0xa4')){_0xd79918[_0x945d('0x17d')](0x1f4)[_0x945d('0x17e')]({'testSessionId':value[_0x945d('0xbc')]['id'],'status':value['testSessionProgress'][_0x945d('0x17d')]});return;}}}}());};const _0x23a8be=({ctxFactory,testProjectCode,req,res})=>{const _0x1b0c2c=_0x488b3e(req);_0x1b0c2c['db'][_0x945d('0x25')][_0x945d('0x52')]({'where':{'code':testProjectCode}},_0x945d('0x14b'))[_0x945d('0x2a')](_0x26e824=>{if(!_0x26e824){throw new Error(_0x945d('0x17f')+testProjectCode+_0x945d('0x14c'));}const _0x524233=_0x9537f2(req,_0x945d('0x180'));const _0x5aa85f=_0x9537f2(req,'BUILDCOMMENT');const _0x155478=_0x9537f2(req,'TAG');const _0x479b29={'name':_0x524233||_0x26e824['name']+_0x945d('0x181'),'description':_0x5aa85f,'status':_0x945d('0x6f'),'tags':{'set':_0x155478?_0x3adf5a[_0x945d('0x182')](_0x155478)?_0x155478:[_0x155478]:[]},'chatbot':{'connect':{'id':_0x26e824[_0x945d('0x51')]['id']}},'testSets':{'connect':_0x26e824[_0x945d('0x5b')]&&_0x26e824[_0x945d('0x5b')]['map'](_0x5435d3=>{return{'id':_0x5435d3['id']};})},'deviceSets':{'connect':_0x26e824[_0x945d('0x75')]&&_0x26e824[_0x945d('0x75')][_0x945d('0x65')](_0x462fd9=>{return{'id':_0x462fd9['id']};})},'testProject':{'connect':{'id':_0x26e824['id']}}};_0x239195(_0x945d('0x183')+JSON[_0x945d('0x46')](_0x479b29,null,0x2));return _0x49ac4f(null,{'testSession':_0x479b29},_0x1b0c2c,_0x945d('0x8b'));})[_0x945d('0x2a')](_0x5a72e0=>{const _0x454e56=_0x9537f2(req,_0x945d('0x184'));if(_0x454e56==='1'){_0x7f1535(_0x5a72e0['id'],_0x1b0c2c,res);}else{res[_0x945d('0x17d')](0xc8)[_0x945d('0x17e')]({'testSessionId':_0x5a72e0['id']});}})[_0x945d('0x49')](_0x276922=>{_0x239195(_0x945d('0x185')+testProjectCode+_0x945d('0xec')+_0x276922);res['sendStatus'](0x194);});};const _0x5198ed=({ctxFactory,nameOrId,req,res})=>{const _0xe7c475=_0x488b3e(req);res[_0x945d('0x17e')]({'status':_0x945d('0x186')});};var _0x2e8196=(_0x3bca9f,_0x2f60f7)=>{const _0x51af19=(_0x504ccf,_0x5c8eec)=>{_0x23a8be({'testProjectCode':_0x504ccf[_0x945d('0x187')][_0x945d('0x188')],'ctxFactory':_0x2f60f7,'req':_0x504ccf,'res':_0x5c8eec});};const _0x537ff1=(_0x40ca62,_0x12dcee)=>{_0x5198ed({'nameOrId':_0x40ca62[_0x945d('0x187')][_0x945d('0x189')],'ctxFactory':_0x2f60f7,'req':_0x40ca62,'res':_0x12dcee});};_0x3bca9f['post'](_0x945d('0x18a'),_0x51af19);_0x3bca9f['get'](_0x945d('0x18a'),_0x51af19);_0x3bca9f['get'](_0x945d('0x18b'),_0x537ff1);};const _0xb1467=_0x2c203d(_0x945d('0x18c'));const _0x3f2ea5=(_0x147871,_0x205a8d,_0x5b7c89,_0x1bdab0)=>{const _0x4aae21=_0x205a8d['query'][_0x945d('0x18d')]||_0x205a8d[_0x945d('0x178')]&&_0x205a8d[_0x945d('0x178')][_0x945d('0x18d')]||_0x205a8d[_0x945d('0x179')][_0x945d('0x18d')];if(!_0x4aae21)return _0x5b7c89[_0x945d('0x175')](0x191);const _0x5f2b96=_0x147871(_0x205a8d);_0x4bcd46[_0x945d('0x18e')](_0x5f2b96['db'],_0x4aae21)[_0x945d('0x2a')](_0x1fea10=>{if(_0x1fea10){_0xb1467('Api\x20Key\x20found\x20-\x20'+_0x58abdb[_0x945d('0x18f')](_0x1fea10));_0x1bdab0();}else{_0xb1467('Api\x20Key\x20not\x20found\x20-\x20'+_0x4aae21);_0x5b7c89[_0x945d('0x175')](0x191);}})[_0x945d('0x49')](_0x31aee5=>{_0xb1467(_0x945d('0x190')+_0x4aae21+_0x945d('0xec')+_0x31aee5);_0x5b7c89[_0x945d('0x175')](0x191);});};var _0x4fc2ae=(_0x36fef2,_0x499ab5)=>{_0x36fef2[_0x945d('0x191')]([_0x945d('0x192'),_0x945d('0x193')],_0x3f2ea5['bind'](null,_0x499ab5));_0x2e8196(_0x36fef2,_0x499ab5);_0x577018(_0x36fef2,_0x499ab5);};const {GraphQLServer,PubSub}=_0x4294fa;const {Prisma}=_0x495d3c;const _0x34f9b2=_0x2c203d('botium-box-server-index');const _0x3d9fcd=()=>{return new Prisma({'typeDefs':process[_0x945d('0xc4')][_0x945d('0x194')]||_0x945d('0x195'),'endpoint':process['env']['PRISMA_ENDPOINT'],'debug':process[_0x945d('0xc4')][_0x945d('0x196')],'secret':process['env'][_0x945d('0x197')]});};let _0x5dfeb9={};if(process[_0x945d('0xc4')][_0x945d('0x198')]){try{_0x5dfeb9=JSON[_0x945d('0x39')](process[_0x945d('0xc4')][_0x945d('0x198')]);_0x34f9b2(_0x945d('0x199')+JSON[_0x945d('0x46')](_0x5dfeb9)+'\x22');}catch(_0x404304){console[_0x945d('0x40')](_0x945d('0x19a')+process[_0x945d('0xc4')]['BOTIUM_QUEUE_SETTINGS']+'\x22:');console[_0x945d('0x40')](_0x404304);process[_0x945d('0x19b')](0x1);}}else{if(process[_0x945d('0xc4')][_0x945d('0x19c')]){_0x5dfeb9[_0x945d('0x19d')]=process[_0x945d('0xc4')]['BOTIUM_QUEUE_PREFIX'];}if(process[_0x945d('0xc4')][_0x945d('0x19e')]){_0x5dfeb9[_0x945d('0x19f')]=process['env'][_0x945d('0x19e')];}}_0x34f9b2('connecting\x20to\x20Botium\x20queue\x20\x27'+JSON[_0x945d('0x46')](_0x5dfeb9)+'\x27');const _0x35d3ce=_0x50742d[_0x945d('0x1a0')](_0x5dfeb9);_0x35d3ce['on'](_0x945d('0xb0'),_0x25d0e8=>{console['log'](_0x945d('0x1a1')+JSON[_0x945d('0x46')](_0x5dfeb9)+'\x27:');console[_0x945d('0x40')](_0x25d0e8);process[_0x945d('0x19b')](0x1);});const _0x25197b=new PubSub();const _0x488b3e=_0x54f25c=>({..._0x54f25c||{},'db':_0x3d9fcd(),'queueConnector':_0x35d3ce,'pubsub':_0x25197b});const _0x5640d5=new GraphQLServer({'typeDefs':process[_0x945d('0xc4')]['GRAPHQL_SCHEMA']||_0x945d('0x1a2'),'resolvers':_0x19ea58,'resolverValidationOptions':{'requireResolversForResolveType':![]},'context':_0x488b3e});const _0x13a783={'port':process[_0x945d('0xc4')][_0x945d('0x1a3')]||0xfa0,'endpoint':'/graphql','subscriptions':{'path':_0x945d('0x1a4'),'onConnect':(_0x58d41a,_0x27d0aa,_0x3e5fe4)=>{_0x34f9b2(_0x945d('0x1a5'));},'onDisconnect':(_0x506473,_0x3e57de)=>{_0x34f9b2(_0x945d('0x1a6'));}},'playground':'/playground'};_0x5640d5[_0x945d('0x1a7')](_0x13a783,({port})=>{_0x4fc2ae(_0x5640d5[_0x945d('0x11')],_0x488b3e);const _0x1ebdd9=_0x4bfb29[_0x945d('0xe8')](__dirname,_0x945d('0x1a8'));_0x5640d5[_0x945d('0x11')][_0x945d('0x191')](_0x32eb2e());_0x5640d5[_0x945d('0x11')][_0x945d('0x191')]('/',_0x45724e[_0x945d('0x1a9')](_0x1ebdd9));console[_0x945d('0x40')]('Server\x20started,\x20listening\x20on\x20port\x20'+port+_0x945d('0x1aa')+_0x1ebdd9);});const _0x2e70dc=new _0x213051(_0x488b3e);_0x2e70dc[_0x945d('0x1a7')]();var _0x42a966={};return _0x42a966;}));