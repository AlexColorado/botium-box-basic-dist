var _0x338e=['scripts','filter','scriptType','map','SCRIPTING_FORMAT_TXT','\x20testSessionConvos:\x20','testSets','SCRIPTING_TYPE_UTTERANCES','script','\x20testSessionUtterances:\x20','repositories','gitbranch','gitdir','\x20testSessionRepositories:\x20','folders','\x20testSessionFolders:\x20','resolve','queueConnector','Processing\x20Job\x20#','\x20for\x20Test\x20Session\x20','removeOnComplete','save','PENDING','TestSessionJob\x20for\x20TestSession\x20','):\x20','deviceSets','devices','provider','SAUCELABS','assign','194c4c3f-3559-4eb6-b02c-b461fe631c41','ondemand.saucelabs.com','LOCALSELENIUM','cloneDeep','sourceTag','deviceName','{\x20id,\x20testSession\x20{\x20id\x20name\x20}\x20\x20}','Job\x20','\x20not\x20registered\x20as\x20test\x20session\x20job.\x20Skipping.','updateManyTestSessions','Test\x20Session\x20Job\x20','\x20set\x20Test\x20Session\x20RUNNING.','updateManyTestSessionJobs','RUNNING','\x20set\x20Test\x20Session\x20Job\x20RUNNING.','isNumber','testSession','createTestSessionJobLog','{\x20id\x20}','\x20wrote\x20log:\x20','testcase','source','err','messages','filename','testSetFilename','testSetId','testSet','testSetScript','testSetScriptId','testSetRepositoryId','testSetFolder','deviceSet','deviceSetId','attachments','mimeType','base64','createTestSessionTestCaseResult','TestResult\x20for\x20TestCase\x20','\x20in\x20TestSession\x20','\x20registered\x20(jobId:\x20','\x20id:\x20','READY','Job\x20completed','updateTestSessionJob','FAILED','\x20failed:\x20','Job\x20failed:\x20','\x20testSessionCheckFinished','{\x20id\x20name\x20status\x20jobs\x20{\x20id\x20progressPercent\x20}\x20}','pubsub','publish','TEST_SESSION_PROGRESS','botium-box-server-agents','ctxFactory','start','agent.heartbeat','agent.heartbeat:\x20','agent.register','agent.register:\x20','box.createprocessingjobs','startTestSession','error','ERROR\x20connecting\x20to\x20queue:','\x20got\x20queued\x20of\x20type\x20','job\x20error','\x20error\x20','job\x20complete','\x20completed\x20','testSessionJobCompleted','job\x20progress','\x20progress\x20','request','get','replace','Bearer\x20','verify','env','APP_SECRET','Not\x20authorized','user','name_ASC','agents','chatbot','listWorkspaces','workspaces','description','workspace_id','botium-box-server-livechat','BotDriver','asyncIterator','\x20not\x20available.','{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}','push','MESSAGE_SENTTOBOT','MESSAGE_RECEIVEDFROMBOT','Build',')\x20container\x20built,\x20now\x20starting','Start','liveChatStartBot(',')\x20container\x20started.','Conversation\x20','liveChatSendToBot(',')\x20sending\x20convoStep\x20','UserSays','liveChatStopBot(','Clean',')\x20container\x20stopped.','liveChatSaveConvoSteps(',')\x20saving\x20test\x20case\x20for\x20test\x20set\x20','sender','messageText','text','join','media','MEDIA\x20','mediaUri','cards','buttons','BUTTONS\x20','image','SCRIPTING_TYPE_CONVO','\x20-\x20','createdAt_DESC','testSessions','testSetScripts','Compile','Utterances','header','no\x20script\x20provided','testSetRepositories','testSetRepository','testSetFolders','cache','del','delStartWith','indexOf','flush','flushAll','https://saucelabs.com/rest/v1/info/platforms/all','device','long_name','short_version','DESKTOP','concat','MOBILEBROWSER','iphone','ipad','api_name','Safari','iOS','uniqBy','orderBy','asc','PhantomJS\x20Virtual\x20Browser','Google\x20Chrome\x20(Headless)','chrome','--headless','testProjects','apiKey','TODAY','startOf','day','days','LAST2WEEKS','LASTMONTH','subtract','LAST2MONTHS','chatbots','isBefore','add','toDate','{\x20id\x20results\x20{\x20success\x20}\x20}','ceil','results','success','all','{\x20id\x20results\x20{\x20success\x20testSet\x20{\x20id\x20}\x20}\x20}','UNKNOWN','testCaseLastTotalCount','testCaseLastSuccessCount','testCaseLastSuccessRate','testCasePreviousTotalCount','testCasePreviousSuccessCount','testCasePreviousSuccessRate','testCaseTrend','GOOD','BAD','CONSTANT','hash','password','createUser','sign','compare','Invalid\x20password','exists','Agent\x20not\x20found\x20','updateAgent','deleteAgent','{id}','createChatbot','Chatbot','Chatbot\x20not\x20found\x20','updateChatbot','botium-box-server-mutation-testsession','createTestSession','deleteManyTestSessionJobLogs','deleteManyTestSessionTestCaseResults','Error\x20deleting\x20test\x20session\x20','TestSet','updateTestSet','createTestSetScript','TestSetScript','updateTestSetScript','deleteTestSetScript','createTestSetRepository','TestSetRepository','TestSetRepository\x20not\x20found\x20','updateTestSetRepository','createTestSetFolder','TestSetFolder','TestSetFolder\x20not\x20found\x20','deleteTestSetFolder','botium-box-server-mutation-testproject','createTestProject','{\x20id\x20name\x20chatbot\x20{\x20id\x20}\x20testSets\x20{\x20id\x20}\x20deviceSets\x20{\x20id\x20}\x20}','Test\x20Project\x20','\x20not\x20found','\x20-\x20Manual\x20Test\x20Session','TestProject','updateTestProject','deleteTestProject','Error\x20deleting\x20TestProject\x20','botium-box-server-mutation-settings','key','Aa0','createApiKey','ApiKey\x20not\x20found\x20','deleteApiKey','Error\x20deleting\x20ApiKey\x20','botium-box-server-mutation-deviceset','createDeviceSet','updateDeviceSet','{\x20id\x20devices\x20{\x20id\x20}\x20}','deleteManyDeviceDescriptors','Error\x20deleting\x20DeviceSet\x20','testSessionProgress','CREATED','subscription','testSessionJob','testSessionJobLog','testSessionTestCaseResult','Query','Subscription','botium-box-server-endpoints-attachments','/api/attachment/:id','params','getAttachment','writeHead','end','sendStatus','Attachment\x20lookup\x20error\x20-\x20','botium-box-server-endpoints-build','body','headers','status','\x20got\x20status:\x20','send','BUILDID','BUILDCOMMENT','TAG','\x20-\x20Test\x20Session','isArray','Creating\x20Test\x20Session\x20','WAIT','Test\x20Project\x20start\x20error\x20-\x20','TODO','code','post','/api/triggerbuild/:code','APIKEY','lookupApiKey','inspect','Api\x20Key\x20not\x20found\x20-\x20','Api\x20Key\x20lookup\x20error\x20-\x20','use','/api/build/*','/api/triggerbuild/*','bind','botium-box-server-index','PRISMA_DEBUG','BOTIUM_QUEUE_SETTINGS','Got\x20queue\x20settings\x20\x22','ERROR\x20parsing\x20queue\x20settings\x20\x22','exit','createQueue','./src/schema.graphql','/graphql','/subscriptions','../../client/build','Server\x20started,\x20listening\x20on\x20port\x20','\x20for\x20incoming\x20requests,\x20static\x20files\x20served\x20from\x20','object','undefined','exports','async','watson-developer-cloud/assistant/v1','uuid/v1','botium-core','botium-core/src/scripting/CompilerTxt','jsonwebtoken','slugify','randomatic','graphql-yoga','lodash','debug','util','prisma-binding','path','kue','function','amd','node-cache','request-promise-native','connect-history-api-fallback','main','v1$1','botiumCore','CompilerTxt','requestPromiseNative','bcryptjs','graphqlYoga','prismaBinding','express','default','hasOwnProperty','botium-box-server-agents-utils','query','testSessionTestCaseResultAttachment','now','toISOString','apiKeys','{\x20id\x20name\x20}','length','data','name','group','invalid\x20agent\x20event,\x20name\x20or\x20group\x20not\x20given\x20','reject','agent','reduce','type','STRING','stringValue','INT','BOOLEAN','booleanValue','JSON','parse','jsonValue','forEach','botium-box-server-agents-heartbeat','findAgentFromJobData','{\x20id,\x20name\x20}','mutation','then','Agent\x20','\x20not\x20configured','catch','botium-box-server-agents-registeragent','{\x20id,\x20name,\x20capabilities\x20{\x20name,\x20stringValue\x20}\x20}','composeBotiumCapabilities','capabilities','log','findFullTestSession','Test\x20Session\x20','testSessionId','startTestSession\x20','process.','process','\x20queueToSend:\x20','testProject','\x20testSessionCaps:\x20','stringify'];(function(_0x1e6b20,_0x458f61){var _0x3d7d3a=function(_0x40583b){while(--_0x40583b){_0x1e6b20['push'](_0x1e6b20['shift']());}};var _0x16206d=function(){var _0x58d684={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x46b425,_0x13086d,_0x577b6f,_0x5c7ecc){_0x5c7ecc=_0x5c7ecc||{};var _0x20ce8f=_0x13086d+'='+_0x577b6f;var _0x5453fd=0x0;for(var _0x5453fd=0x0,_0x5ce76c=_0x46b425['length'];_0x5453fd<_0x5ce76c;_0x5453fd++){var _0x47ac80=_0x46b425[_0x5453fd];_0x20ce8f+=';\x20'+_0x47ac80;var _0x27edea=_0x46b425[_0x47ac80];_0x46b425['push'](_0x27edea);_0x5ce76c=_0x46b425['length'];if(_0x27edea!==!![]){_0x20ce8f+='='+_0x27edea;}}_0x5c7ecc['cookie']=_0x20ce8f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x59197c,_0x37184e){_0x59197c=_0x59197c||function(_0x57bfce){return _0x57bfce;};var _0x5ba3f9=_0x59197c(new RegExp('(?:^|;\x20)'+_0x37184e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x584065=function(_0x50960e,_0x457222){_0x50960e(++_0x457222);};_0x584065(_0x3d7d3a,_0x458f61);return _0x5ba3f9?decodeURIComponent(_0x5ba3f9[0x1]):undefined;}};var _0xcdddd0=function(){var _0x48a28c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x48a28c['test'](_0x58d684['removeCookie']['toString']());};_0x58d684['updateCookie']=_0xcdddd0;var _0x4ada3d='';var _0x4758d3=_0x58d684['updateCookie']();if(!_0x4758d3){_0x58d684['setCookie'](['*'],'counter',0x1);}else if(_0x4758d3){_0x4ada3d=_0x58d684['getCookie'](null,'counter');}else{_0x58d684['removeCookie']();}};_0x16206d();}(_0x338e,0x14c));var _0x2998=function(_0x535b16,_0x1efa48){_0x535b16=_0x535b16-0x0;var _0x6cc32b=_0x338e[_0x535b16];return _0x6cc32b;};(function(_0x39b60d,_0x48b6f9){var _0x282839=function(){var _0x1d4356=!![];return function(_0x283b0d,_0x39ebc1){var _0x57bf34=_0x1d4356?function(){if(_0x39ebc1){var _0x490520=_0x39ebc1['apply'](_0x283b0d,arguments);_0x39ebc1=null;return _0x490520;}}:function(){};_0x1d4356=![];return _0x57bf34;};}();var _0x4bc429=_0x282839(this,function(){var _0x2d8f05=function(){return'\x64\x65\x76';},_0x4b81bb=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x34a12b=function(){var _0x36c6a6=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x36c6a6['\x74\x65\x73\x74'](_0x2d8f05['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x33748d=function(){var _0x3e4c21=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3e4c21['\x74\x65\x73\x74'](_0x4b81bb['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5c685e=function(_0x3e3156){var _0x1e9e81=~-0x1>>0x1+0xff%0x0;if(_0x3e3156['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1e9e81)){_0x292610(_0x3e3156);}};var _0x292610=function(_0x151bd2){var _0x558098=~-0x4>>0x1+0xff%0x0;if(_0x151bd2['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x558098){_0x5c685e(_0x151bd2);}};if(!_0x34a12b()){if(!_0x33748d()){_0x5c685e('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5c685e('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5c685e('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x4bc429();typeof exports===_0x2998('0x0')&&typeof module!==_0x2998('0x1')?module[_0x2998('0x2')]=_0x48b6f9(require(_0x2998('0x3')),require(_0x2998('0x4')),require(_0x2998('0x5')),require(_0x2998('0x6')),require(_0x2998('0x7')),require('node-cache'),require('request-promise-native'),require('moment'),require(_0x2998('0x8')),require('bcryptjs'),require(_0x2998('0x9')),require(_0x2998('0xa')),require(_0x2998('0xb')),require(_0x2998('0xc')),require(_0x2998('0xd')),require(_0x2998('0xe')),require(_0x2998('0xf')),require('express'),require(_0x2998('0x10')),require(_0x2998('0x11')),require('connect-history-api-fallback')):typeof define===_0x2998('0x12')&&define[_0x2998('0x13')]?define(['async',_0x2998('0x4'),_0x2998('0x5'),_0x2998('0x6'),_0x2998('0x7'),_0x2998('0x14'),_0x2998('0x15'),'moment',_0x2998('0x8'),'bcryptjs',_0x2998('0x9'),'randomatic',_0x2998('0xb'),_0x2998('0xc'),_0x2998('0xd'),'util',_0x2998('0xf'),'express',_0x2998('0x10'),_0x2998('0x11'),_0x2998('0x16')],_0x48b6f9):_0x39b60d[_0x2998('0x17')]=_0x48b6f9(_0x39b60d['async'],_0x39b60d['v1'],_0x39b60d[_0x2998('0x18')],_0x39b60d[_0x2998('0x19')],_0x39b60d[_0x2998('0x1a')],_0x39b60d['nodeCache'],_0x39b60d[_0x2998('0x1b')],_0x39b60d['moment'],_0x39b60d['jsonwebtoken'],_0x39b60d[_0x2998('0x1c')],_0x39b60d[_0x2998('0x9')],_0x39b60d[_0x2998('0xa')],_0x39b60d[_0x2998('0x1d')],_0x39b60d[_0x2998('0xc')],_0x39b60d['debug'],_0x39b60d[_0x2998('0xe')],_0x39b60d[_0x2998('0x1e')],_0x39b60d[_0x2998('0x1f')],_0x39b60d[_0x2998('0x10')],_0x39b60d[_0x2998('0x11')],_0x39b60d['connectHistoryApiFallback']);}(this,function(_0x5d9d66,_0x710868,_0x40b7f7,_0x5c3b6b,_0x5dd517,_0x4d4f0c,_0x454593,_0x7aab85,_0x2d1189,_0x32eb53,_0x149e8a,_0x1d6e5c,_0x17f456,_0x12b415,_0x301cbd,_0x1b6bc8,_0x29add9,_0x4d293d,_0x1abf60,_0x3cf3c2,_0x5cdda8){'use strict';_0x5d9d66=_0x5d9d66&&_0x5d9d66['hasOwnProperty'](_0x2998('0x20'))?_0x5d9d66[_0x2998('0x20')]:_0x5d9d66;_0x710868=_0x710868&&_0x710868[_0x2998('0x21')](_0x2998('0x20'))?_0x710868[_0x2998('0x20')]:_0x710868;_0x40b7f7=_0x40b7f7&&_0x40b7f7[_0x2998('0x21')]('default')?_0x40b7f7['default']:_0x40b7f7;_0x5c3b6b=_0x5c3b6b&&_0x5c3b6b['hasOwnProperty']('default')?_0x5c3b6b[_0x2998('0x20')]:_0x5c3b6b;_0x5dd517=_0x5dd517&&_0x5dd517[_0x2998('0x21')](_0x2998('0x20'))?_0x5dd517['default']:_0x5dd517;_0x4d4f0c=_0x4d4f0c&&_0x4d4f0c[_0x2998('0x21')](_0x2998('0x20'))?_0x4d4f0c[_0x2998('0x20')]:_0x4d4f0c;_0x454593=_0x454593&&_0x454593[_0x2998('0x21')](_0x2998('0x20'))?_0x454593[_0x2998('0x20')]:_0x454593;_0x7aab85=_0x7aab85&&_0x7aab85[_0x2998('0x21')](_0x2998('0x20'))?_0x7aab85[_0x2998('0x20')]:_0x7aab85;_0x2d1189=_0x2d1189&&_0x2d1189[_0x2998('0x21')](_0x2998('0x20'))?_0x2d1189[_0x2998('0x20')]:_0x2d1189;_0x32eb53=_0x32eb53&&_0x32eb53[_0x2998('0x21')](_0x2998('0x20'))?_0x32eb53[_0x2998('0x20')]:_0x32eb53;_0x149e8a=_0x149e8a&&_0x149e8a['hasOwnProperty']('default')?_0x149e8a['default']:_0x149e8a;_0x1d6e5c=_0x1d6e5c&&_0x1d6e5c[_0x2998('0x21')](_0x2998('0x20'))?_0x1d6e5c[_0x2998('0x20')]:_0x1d6e5c;_0x17f456=_0x17f456&&_0x17f456[_0x2998('0x21')]('default')?_0x17f456[_0x2998('0x20')]:_0x17f456;_0x12b415=_0x12b415&&_0x12b415['hasOwnProperty']('default')?_0x12b415[_0x2998('0x20')]:_0x12b415;_0x301cbd=_0x301cbd&&_0x301cbd[_0x2998('0x21')](_0x2998('0x20'))?_0x301cbd[_0x2998('0x20')]:_0x301cbd;_0x1b6bc8=_0x1b6bc8&&_0x1b6bc8[_0x2998('0x21')](_0x2998('0x20'))?_0x1b6bc8[_0x2998('0x20')]:_0x1b6bc8;_0x29add9=_0x29add9&&_0x29add9[_0x2998('0x21')]('default')?_0x29add9[_0x2998('0x20')]:_0x29add9;_0x4d293d=_0x4d293d&&_0x4d293d[_0x2998('0x21')]('default')?_0x4d293d['default']:_0x4d293d;_0x1abf60=_0x1abf60&&_0x1abf60[_0x2998('0x21')](_0x2998('0x20'))?_0x1abf60[_0x2998('0x20')]:_0x1abf60;_0x3cf3c2=_0x3cf3c2&&_0x3cf3c2[_0x2998('0x21')]('default')?_0x3cf3c2[_0x2998('0x20')]:_0x3cf3c2;_0x5cdda8=_0x5cdda8&&_0x5cdda8[_0x2998('0x21')](_0x2998('0x20'))?_0x5cdda8[_0x2998('0x20')]:_0x5cdda8;const _0x43c0b7=_0x301cbd(_0x2998('0x22'));var _0x20fedb=(_0x476315,_0x33cceb)=>{return _0x476315[_0x2998('0x23')][_0x2998('0x24')]({'where':{'id':_0x33cceb}},'{\x20id\x20name\x20mimeType\x20base64\x20}');};var _0x2a1fe2=(_0x30ce6b,_0x4e30a0)=>{const _0x55c993=new Date(Date[_0x2998('0x25')]())[_0x2998('0x26')]();const _0x5b71e7={'where':{'AND':[{'key':_0x4e30a0},{'OR':[{'validFrom':null},{'validFrom_lte':_0x55c993}]},{'OR':[{'validTo':null},{'validTo_gte':_0x55c993}]}]}};return _0x30ce6b[_0x2998('0x23')][_0x2998('0x27')](_0x5b71e7,_0x2998('0x28'))['then'](_0x227d06=>{if(!_0x227d06||_0x227d06[_0x2998('0x29')]===0x0)return null;return _0x227d06[0x0];});};var _0x4ade21=(_0x56f6e1,_0x3c0f99)=>{return _0x56f6e1[_0x2998('0x23')]['testSession']({'where':{'id':_0x3c0f99}},'{\x20id\x20name\x20batchCount\x20\x0a\x20\x20\x20\x20chatbot\x20{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}\x20\x0a\x20\x20\x20\x20testSets\x20{\x20id\x20name\x20scripts\x20{\x20id\x20script\x20scriptType\x20}\x20repositories\x20{\x20id\x20giturl\x20gitbranch\x20gitdir\x20}\x20folders\x20{\x20id\x20path\x20}\x20}\x0a\x20\x20\x20\x20deviceSets\x20{\x20id\x20name\x20provider\x20devices\x20{\x20id\x20name\x20capabilities\x20}\x20}\x20\x0a\x20\x20\x20\x20testProject\x20{\x20id\x20name\x20capabilities\x20{\x20name\x20type\x20stringValue\x20intValue\x20booleanValue\x20jsonValue\x20}\x20}\x0a\x20\x20\x20\x20agent\x20{\x20id\x20name\x20}\x20}');};var _0x28b3ed=(_0x1a7d70,_0x404783,_0xfd045d)=>{if(!_0x404783[_0x2998('0x2a')][_0x2998('0x2b')]||!_0x404783[_0x2998('0x2a')][_0x2998('0x2c')]){const _0x4ae23e=_0x2998('0x2d')+_0x404783[_0x2998('0x2a')];_0x43c0b7(_0x4ae23e);return Promise[_0x2998('0x2e')](_0x4ae23e);}return _0x1a7d70[_0x2998('0x23')][_0x2998('0x2f')]({'where':{'name':_0x404783[_0x2998('0x2a')][_0x2998('0x2b')]}},_0xfd045d);};var _0x1c7a96=_0xeed0d4=>{return _0xeed0d4[_0x2998('0x30')]((_0x311b47,_0x5b82af)=>{if(_0x5b82af[_0x2998('0x31')]===_0x2998('0x32')||_0x5b82af['type']==='TEXT')_0x311b47[_0x5b82af[_0x2998('0x2b')]]=_0x5b82af[_0x2998('0x33')];if(_0x5b82af[_0x2998('0x31')]===_0x2998('0x34'))_0x311b47[_0x5b82af['name']]=parseInt(_0x5b82af['intValue']);if(_0x5b82af[_0x2998('0x31')]===_0x2998('0x35'))_0x311b47[_0x5b82af[_0x2998('0x2b')]]=_0x5b82af[_0x2998('0x36')]?!![]:![];if(_0x5b82af['type']===_0x2998('0x37'))_0x311b47[_0x5b82af[_0x2998('0x2b')]]=JSON[_0x2998('0x38')](_0x5b82af[_0x2998('0x39')]);return _0x311b47;},{});};var _0x16fed7=(..._0x1bc871)=>{const _0x518856={};_0x1bc871&&_0x1bc871[_0x2998('0x3a')](_0x22728c=>{_0x22728c&&Object['keys'](_0x22728c)['forEach'](_0x51b74f=>{_0x518856[_0x51b74f]=_0x22728c[_0x51b74f];});});return _0x518856;};var _0x1638de={'getAttachment':_0x20fedb,'lookupApiKey':_0x2a1fe2,'findFullTestSession':_0x4ade21,'findAgentFromJobData':_0x28b3ed,'composeBotiumCapabilities':_0x1c7a96,'combineBotiumCapabilities':_0x16fed7};const _0x5580ac=_0x301cbd(_0x2998('0x3b'));var _0x194f60=(_0x131cc9,_0x12237b,_0x3c9888)=>{_0x1638de[_0x2998('0x3c')](_0x131cc9['db'],_0x12237b,_0x2998('0x3d'))['then'](_0xac4692=>{if(_0xac4692){_0x131cc9['db'][_0x2998('0x3e')]['updateAgent']({'where':{'id':_0xac4692['id']},'data':{'heartbeat':new Date(Date[_0x2998('0x25')]())['toISOString']()}})[_0x2998('0x3f')](()=>_0x3c9888());}else{const _0x284f3f=_0x2998('0x40')+_0x12237b[_0x2998('0x2a')][_0x2998('0x2b')]+_0x2998('0x41');_0x5580ac(_0x284f3f);return _0x3c9888(_0x284f3f);}})[_0x2998('0x42')](_0x1bdbb1=>{console['log'](_0x1bdbb1);return _0x3c9888(_0x1bdbb1);});};const _0x30c3ff=_0x301cbd(_0x2998('0x43'));var _0x5e3f10=(_0x3e3753,_0x2a4e23,_0x354aa6)=>{_0x1638de[_0x2998('0x3c')](_0x3e3753['db'],_0x2a4e23,_0x2998('0x44'))[_0x2998('0x3f')](_0x566649=>{if(_0x566649){const _0xce75df=_0x1638de[_0x2998('0x45')](_0x566649[_0x2998('0x46')]);const _0x18f042={'debug':![],'botium':{'Capabilities':_0xce75df}};_0x30c3ff('Agent\x20registered,\x20config:\x20'+JSON['stringify'](_0x18f042));return _0x354aa6(null,_0x18f042);}else{const _0x1fc19d='Agent\x20'+_0x2a4e23[_0x2998('0x2a')][_0x2998('0x2b')]+_0x2998('0x41');_0x30c3ff(_0x1fc19d);return _0x354aa6(_0x1fc19d);}})['catch'](_0x51d4d4=>{console[_0x2998('0x47')](_0x51d4d4);return _0x354aa6(_0x51d4d4);});};const _0x34f70b=_0x301cbd('botium-box-server-agents-testsession');var _0x29cfa7=(_0x39af27,_0x3a5f87,_0x24d9fc)=>{_0x1638de[_0x2998('0x48')](_0x39af27['db'],_0x3a5f87[_0x2998('0x2a')]['testSessionId'])[_0x2998('0x3f')](_0x3b635f=>{if(!_0x3b635f){const _0x483103=_0x2998('0x49')+_0x3a5f87[_0x2998('0x2a')][_0x2998('0x4a')]+_0x2998('0x41');_0x34f70b(_0x483103);return _0x24d9fc(_0x483103);}_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']);const _0x49c1e7=_0x3b635f['agent']?_0x2998('0x4c')+_0x3b635f[_0x2998('0x2f')][_0x2998('0x2b')]:_0x2998('0x4d');_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']+_0x2998('0x4e')+_0x49c1e7);const _0x4b010e=_0x1638de['combineBotiumCapabilities']({'PROJECTNAME':_0x3b635f[_0x2998('0x2b')]},_0x1638de[_0x2998('0x45')](_0x3b635f['chatbot']['capabilities']),_0x3b635f[_0x2998('0x4f')]&&_0x1638de[_0x2998('0x45')](_0x3b635f[_0x2998('0x4f')]['capabilities'])||[]);_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']+_0x2998('0x50')+JSON[_0x2998('0x51')](_0x4b010e));const _0x1acbbc=_0x3b635f['testSets']['reduce']((_0x380848,_0x1f90c7)=>{return[..._0x380848,..._0x1f90c7[_0x2998('0x52')][_0x2998('0x53')](_0x57ed5b=>_0x57ed5b[_0x2998('0x54')]==='SCRIPTING_TYPE_CONVO')[_0x2998('0x55')](_0x17dd2a=>{return{'format':_0x2998('0x56'),'content':_0x17dd2a['script'],'sourceTag':{'testSetId':_0x1f90c7['id'],'testSetScriptId':_0x17dd2a['id']}};})];},[]);_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']+_0x2998('0x57')+_0x1acbbc[_0x2998('0x29')]);const _0x209563=_0x3b635f[_0x2998('0x58')][_0x2998('0x30')]((_0x214d9c,_0x751568)=>{return[..._0x214d9c,..._0x751568[_0x2998('0x52')][_0x2998('0x53')](_0x26e867=>_0x26e867[_0x2998('0x54')]===_0x2998('0x59'))[_0x2998('0x55')](_0x3fe506=>{return{'format':_0x2998('0x56'),'content':_0x3fe506[_0x2998('0x5a')],'sourceTag':{'testSetId':_0x751568['id'],'testSetScriptId':_0x3fe506['id']}};})];},[]);_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']+_0x2998('0x5b')+_0x209563[_0x2998('0x29')]);const _0x433eef=_0x3b635f[_0x2998('0x58')][_0x2998('0x30')]((_0x419028,_0x1c71d1)=>{return[..._0x419028,..._0x1c71d1[_0x2998('0x5c')]['map'](_0x165960=>{return{'giturl':_0x165960['giturl'],'gitbranch':_0x165960[_0x2998('0x5d')],'gitdir':_0x165960[_0x2998('0x5e')],'sourceTag':{'testSetId':_0x1c71d1['id'],'testSetRepositoryId':_0x165960['id']}};})];},[]);_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']+_0x2998('0x5f')+_0x433eef);const _0x3f5c39=_0x3b635f[_0x2998('0x58')]['reduce']((_0x5375e4,_0xcddfe1)=>{return[..._0x5375e4,..._0xcddfe1[_0x2998('0x60')]['map'](_0x5f34ca=>{return{'path':_0x5f34ca[_0x2998('0x10')],'sourceTag':{'testSetId':_0xcddfe1['id'],'testSetFolderId':_0x5f34ca['id']}};})];},[]);_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']+_0x2998('0x61')+_0x3f5c39);const _0x1b1bb9=(_0x20f656,_0x19fc1f,_0x453e11,_0x5ccc8e,_0x4a522c)=>{const _0xb3f077=_0x3b635f['batchCount']||0x1;let _0x30b8af=Promise[_0x2998('0x62')]();for(let _0x534836=0x1;_0x534836<=_0xb3f077;_0x534836++){const _0x31928e=_0x534836;_0x30b8af=_0x30b8af['then'](()=>new Promise(_0x785424=>{const _0x186524=_0x39af27[_0x2998('0x63')]['create'](_0x49c1e7,{'title':_0x2998('0x64')+_0x31928e+'/'+_0xb3f077+_0x2998('0x65')+_0x3b635f[_0x2998('0x2b')],'botium':{'Capabilities':_0x20f656},'convos':_0x19fc1f,'utterances':_0x453e11,'repositories':_0x5ccc8e,'folders':_0x4a522c,'myBatchNum':_0x31928e,'batchCount':_0xb3f077})[_0x2998('0x66')](!![])['delay'](0x1388)[_0x2998('0x67')](_0x483103=>{if(_0x483103)return _0x34f70b(_0x483103);const _0x49013d=_0x186524['id'];_0x39af27['db']['mutation']['createTestSessionJob']({'data':{'jobId':_0x49013d,'status':_0x2998('0x68'),'progressPercent':0x0,'testSession':{'connect':{'id':_0x3b635f['id']}}}},'{\x20id,\x20jobId\x20}')[_0x2998('0x3f')](_0x5c8c35=>{_0x34f70b('TestSessionJob\x20for\x20TestSession\x20'+_0x3b635f[_0x2998('0x2b')]+'\x20registered\x20(jobId:\x20'+_0x49013d+'\x20id:\x20'+_0x5c8c35['id']+')');_0x785424();})[_0x2998('0x42')](_0x483103=>{_0x34f70b(_0x2998('0x69')+_0x3b635f[_0x2998('0x2b')]+'\x20registration\x20failed\x20(jobId:\x20'+_0x49013d+_0x2998('0x6a')+_0x483103);_0x785424();});});}));}return _0x30b8af;};if(_0x3b635f['deviceSets']&&_0x3b635f[_0x2998('0x6b')][_0x2998('0x29')]>0x0){const _0x207da4=_0x3b635f['deviceSets'][_0x2998('0x30')]((_0x2395c3,_0x39924b)=>{return[..._0x2395c3,..._0x39924b[_0x2998('0x6c')][_0x2998('0x55')](_0xd4792b=>{if(_0x39924b[_0x2998('0x6d')]===_0x2998('0x6e')){return{'deviceSetId':_0x39924b['id'],'deviceName':_0xd4792b[_0x2998('0x2b')],'deviceOptions':{'desiredCapabilities':Object[_0x2998('0x6f')]({},JSON[_0x2998('0x38')](_0xd4792b[_0x2998('0x46')]),{'name':_0x3b635f[_0x2998('0x2b')],'username':'botium','accessKey':_0x2998('0x70')}),'host':_0x2998('0x71'),'port':0x50}};}else if(_0x39924b[_0x2998('0x6d')]===_0x2998('0x72')){return{'deviceSetId':_0x39924b['id'],'deviceName':_0xd4792b[_0x2998('0x2b')],'deviceOptions':{'desiredCapabilities':Object[_0x2998('0x6f')]({},JSON[_0x2998('0x38')](_0xd4792b[_0x2998('0x46')]),{'name':_0x3b635f['name']})}};}})];},[]);_0x34f70b(_0x2998('0x4b')+_0x3b635f['id']+'\x20testSessionDevices:\x20'+JSON[_0x2998('0x51')](_0x207da4,null,0x2));let _0x75c9aa=Promise['resolve']();_0x207da4[_0x2998('0x3a')](_0x3d9c1c=>{const _0x329779=_0x436e27=>{return _0x436e27&&_0x436e27[_0x2998('0x55')](_0x271f49=>{const _0x1636d1=_0x12b415[_0x2998('0x73')](_0x271f49);_0x1636d1[_0x2998('0x74')]=Object[_0x2998('0x6f')]({},_0x1636d1[_0x2998('0x74')],{'deviceSetId':_0x3d9c1c['deviceSetId'],'deviceName':_0x3d9c1c[_0x2998('0x75')]});return _0x1636d1;});};const _0x55968a=_0x329779(_0x1acbbc);const _0x453cee=_0x329779(_0x209563);const _0x3b16c2=_0x329779(_0x433eef);const _0x2a7ab1=_0x329779(_0x3f5c39);const _0x2598f1=Object[_0x2998('0x6f')]({},_0x4b010e,{'WEBDRIVERIO_OPTIONS':_0x3d9c1c['deviceOptions']});_0x75c9aa=_0x75c9aa[_0x2998('0x3f')](()=>_0x1b1bb9(_0x2598f1,_0x55968a,_0x453cee,_0x3b16c2,_0x2a7ab1));});return _0x75c9aa[_0x2998('0x3f')](()=>_0x24d9fc())[_0x2998('0x42')](_0x24d9fc);}else{return _0x1b1bb9(_0x4b010e,_0x1acbbc,_0x209563,_0x433eef,_0x3f5c39)['then'](()=>_0x24d9fc())[_0x2998('0x42')](_0x24d9fc);}})[_0x2998('0x42')](_0x539b2e=>{_0x34f70b(_0x539b2e);_0x24d9fc(_0x539b2e);});};var _0x3ab678=(_0x24194c,_0x1ad655,_0x5ef247,_0x5ab401)=>{_0x24194c['db'][_0x2998('0x23')]['testSessionJobs']({'where':{'jobId':_0x1ad655}},_0x2998('0x76'))[_0x2998('0x3f')](_0x148347=>{if(!_0x148347||_0x148347['length']===0x0){return _0x34f70b(_0x2998('0x77')+_0x1ad655+_0x2998('0x78'));}const _0x56564=_0x148347[0x0];_0x24194c['db'][_0x2998('0x3e')][_0x2998('0x79')]({'data':{'status':'RUNNING'},'where':{'status':_0x2998('0x68'),'jobs_some':{'id':_0x56564['id']}}})['then'](()=>{_0x34f70b(_0x2998('0x7a')+_0x1ad655+'/'+_0x56564['id']+_0x2998('0x7b'));})[_0x2998('0x42')](_0x130dfb=>{_0x34f70b(_0x130dfb);});_0x24194c['db']['mutation'][_0x2998('0x7c')]({'data':{'status':_0x2998('0x7d'),'started':new Date(Date[_0x2998('0x25')]())[_0x2998('0x26')]()},'where':{'status':_0x2998('0x68'),'id':_0x56564['id']}})[_0x2998('0x3f')](()=>{_0x34f70b(_0x2998('0x7a')+_0x1ad655+'/'+_0x56564['id']+_0x2998('0x7e'));})[_0x2998('0x42')](_0x308845=>{_0x34f70b(_0x308845);});if(_0x12b415[_0x2998('0x7f')](_0x5ef247)){_0x24194c['db'][_0x2998('0x3e')][_0x2998('0x7c')]({'data':{'progressPercent':_0x5ef247},'where':{'status':_0x2998('0x7d'),'id':_0x56564['id']}})[_0x2998('0x3f')](()=>{_0x34f70b(_0x2998('0x7a')+_0x1ad655+'/'+_0x56564['id']+'\x20set\x20Test\x20Session\x20Job\x20progressPercent\x20'+_0x5ef247+'.');})[_0x2998('0x3f')](()=>_0x15f9c(_0x24194c,_0x56564[_0x2998('0x80')]['id']))['catch'](_0x33ea96=>{_0x34f70b(_0x33ea96);});}if(_0x5ab401['log']){_0x24194c['db']['mutation'][_0x2998('0x81')]({'data':{'log':_0x5ab401[_0x2998('0x47')],'testSessionJob':{'connect':{'id':_0x56564['id']}}}},_0x2998('0x82'))['then'](()=>{_0x34f70b('Test\x20Session\x20Job\x20'+_0x1ad655+'/'+_0x56564['id']+_0x2998('0x83')+_0x5ab401[_0x2998('0x47')]);})['catch'](_0x4e53fd=>{_0x34f70b(_0x4e53fd);});}if(_0x5ab401[_0x2998('0x84')]){const _0x5df7a7={'testcaseName':_0x5ab401['testcase'],'testcaseSource':_0x5ab401[_0x2998('0x85')],'success':_0x5ab401['success'],'err':_0x5ab401[_0x2998('0x86')],'testSession':{'connect':{'id':_0x56564[_0x2998('0x80')]['id']}}};if(_0x5ab401[_0x2998('0x87')]){_0x5df7a7['messages']=_0x12b415['isString'](_0x5ab401[_0x2998('0x87')])?_0x5ab401[_0x2998('0x87')]:JSON[_0x2998('0x51')](_0x5ab401[_0x2998('0x87')]);}if(_0x5ab401[_0x2998('0x74')]){if(_0x5ab401[_0x2998('0x74')][_0x2998('0x88')])_0x5df7a7[_0x2998('0x89')]=_0x5ab401['sourceTag'][_0x2998('0x88')];if(_0x5ab401[_0x2998('0x74')][_0x2998('0x8a')])_0x5df7a7[_0x2998('0x8b')]={'connect':{'id':_0x5ab401[_0x2998('0x74')][_0x2998('0x8a')]}};if(_0x5ab401[_0x2998('0x74')]['testSetScriptId'])_0x5df7a7[_0x2998('0x8c')]={'connect':{'id':_0x5ab401['sourceTag'][_0x2998('0x8d')]}};if(_0x5ab401[_0x2998('0x74')][_0x2998('0x8e')])_0x5df7a7['testSetRepository']={'connect':{'id':_0x5ab401[_0x2998('0x74')]['testSetRepositoryId']}};if(_0x5ab401['sourceTag']['testSetFolderId'])_0x5df7a7[_0x2998('0x8f')]={'connect':{'id':_0x5ab401[_0x2998('0x74')]['testSetFolderId']}};if(_0x5ab401['sourceTag']['deviceSetId'])_0x5df7a7[_0x2998('0x90')]={'connect':{'id':_0x5ab401[_0x2998('0x74')][_0x2998('0x91')]}};if(_0x5ab401[_0x2998('0x74')][_0x2998('0x75')])_0x5df7a7[_0x2998('0x75')]=_0x5ab401[_0x2998('0x74')][_0x2998('0x75')];}if(_0x5ab401[_0x2998('0x92')]){_0x5df7a7[_0x2998('0x92')]={'create':_0x5ab401[_0x2998('0x92')][_0x2998('0x55')](_0x1babc0=>{return{'name':_0x1babc0[_0x2998('0x2b')],'mimeType':_0x1babc0[_0x2998('0x93')],'base64':_0x1babc0[_0x2998('0x94')]};})};}_0x24194c['db'][_0x2998('0x3e')][_0x2998('0x95')]({'data':_0x5df7a7},_0x2998('0x82'))['then'](_0x543537=>{_0x34f70b(_0x2998('0x96')+_0x5ab401[_0x2998('0x84')]+_0x2998('0x97')+_0x56564[_0x2998('0x80')]['name']+_0x2998('0x98')+_0x1ad655+_0x2998('0x99')+_0x543537['id']+')');})[_0x2998('0x42')](_0x527a9d=>{_0x34f70b(_0x527a9d);});}})[_0x2998('0x42')](_0xbe8926=>{_0x34f70b(_0xbe8926);});};var _0x33a663=(_0x5e9f3e,_0x5bb71b,_0x26731d)=>{_0x5e9f3e['db']['query']['testSessionJobs']({'where':{'jobId':_0x5bb71b}},'{\x20id,\x20testSession\x20{\x20id\x20name\x20}\x20\x20}')['then'](_0x1fc863=>{if(!_0x1fc863||_0x1fc863[_0x2998('0x29')]===0x0){return _0x34f70b('Job\x20'+_0x5bb71b+_0x2998('0x78'));}const _0x1fc71a=_0x1fc863[0x0];_0x5e9f3e['db'][_0x2998('0x3e')]['updateTestSessionJob']({'data':{'status':_0x2998('0x9a'),'jobId':null,'progressPercent':0x64,'finished':new Date(Date[_0x2998('0x25')]())[_0x2998('0x26')]()},'where':{'id':_0x1fc71a['id']}})[_0x2998('0x3f')](()=>{_0x34f70b(_0x2998('0x7a')+_0x5bb71b+'/'+_0x1fc71a['id']+'\x20completed.');})[_0x2998('0x3f')](()=>{_0x5e9f3e['db'][_0x2998('0x3e')]['createTestSessionJobLog']({'data':{'log':_0x2998('0x9b'),'testSessionJob':{'connect':{'id':_0x1fc71a['id']}}}},'{\x20id\x20}')[_0x2998('0x42')](_0x2d5156=>{_0x34f70b(_0x2d5156);});})[_0x2998('0x3f')](()=>_0x12e59e(_0x5e9f3e,_0x5bb71b,_0x1fc71a['id']))['then'](()=>_0x15f9c(_0x5e9f3e,_0x1fc71a[_0x2998('0x80')]['id']))[_0x2998('0x42')](_0x1890cf=>{_0x34f70b(_0x1890cf);});});};var _0x3aae41=(_0x135709,_0x35833b,_0x5ad874)=>{_0x135709['db']['query']['testSessionJobs']({'where':{'jobId':_0x35833b}},_0x2998('0x76'))['then'](_0xa57906=>{if(!_0xa57906||_0xa57906[_0x2998('0x29')]===0x0){return _0x34f70b(_0x2998('0x77')+_0x35833b+'\x20not\x20registered\x20as\x20test\x20session\x20job.\x20Skipping.');}const _0x2c3218=_0xa57906[0x0];_0x135709['db'][_0x2998('0x3e')][_0x2998('0x9c')]({'data':{'status':_0x2998('0x9d'),'jobId':null,'err':_0x5ad874},'where':{'id':_0x2c3218['id']}})[_0x2998('0x3f')](()=>{_0x34f70b(_0x2998('0x7a')+_0x35833b+'/'+_0x2c3218['id']+_0x2998('0x9e')+_0x5ad874+'.');})['then'](()=>{_0x135709['db'][_0x2998('0x3e')][_0x2998('0x81')]({'data':{'log':_0x2998('0x9f')+_0x5ad874,'testSessionJob':{'connect':{'id':_0x2c3218['id']}}}},_0x2998('0x82'))[_0x2998('0x42')](_0x5ad874=>{_0x34f70b(_0x5ad874);});})[_0x2998('0x3f')](()=>_0x12e59e(_0x135709,_0x35833b,_0x2c3218['id']))[_0x2998('0x3f')](()=>_0x15f9c(_0x135709,_0x2c3218[_0x2998('0x80')]['id']))['catch'](_0x5ad874=>{_0x34f70b(_0x5ad874);});});};const _0x12e59e=(_0x42001a,_0x4af818,_0xf2b29d)=>{_0x34f70b('Test\x20Session\x20Job\x20'+_0x4af818+'/'+_0xf2b29d+_0x2998('0xa0'));return _0x42001a['db'][_0x2998('0x3e')][_0x2998('0x79')]({'data':{'status':_0x2998('0x9a')},'where':{'AND':[{'jobs_some':{'id':_0xf2b29d}},{'results_every':{'success':!![]}},{'jobs_every':{'status':_0x2998('0x9a')}}]}})[_0x2998('0x42')](_0x303d56=>{_0x34f70b(_0x303d56);})[_0x2998('0x3f')](()=>_0x42001a['db'][_0x2998('0x3e')][_0x2998('0x79')]({'data':{'status':_0x2998('0x9d')},'where':{'AND':[{'jobs_some':{'id':_0xf2b29d}},{'jobs_every':{'status_in':[_0x2998('0x9a'),_0x2998('0x9d')]}},{'OR':[{'results_some':{'success':![]}},{'jobs_some':{'status':_0x2998('0x9d')}}]}]}}))[_0x2998('0x42')](_0x3a5c49=>{_0x34f70b(_0x3a5c49);});};const _0x15f9c=(_0x8a2c61,_0x3b5e16)=>{_0x34f70b(_0x2998('0x49')+_0x3b5e16+'\x20sendSubscriptionProgress');_0x8a2c61['db']['query'][_0x2998('0x80')]({'where':{'id':_0x3b5e16}},_0x2998('0xa1'))[_0x2998('0x3f')](_0x563797=>{if(!_0x563797)return;_0x8a2c61[_0x2998('0xa2')][_0x2998('0xa3')](_0x2998('0xa4'),{'testSessionProgress':_0x563797});});};var _0x5dd55d={'startTestSession':_0x29cfa7,'testSessionProgress':_0x3ab678,'testSessionJobCompleted':_0x33a663,'testSessionJobFailed':_0x3aae41};const _0x18730a=_0x301cbd(_0x2998('0xa5'));var _0x5b50bc=class AgentsConnector{constructor(_0xf4f434){this[_0x2998('0xa6')]=_0xf4f434;}[_0x2998('0xa7')](){const _0x2fde7f=this['ctxFactory']();_0x2fde7f[_0x2998('0x63')][_0x2998('0x4d')](_0x2998('0xa8'),(_0x41584f,_0xcd0b1e)=>{_0x18730a(_0x2998('0xa9')+JSON['stringify'](_0x41584f[_0x2998('0x2a')]));_0x194f60(_0x2fde7f,_0x41584f,_0xcd0b1e);});_0x2fde7f[_0x2998('0x63')][_0x2998('0x4d')](_0x2998('0xaa'),(_0x48d4c6,_0x513c84)=>{_0x18730a(_0x2998('0xab')+JSON[_0x2998('0x51')](_0x48d4c6[_0x2998('0x2a')]));_0x5e3f10(_0x2fde7f,_0x48d4c6,_0x513c84);});_0x2fde7f[_0x2998('0x63')][_0x2998('0x4d')](_0x2998('0xac'),(_0x59f43a,_0x258aa1)=>{_0x18730a('box.createprocessingjobs:\x20'+JSON['stringify'](_0x59f43a[_0x2998('0x2a')]));_0x5dd55d[_0x2998('0xad')](_0x2fde7f,_0x59f43a,_0x258aa1);});_0x2fde7f[_0x2998('0x63')]['on'](_0x2998('0xae'),_0x489e9b=>{_0x18730a(_0x2998('0xaf'));_0x18730a(_0x489e9b);});_0x2fde7f[_0x2998('0x63')]['on']('job\x20enqueue',(_0x16f511,_0x1da7b0)=>{_0x18730a('Job\x20'+_0x16f511+_0x2998('0xb0')+_0x1da7b0);});_0x2fde7f[_0x2998('0x63')]['on'](_0x2998('0xb1'),(_0x1b2a1d,_0x490199)=>{_0x18730a(_0x2998('0x77')+_0x1b2a1d+_0x2998('0xb2')+_0x490199);_0x5dd55d['testSessionJobFailed'](_0x2fde7f,_0x1b2a1d,_0x490199);});_0x2fde7f[_0x2998('0x63')]['on'](_0x2998('0xb3'),(_0x4c0bf9,_0x18c2fe)=>{_0x18730a(_0x2998('0x77')+_0x4c0bf9+_0x2998('0xb4')+JSON[_0x2998('0x51')](_0x18c2fe));_0x5dd55d[_0x2998('0xb5')](_0x2fde7f,_0x4c0bf9,_0x18c2fe);});_0x2fde7f[_0x2998('0x63')]['on'](_0x2998('0xb6'),(_0x19e7e7,_0x5888c8,_0x1c5704)=>{_0x18730a('Job\x20'+_0x19e7e7+_0x2998('0xb7')+_0x5888c8);_0x5dd55d['testSessionProgress'](_0x2fde7f,_0x19e7e7,_0x5888c8,_0x1c5704);});}};const _0x5481ab={'user':async({user:{id}},_0x2ed7ff,_0x1cd32a,_0x3a8170)=>{return _0x1cd32a['db']['query']['user']({'where':{'id':id}},_0x3a8170);}};var _0x16a6ad={'AuthPayload':_0x5481ab};function _0x3f46d8(_0xd453f8){const _0xfb95d5=_0xd453f8[_0x2998('0xb8')][_0x2998('0xb9')]('Authorization');if(_0xfb95d5){const _0x39d6bc=_0xfb95d5[_0x2998('0xba')](_0x2998('0xbb'),'');const {userId}=_0x2d1189[_0x2998('0xbc')](_0x39d6bc,process[_0x2998('0xbd')][_0x2998('0xbe')]);return userId;}throw new _0x31b5e8();}class _0x31b5e8 extends Error{constructor(){super(_0x2998('0xbf'));}}var _0x497439={'getUserId':_0x3f46d8,'AuthError':_0x31b5e8};const {getUserId:getUserId$1}=_0x497439;var _0x517fc1={'me'(_0x366883,_0x3b725a,_0x4099c7,_0x5f5b00){const _0x4b5cf0=getUserId$1(_0x4099c7);return _0x4099c7['db'][_0x2998('0x23')][_0x2998('0xc0')]({'where':{'id':_0x4b5cf0}},_0x5f5b00);}};var _0x1174c7={'agents'(_0x2baa8a,{where,orderBy,skip,first},_0x13e509,_0x137724){orderBy=orderBy||_0x2998('0xc1');skip=skip||0x0;first=first||0xa;return _0x13e509['db'][_0x2998('0x23')][_0x2998('0xc2')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x137724);},'agent'(_0x531a91,{id},_0x2b4bb8,_0x5d0326){return _0x2b4bb8['db']['query'][_0x2998('0x2f')]({'where':{'id':id}},_0x5d0326);}};var _0x27ea91={'chatbots'(_0x162822,{where,orderBy,skip,first},_0x43a8cf,_0x5aa61d){orderBy=orderBy||_0x2998('0xc1');skip=skip||0x0;first=first||0xa;return _0x43a8cf['db'][_0x2998('0x23')]['chatbots']({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x5aa61d);},'chatbot'(_0x31f3c4,{id},_0xf0daa2,_0x54ab3d){return _0xf0daa2['db'][_0x2998('0x23')][_0x2998('0xc3')]({'where':{'id':id}},_0x54ab3d);},'availablewatsonworkspaces'(_0x5de35c,{url,version,username,password}){return new Promise((_0x354faf,_0xa2ad80)=>{const _0x199ae6=new _0x710868({'url':url,'version':version,'username':username,'password':password});_0x199ae6[_0x2998('0xc4')]((_0x112fdf,_0x49ac5e)=>{if(_0x112fdf){_0xa2ad80(_0x112fdf);}else{const _0x5b8f37=_0x49ac5e[_0x2998('0xc5')][_0x2998('0x55')](_0xd3eaf0=>({'name':_0xd3eaf0['name'],'description':_0xd3eaf0[_0x2998('0xc6')],'value':_0xd3eaf0[_0x2998('0xc7')]}));_0x354faf(_0x5b8f37);}});});}};const _0x329b8a=_0x301cbd(_0x2998('0xc8'));const _0x5a103b=_0x5c3b6b[_0x2998('0xc9')];const {composeBotiumCapabilities:composeBotiumCapabilities$1}=_0x1638de;const _0x421614={};const _0x1ae83c={};var _0x1e76ff={'Subscription':{'liveChatConvoStepAdded':{'subscribe':(_0x599979,{conversationId},{pubsub})=>_0x228d99[_0x2998('0xca')](conversationId)}},'Query':{'liveChatConvoSteps'(_0x58975e,{conversationId}){if(!_0x1ae83c[conversationId])return Promise[_0x2998('0x2e')](new Error('Conversation\x20'+conversationId+_0x2998('0xcb')));return _0x1ae83c[conversationId];}},'Mutation':{'liveChatStartBot'(_0x28c445,{id},{db,pubsub}){const _0x32d98e=_0x40b7f7();return db['query'][_0x2998('0xc3')]({'where':{'id':id}},_0x2998('0xcc'))['then'](_0xdb6652=>{_0x329b8a('liveChatStartBot('+_0x32d98e+')\x20launching\x20bot\x20'+_0xdb6652[_0x2998('0x2b')]+'\x20...');const _0x34674a=new _0x5a103b(composeBotiumCapabilities$1(_0xdb6652[_0x2998('0x46')]));const _0x1724b2=(_0x34e00e,_0xd1fd5)=>{const _0x141641=_0x1ae83c[_0x32d98e][_0x2998('0x29')];const _0x4166be=JSON[_0x2998('0x51')](Object[_0x2998('0x6f')](_0xd1fd5,{'convoStepIndex':_0x141641}));_0x1ae83c[_0x32d98e][_0x2998('0xcd')](_0x4166be);_0x228d99[_0x2998('0xa3')](_0x32d98e,{'liveChatConvoStepAdded':_0x4166be});};_0x34674a['on'](_0x2998('0xce'),_0x1724b2);_0x34674a['on'](_0x2998('0xcf'),_0x1724b2);return _0x34674a[_0x2998('0xd0')]();})['then'](_0x3cfbfc=>{_0x421614[_0x32d98e]=_0x3cfbfc;_0x1ae83c[_0x32d98e]=[];_0x329b8a('liveChatStartBot('+_0x32d98e+_0x2998('0xd1'));return _0x3cfbfc[_0x2998('0xd2')]();})[_0x2998('0x3f')](()=>{_0x329b8a(_0x2998('0xd3')+_0x32d98e+_0x2998('0xd4'));return _0x32d98e;});},'liveChatSendToBot'(_0x46b518,{conversationId,convoStep},{pubsub}){if(!_0x421614[conversationId])return Promise[_0x2998('0x2e')](new Error(_0x2998('0xd5')+conversationId+_0x2998('0xcb')));_0x329b8a(_0x2998('0xd6')+conversationId+_0x2998('0xd7')+convoStep);const _0x3a5fba=_0x421614[conversationId];_0x3a5fba[_0x2998('0xd8')](JSON[_0x2998('0x38')](convoStep))[_0x2998('0x42')](_0x29f28e=>_0x329b8a(_0x29f28e));return!![];},'liveChatStopBot'(_0x4674e2,{conversationId}){if(!_0x421614[conversationId])return Promise[_0x2998('0x2e')](new Error('Conversation\x20'+conversationId+_0x2998('0xcb')));_0x329b8a(_0x2998('0xd9')+conversationId+')\x20stopping\x20container');const _0x57f6a3=_0x421614[conversationId];return _0x57f6a3['Stop']()['then'](()=>_0x57f6a3[_0x2998('0xda')]())['then'](()=>{_0x329b8a('liveChatStopBot('+conversationId+_0x2998('0xdb'));delete _0x421614[conversationId];delete _0x1ae83c[conversationId];return!![];});},async 'liveChatSaveConvoSteps'(_0x5cc038,{conversationId,testSetId,newTestSetName,testCaseName},_0xe68c71){if(!_0x421614[conversationId])return Promise[_0x2998('0x2e')](new Error(_0x2998('0xd5')+conversationId+'\x20not\x20available.'));let _0x12d9b7=null;if(newTestSetName){_0x12d9b7=await _0xe68c71['db'][_0x2998('0x3e')]['createTestSet']({'data':{'name':newTestSetName}},_0x2998('0x28'));}else{_0x12d9b7=await _0xe68c71['db']['query'][_0x2998('0x8b')]({'where':{'id':testSetId}},'{\x20id\x20name\x20}');}_0x329b8a(_0x2998('0xdc')+conversationId+_0x2998('0xdd')+_0x12d9b7['id']+'/'+_0x12d9b7[_0x2998('0x2b')]);const _0x2f69b8=[testCaseName,''];_0x1ae83c[conversationId]['forEach'](_0x203096=>{const _0x1250e7=JSON[_0x2998('0x38')](_0x203096);_0x2f69b8[_0x2998('0xcd')]('#'+_0x1250e7[_0x2998('0xde')]);if(_0x1250e7[_0x2998('0xdf')]){_0x2f69b8[_0x2998('0xcd')](_0x1250e7[_0x2998('0xdf')]);}if(_0x1250e7['buttons']&&_0x1250e7['buttons'][_0x2998('0x29')]>0x0)_0x2f69b8[_0x2998('0xcd')]('BUTTONS\x20'+_0x1250e7['buttons'][_0x2998('0x55')](_0x2a0153=>_0x2a0153[_0x2998('0xe0')])[_0x2998('0xe1')]('|'));if(_0x1250e7[_0x2998('0xe2')]&&_0x1250e7['media'][_0x2998('0x29')]>0x0)_0x2f69b8[_0x2998('0xcd')](_0x2998('0xe3')+_0x1250e7[_0x2998('0xe2')][_0x2998('0x55')](_0x5316c9=>_0x5316c9[_0x2998('0xe4')])['join']('|'));if(_0x1250e7[_0x2998('0xe5')]&&_0x1250e7[_0x2998('0xe5')]['length']>0x0){_0x1250e7[_0x2998('0xe5')]['forEach'](_0x175b75=>{if(_0x175b75[_0x2998('0xe6')]&&_0x175b75['buttons'][_0x2998('0x29')]>0x0)_0x2f69b8[_0x2998('0xcd')](_0x2998('0xe7')+_0x175b75[_0x2998('0xe6')]['map'](_0x115e4b=>_0x115e4b[_0x2998('0xe0')])[_0x2998('0xe1')]('|'));if(_0x175b75[_0x2998('0xe8')])_0x2f69b8[_0x2998('0xcd')](_0x2998('0xe3')+_0x175b75[_0x2998('0xe8')][_0x2998('0xe4')]);});}_0x2f69b8['push']('');});let _0x2f6fad=await _0xe68c71['db']['mutation']['createTestSetScript']({'data':{'name':testCaseName,'script':_0x2f69b8['join']('\x0a'),'scriptType':_0x2998('0xe9'),'testSet':{'connect':{'id':_0x12d9b7['id']}}}},'{\x20id\x20name\x20}');_0x329b8a('liveChatSaveConvoSteps('+conversationId+')\x20saved\x20test\x20case\x20for\x20test\x20set\x20'+_0x12d9b7['id']+'/'+_0x12d9b7[_0x2998('0x2b')]+_0x2998('0xea')+_0x2f6fad['id']+'/'+_0x2f6fad[_0x2998('0x2b')]);return _0x2f6fad['id'];}}};var _0x13103a={'testsessions'(_0x1e2430,{where,orderBy,skip,first},_0x421bef,_0x432e45){orderBy=orderBy||_0x2998('0xeb');skip=skip||0x0;first=first||0xa;return _0x421bef['db'][_0x2998('0x23')][_0x2998('0xec')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x432e45);},'testsession'(_0x3a0622,{id},_0x1f1646,_0x562f20){return _0x1f1646['db'][_0x2998('0x23')]['testSession']({'where':{'id':id}},_0x562f20);}};var _0x3b8d00={'testsets'(_0x17f660,{where,orderBy,skip,first},_0xdb6701,_0x38fa17){orderBy=orderBy||_0x2998('0xc1');skip=skip||0x0;first=first||0xa;return _0xdb6701['db'][_0x2998('0x23')]['testSets']({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x38fa17);},'testset'(_0x1ecfb4,{id},_0x23947a,_0x1fb6c7){return _0x23947a['db']['query'][_0x2998('0x8b')]({'where':{'id':id}},_0x1fb6c7);},'testsetscripts'(_0x2af0e4,{testSetId,skip,first},_0x3b3a1b,_0x4ad2da){skip=skip||0x0;first=first||0xa;return _0x3b3a1b['db'][_0x2998('0x23')][_0x2998('0xed')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x4ad2da);},'testsetscript'(_0x33c529,{id},_0x443afe,_0x55153f){return _0x443afe['db']['query'][_0x2998('0x8c')]({'where':{'id':id}},_0x55153f);},'validatetestsetscript'(_0x48ec69,{script,scriptType}){const _0x4781d0=new _0x5dd517({'AddConvos':()=>{},'AddUtterances':()=>{},'IsAsserterValid':()=>!![],'scriptingEvents':{}},{'SCRIPTING_TXT_EOL':'\x0a'});const _0x2c20a3=_0x4781d0[_0x2998('0xee')](script,scriptType);if(_0x2c20a3[_0x2998('0x29')]>0x0){if(scriptType===_0x2998('0x59')){return Promise[_0x2998('0x62')]({'name':_0x2c20a3[0x0][_0x2998('0x2b')],'description':_0x2998('0xef'),'script':script,'scriptType':scriptType});}else{return Promise['resolve']({'name':_0x2c20a3[0x0][_0x2998('0xf0')][_0x2998('0x2b')],'description':_0x2c20a3[0x0][_0x2998('0xf0')][_0x2998('0xc6')],'script':script,'scriptType':scriptType});}}else{return Promise[_0x2998('0x2e')](new Error(_0x2998('0xf1')));}},'testsetrepositories'(_0x5867d3,{testSetId,skip,first},_0x5d0460,_0x28c235){skip=skip||0x0;first=first||0xa;return _0x5d0460['db'][_0x2998('0x23')][_0x2998('0xf2')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x28c235);},'testsetrepository'(_0x2b7aa3,{id},_0x1bba06,_0x2a776b){return _0x1bba06['db'][_0x2998('0x23')][_0x2998('0xf3')]({'where':{'id':id}},_0x2a776b);},'testsetfolders'(_0x33b86f,{testSetId,skip,first},_0xc6a2b,_0x2f3d96){skip=skip||0x0;first=first||0xa;return _0xc6a2b['db'][_0x2998('0x23')][_0x2998('0xf4')]({'where':{'testSet':{'id':testSetId}},'skip':skip,'first':first},_0x2f3d96);},'testsetfolder'(_0x4dac4e,{id},_0x5a332f,_0x27bbf7){return _0x5a332f['db'][_0x2998('0x23')][_0x2998('0x8f')]({'where':{'id':id}},_0x27bbf7);}};var _0x1deb0b=class Cache{constructor(_0x58a43a){this['cache']=new _0x4d4f0c({'stdTTL':_0x58a43a,'checkperiod':_0x58a43a*0.2,'useClones':![]});}[_0x2998('0xb9')](_0x23b9b9,_0x4ab7c0){const _0x53e5c8=this[_0x2998('0xf5')]['get'](_0x23b9b9);if(_0x53e5c8){return Promise[_0x2998('0x62')](_0x53e5c8);}return _0x4ab7c0()[_0x2998('0x3f')](_0x362748=>{this['cache']['set'](_0x23b9b9,_0x362748);return _0x362748;});}['del'](_0x574b02){this[_0x2998('0xf5')][_0x2998('0xf6')](_0x574b02);}[_0x2998('0xf7')](_0x3b7ea6=''){if(!_0x3b7ea6){return;}const _0x5a9e38=this[_0x2998('0xf5')]['keys']();for(const _0x33f120 of _0x5a9e38){if(_0x33f120[_0x2998('0xf8')](_0x3b7ea6)===0x0){this[_0x2998('0xf6')](_0x33f120);}}}[_0x2998('0xf9')](){this[_0x2998('0xf5')][_0x2998('0xfa')]();}};const _0x31e38b=new _0x1deb0b(0x3c*0x3c*0x1);var _0x25f9cb={'devicesets'(_0x10196e,{where,orderBy,skip,first},_0x52875a,_0x32dd95){orderBy=orderBy||_0x2998('0xc1');skip=skip||0x0;first=first||0xa;return _0x52875a['db'][_0x2998('0x23')][_0x2998('0x6b')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x32dd95);},'deviceset'(_0x392add,{id},_0x3acc45,_0x33a78b){return _0x3acc45['db'][_0x2998('0x23')][_0x2998('0x90')]({'where':{'id':id}},_0x33a78b);},'availabledevices'(_0x113501,{provider}){if(provider===_0x2998('0x6e')){return _0x31e38b['get'](_0x2998('0x6e'),()=>{return _0x454593({'url':_0x2998('0xfb'),'json':!![]})[_0x2998('0x3f')](_0x49d5e4=>{result=_0x49d5e4[_0x2998('0x53')](_0x409604=>!_0x409604[_0x2998('0xfc')])[_0x2998('0x55')](_0x559f73=>({'name':_0x559f73[_0x2998('0xfd')]+'\x20'+_0x559f73[_0x2998('0xfe')]+',\x20'+_0x559f73['os'],'value':JSON[_0x2998('0x51')]({'type':_0x2998('0xff'),'capabilities':{'browserName':_0x559f73['api_name'],'platform':_0x559f73['os'],'version':_0x559f73[_0x2998('0xfe')]}})}))[_0x2998('0x100')](_0x49d5e4[_0x2998('0x53')](_0x25ef4a=>_0x25ef4a[_0x2998('0xfc')])[_0x2998('0x55')](_0x1b483a=>({'name':_0x1b483a['long_name']+',\x20'+_0x1b483a[_0x2998('0xfe')],'value':JSON[_0x2998('0x51')]({'type':_0x2998('0x101'),'capabilities':{'browserName':[_0x2998('0x102'),_0x2998('0x103')][_0x2998('0xf8')](_0x1b483a[_0x2998('0x104')])>=0x0?_0x2998('0x105'):'Chrome','deviceName':_0x1b483a[_0x2998('0xfc')],'platformName':[_0x2998('0x102'),'ipad'][_0x2998('0xf8')](_0x1b483a[_0x2998('0x104')])>=0x0?_0x2998('0x106'):'Android','platformVersion':_0x1b483a[_0x2998('0xfe')]}})})));return _0x12b415[_0x2998('0x107')](_0x12b415[_0x2998('0x108')](result,_0x2998('0x2b'),_0x2998('0x109')),_0x2998('0x2b'));});});}else if(provider==='LOCALSELENIUM'){return _0x31e38b[_0x2998('0xb9')](_0x2998('0x72'),()=>{return Promise[_0x2998('0x62')]([{'name':_0x2998('0x10a'),'value':JSON[_0x2998('0x51')]({'type':_0x2998('0xff'),'capabilities':{'browserName':'phantomjs'}})},{'name':_0x2998('0x10b'),'value':JSON['stringify']({'type':_0x2998('0xff'),'capabilities':{'browserName':_0x2998('0x10c'),'chromeOptions':{'args':[_0x2998('0x10d'),'--disable-gpu']}}})}]);});}}};var _0x467f27={'testprojects'(_0x4867f0,{where,orderBy,skip,first},_0x33071d,_0x5e04e0){orderBy=orderBy||_0x2998('0xc1');skip=skip||0x0;first=first||0xa;return _0x33071d['db']['query'][_0x2998('0x10e')]({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x5e04e0);},'testproject'(_0x1ca13c,{id},_0x1b7cac,_0x8c5b98){return _0x1b7cac['db']['query']['testProject']({'where':{'id':id}},_0x8c5b98);}};var _0x52c60e={'apikeys'(_0x1893f3,{where,orderBy,skip,first},_0x27c707,_0x59c38a){orderBy=orderBy||'name_ASC';skip=skip||0x0;first=first||0xa;return _0x27c707['db'][_0x2998('0x23')]['apiKeys']({'where':where,'orderBy':orderBy,'skip':skip,'first':first},_0x59c38a);},'apikey'(_0x81c3c4,{id},_0x49270c,_0x5574f7){return _0x49270c['db'][_0x2998('0x23')][_0x2998('0x10f')]({'where':{'id':id}},_0x5574f7);}};const _0x535bf9=_0x29ada4=>{if(_0x29ada4===_0x2998('0x110')){return _0x7aab85()[_0x2998('0x111')](_0x2998('0x112'));}else if(_0x29ada4==='LASTWEEK'){return _0x7aab85()['subtract'](0x6,_0x2998('0x113'))[_0x2998('0x111')](_0x2998('0x112'));}else if(_0x29ada4===_0x2998('0x114')){return _0x7aab85()['subtract'](0xd,_0x2998('0x113'))[_0x2998('0x111')]('day');}else if(_0x29ada4===_0x2998('0x115')){return _0x7aab85()[_0x2998('0x116')](0x1e,'days')[_0x2998('0x111')](_0x2998('0x112'));}else if(_0x29ada4===_0x2998('0x117')){return _0x7aab85()[_0x2998('0x116')](0x3c,_0x2998('0x113'))[_0x2998('0x111')](_0x2998('0x112'));}};var _0x1a6a71={'chartFailedCountByChatbotByDay'(_0x410949,{timeFrame},_0x5da58f,_0x4800d3){let _0x2430ac=_0x535bf9(timeFrame||'LAST2WEEKS');const _0x323057=_0x7aab85();return _0x5da58f['db'][_0x2998('0x23')][_0x2998('0x118')]({'orderBy':_0x2998('0xc1')},_0x2998('0x28'))[_0x2998('0x3f')](_0x4fb7d8=>{return Promise['all'](_0x4fb7d8[_0x2998('0x55')](_0x32d926=>{const _0x5459c4=[];for(const _0x4253ba=_0x7aab85(_0x2430ac);_0x4253ba[_0x2998('0x119')](_0x323057);_0x4253ba[_0x2998('0x11a')](0x1,_0x2998('0x113'))){const _0x3d6fc0=_0x7aab85(_0x4253ba);const _0x42f599=_0x7aab85(_0x4253ba)[_0x2998('0x11a')](0x1,_0x2998('0x113'));_0x5459c4[_0x2998('0xcd')](_0x5da58f['db'][_0x2998('0x23')][_0x2998('0xec')]({'where':{'status_in':[_0x2998('0x9a'),_0x2998('0x9d')],'chatbot':{'id':_0x32d926['id']},'createdAt_gte':_0x3d6fc0['toDate'](),'createdAt_lte':_0x42f599[_0x2998('0x11b')]()}},_0x2998('0x11c'))[_0x2998('0x3f')](_0x2f7228=>{if(!_0x2f7228)return undefined;return Math[_0x2998('0x11d')](_0x2f7228[_0x2998('0x30')]((_0x5f25db,_0xd4025e)=>_0x5f25db+_0xd4025e[_0x2998('0x11e')][_0x2998('0x53')](_0x19ba55=>!_0x19ba55[_0x2998('0x11f')])[_0x2998('0x29')],0x0)/_0x2f7228[_0x2998('0x29')]);}));}return Promise['all'](_0x5459c4)[_0x2998('0x3f')](_0x4a2258=>{return{'id':_0x32d926['id'],'name':_0x32d926['name'],'data':_0x4a2258};});}));})[_0x2998('0x3f')](_0x1fe56a=>{return _0x1fe56a['filter'](_0x3f6be7=>_0x3f6be7[_0x2998('0x2a')]&&_0x3f6be7[_0x2998('0x2a')][_0x2998('0x53')](_0x33938e=>!isNaN(_0x33938e))[_0x2998('0x29')]>0x0);});},'chartTestSetResultCount'(_0x4ae7f8,_0x2a7e15,_0xcb6eae,_0x2e48fa){return _0xcb6eae['db'][_0x2998('0x23')][_0x2998('0x58')]({'orderBy':_0x2998('0xc1')},_0x2998('0x28'))[_0x2998('0x3f')](_0x2108e9=>{return Promise[_0x2998('0x120')](_0x2108e9[_0x2998('0x55')](_0x57799c=>{let _0x49ec1a=_0x535bf9(_0x2998('0x115'));const _0x4e210d=_0x7aab85();return _0xcb6eae['db'][_0x2998('0x23')]['testSessions']({'where':{'status_in':[_0x2998('0x9a'),'FAILED'],'testSets_some':{'id':_0x57799c['id']},'createdAt_gte':_0x49ec1a[_0x2998('0x11b')](),'createdAt_lte':_0x4e210d[_0x2998('0x11b')]()},'orderBy':_0x2998('0xeb'),'skip':0x0,'first':0x2},_0x2998('0x121'))[_0x2998('0x3f')](_0x56d0c=>{const _0x3806eb={'id':_0x57799c['id'],'name':_0x57799c['name'],'testCaseLastTotalCount':0x0,'testCaseLastSuccessCount':0x0,'testCaseLastSuccessRate':0x0,'testCasePreviousTotalCount':0x0,'testCasePreviousSuccessCount':0x0,'testCasePreviousSuccessRate':0x0,'testCaseTrend':_0x2998('0x122')};if(_0x56d0c&&_0x56d0c[_0x2998('0x29')]>0x0){const _0x135408=_0x56d0c[0x0][_0x2998('0x11e')][_0x2998('0x53')](_0x3a6638=>_0x3a6638[_0x2998('0x8b')]&&_0x3a6638[_0x2998('0x8b')]['id']===_0x57799c['id']);_0x3806eb[_0x2998('0x123')]=_0x135408[_0x2998('0x29')];_0x3806eb[_0x2998('0x124')]=_0x135408[_0x2998('0x53')](_0x100352=>_0x100352[_0x2998('0x11f')])[_0x2998('0x29')];_0x3806eb[_0x2998('0x125')]=_0x3806eb[_0x2998('0x123')]===_0x3806eb[_0x2998('0x124')]?0x64:_0x3806eb[_0x2998('0x124')]/_0x3806eb[_0x2998('0x123')]*0x64;}if(_0x56d0c&&_0x56d0c[_0x2998('0x29')]>0x1){const _0x4f5c6b=_0x56d0c[0x1][_0x2998('0x11e')][_0x2998('0x53')](_0x395294=>_0x395294[_0x2998('0x8b')]&&_0x395294[_0x2998('0x8b')]['id']===_0x57799c['id']);_0x3806eb[_0x2998('0x126')]=_0x4f5c6b[_0x2998('0x29')];_0x3806eb[_0x2998('0x127')]=_0x4f5c6b[_0x2998('0x53')](_0x2b5573=>_0x2b5573[_0x2998('0x11f')])[_0x2998('0x29')];_0x3806eb[_0x2998('0x128')]=_0x3806eb['testCasePreviousTotalCount']===_0x3806eb['testCasePreviousSuccessCount']?0x64:_0x3806eb[_0x2998('0x127')]/_0x3806eb[_0x2998('0x126')]*0x64;if(_0x3806eb[_0x2998('0x125')]>_0x3806eb[_0x2998('0x128')])_0x3806eb[_0x2998('0x129')]=_0x2998('0x12a');else if(_0x3806eb[_0x2998('0x125')]<_0x3806eb[_0x2998('0x128')])_0x3806eb['testCaseTrend']=_0x2998('0x12b');else _0x3806eb['testCaseTrend']=_0x2998('0x12c');}return _0x3806eb;});}));})[_0x2998('0x3f')](_0x4ad1fc=>{return _0x4ad1fc[_0x2998('0x53')](_0x3a00e0=>_0x3a00e0[_0x2998('0x123')]>0x0);});}};var _0x377dbb={async 'signup'(_0x41af28,_0x3c32c7,_0x32739d,_0x3d68a3){const _0x442d31=await _0x32eb53[_0x2998('0x12d')](_0x3c32c7[_0x2998('0x12e')],0xa);const _0x42a488=await _0x32739d['db'][_0x2998('0x3e')][_0x2998('0x12f')]({'data':{..._0x3c32c7,'password':_0x442d31}});return{'token':_0x2d1189[_0x2998('0x130')]({'userId':_0x42a488['id']},process['env'][_0x2998('0xbe')]),'user':_0x42a488};},async 'login'(_0x55f35a,{email,password},_0x43242d,_0x2a33ef){const _0x40683f=await _0x43242d['db'][_0x2998('0x23')][_0x2998('0xc0')]({'where':{'email':email}});if(!_0x40683f){throw new Error('No\x20such\x20user\x20found\x20for\x20email:\x20'+email);}const _0x495c41=await _0x32eb53[_0x2998('0x131')](password,_0x40683f['password']);if(!_0x495c41){throw new Error(_0x2998('0x132'));}return{'token':_0x2d1189['sign']({'userId':_0x40683f['id']},process['env'][_0x2998('0xbe')]),'user':_0x40683f};}};var _0x315e01={async 'createAgent'(_0x172ba1,{agent},_0x72d83c,_0x119539){return _0x72d83c['db'][_0x2998('0x3e')]['createAgent']({'data':agent},_0x119539);},async 'updateAgent'(_0xf95a7b,{id,agent},_0x577b1a,_0x3d8db8){const _0x2fe3a2=await _0x577b1a['db'][_0x2998('0x133')]['Agent']({'id':id});if(!_0x2fe3a2){throw new Error(_0x2998('0x134')+id);}return _0x577b1a['db'][_0x2998('0x3e')][_0x2998('0x135')]({'where':{'id':id},'data':agent},_0x3d8db8);},async 'deleteAgent'(_0x44f5aa,{id},_0x2baedc){return new Promise((_0x5cb7c9,_0x2da4b7)=>{_0x2baedc['db'][_0x2998('0x3e')][_0x2998('0x136')]({'where':{'id':id}},_0x2998('0x137'))['then'](()=>_0x5cb7c9(!![]))[_0x2998('0x42')](_0xe95fc5=>_0x2da4b7(_0xe95fc5));});}};var _0x1a759f={async 'createChatbot'(_0x18d456,{chatbot},_0xe079fc,_0xc88b16){return _0xe079fc['db'][_0x2998('0x3e')][_0x2998('0x138')]({'data':chatbot},_0xc88b16);},async 'updateChatbot'(_0x3b70f4,{id,chatbot},_0x5cee38,_0x471626){const _0x448577=await _0x5cee38['db'][_0x2998('0x133')][_0x2998('0x139')]({'id':id});if(!_0x448577){throw new Error(_0x2998('0x13a')+id);}return _0x5cee38['db']['mutation'][_0x2998('0x13b')]({'where':{'id':id},'data':chatbot},_0x471626);},async 'deleteChatbot'(_0x233178,{id},_0xc38012){return new Promise((_0x55cf5d,_0xcbfa74)=>{_0xc38012['db'][_0x2998('0x3e')]['deleteChatbot']({'where':{'id':id}},'{id}')['then'](()=>_0x55cf5d(!![]))[_0x2998('0x42')](_0x1bd80a=>_0xcbfa74(_0x1bd80a));});}};const _0x307dca=_0x301cbd(_0x2998('0x13c'));var _0x15d61d={async 'createTestSession'(_0x5651c0,{testSession},_0x6d623c,_0x27eb15){return _0x6d623c['db'][_0x2998('0x3e')][_0x2998('0x13d')]({'data':testSession},_0x27eb15)[_0x2998('0x3f')](_0x5ad597=>{return new Promise((_0x16205a,_0x2d651b)=>{_0x6d623c[_0x2998('0x63')]['create'](_0x2998('0xac'),{'title':'Job\x20Creation\x20Job\x20for\x20Test\x20Session\x20'+testSession[_0x2998('0x2b')],'testSessionId':_0x5ad597['id']})[_0x2998('0x66')](!![])[_0x2998('0x67')](_0x195150=>{if(_0x195150){return _0x2d651b(_0x195150);}_0x16205a(_0x5ad597);});});});},async 'deleteTestSession'(_0x5db17b,{id},_0x40e360){return new Promise((_0x34f178,_0x2e3f46)=>{_0x40e360['db']['mutation'][_0x2998('0x13e')]({'where':{'testSessionJob':{'testSession':{'id':id}}}})[_0x2998('0x3f')](()=>_0x40e360['db'][_0x2998('0x3e')]['deleteManyTestSessionJobs']({'where':{'testSession':{'id':id}}}))[_0x2998('0x3f')](()=>_0x40e360['db'][_0x2998('0x3e')][_0x2998('0x13f')]({'where':{'testSession':{'id':id}}}))['then'](()=>_0x40e360['db'][_0x2998('0x3e')]['deleteTestSession']({'where':{'id':id}},_0x2998('0x137')))[_0x2998('0x3f')](()=>_0x34f178(!![]))[_0x2998('0x42')](_0x4d543e=>{_0x307dca(_0x2998('0x140')+id+':\x20'+_0x4d543e);return _0x2e3f46(_0x4d543e);});});}};var _0x36510f={async 'createTestSet'(_0x286977,{testSet},_0x189d33,_0xa615ae){return _0x189d33['db'][_0x2998('0x3e')]['createTestSet']({'data':testSet},_0xa615ae);},async 'updateTestSet'(_0x471cf4,{id,testSet},_0x5f07f8,_0x3f1e80){const _0x21bcfc=await _0x5f07f8['db']['exists'][_0x2998('0x141')]({'id':id});if(!_0x21bcfc){throw new Error('TestSet\x20not\x20found\x20'+id);}return _0x5f07f8['db'][_0x2998('0x3e')][_0x2998('0x142')]({'where':{'id':id},'data':testSet},_0x3f1e80);},async 'deleteTestSet'(_0x1c1e3e,{id},_0x552e0b){return new Promise((_0x2ad4ef,_0x409b34)=>{_0x552e0b['db'][_0x2998('0x3e')]['deleteTestSet']({'where':{'id':id}},_0x2998('0x137'))[_0x2998('0x3f')](()=>_0x2ad4ef(!![]))['catch'](_0x131712=>_0x409b34(_0x131712));});},async 'createTestSetScript'(_0x441cdd,{testSetScript},_0x3c4dad,_0x3045be){return _0x3c4dad['db'][_0x2998('0x3e')][_0x2998('0x143')]({'data':testSetScript},_0x3045be);},async 'updateTestSetScript'(_0x59b70e,{id,testSetScript},_0x38dda5,_0x5dea40){const _0x451fcc=await _0x38dda5['db']['exists'][_0x2998('0x144')]({'id':id});if(!_0x451fcc){throw new Error('TestSetScript\x20not\x20found\x20'+id);}return _0x38dda5['db'][_0x2998('0x3e')][_0x2998('0x145')]({'where':{'id':id},'data':testSetScript},_0x5dea40);},async 'deleteTestSetScript'(_0x3d4f25,{id},_0x5964c0){return new Promise((_0x2389d1,_0x241e80)=>{_0x5964c0['db']['mutation'][_0x2998('0x146')]({'where':{'id':id}},'{id}')[_0x2998('0x3f')](()=>_0x2389d1(!![]))['catch'](_0x253f4b=>_0x241e80(_0x253f4b));});},async 'createTestSetRepository'(_0x39434c,{testSetRepository},_0x2461b7,_0x290488){return _0x2461b7['db'][_0x2998('0x3e')][_0x2998('0x147')]({'data':testSetRepository},_0x290488);},async 'updateTestSetRepository'(_0x423efc,{id,testSetRepository},_0x597aee,_0x102793){const _0x460863=await _0x597aee['db'][_0x2998('0x133')][_0x2998('0x148')]({'id':id});if(!_0x460863){throw new Error(_0x2998('0x149')+id);}return _0x597aee['db'][_0x2998('0x3e')][_0x2998('0x14a')]({'where':{'id':id},'data':testSetRepository},_0x102793);},async 'deleteTestSetRepository'(_0x1c784f,{id},_0x331fa9){return new Promise((_0x5919e1,_0x2098f7)=>{_0x331fa9['db']['mutation']['deleteTestSetRepository']({'where':{'id':id}},_0x2998('0x137'))[_0x2998('0x3f')](()=>_0x5919e1(!![]))[_0x2998('0x42')](_0x317258=>_0x2098f7(_0x317258));});},async 'createTestSetFolder'(_0x311664,{testSetFolder},_0x1da663,_0x442b11){return _0x1da663['db'][_0x2998('0x3e')][_0x2998('0x14b')]({'data':testSetFolder},_0x442b11);},async 'updateTestSetFolder'(_0x4fc584,{id,testSetFolder},_0x133206,_0x461272){const _0x5dbc21=await _0x133206['db'][_0x2998('0x133')][_0x2998('0x14c')]({'id':id});if(!_0x5dbc21){throw new Error(_0x2998('0x14d')+id);}return _0x133206['db']['mutation']['updateTestSetFolder']({'where':{'id':id},'data':testSetFolder},_0x461272);},async 'deleteTestSetFolder'(_0x10da63,{id},_0x31002f){return new Promise((_0x298bb3,_0x4b412f)=>{_0x31002f['db']['mutation'][_0x2998('0x14e')]({'where':{'id':id}},_0x2998('0x137'))[_0x2998('0x3f')](()=>_0x298bb3(!![]))[_0x2998('0x42')](_0x2bd177=>_0x4b412f(_0x2bd177));});}};const _0x469eab=_0x15d61d['createTestSession'];const _0x2d4328=_0x301cbd(_0x2998('0x14f'));var _0x50c0c4={async 'createTestProject'(_0x1eac21,{testProject},_0x514f9c,_0x21ec4e){return _0x514f9c['db'][_0x2998('0x3e')][_0x2998('0x150')]({'data':{...testProject,'code':_0x149e8a(testProject[_0x2998('0x2b')])}},_0x21ec4e);},async 'startTestProject'(_0x18b49d,{id,code},_0xe1db7d){return _0xe1db7d['db'][_0x2998('0x23')][_0x2998('0x4f')]({'where':{'id':id,'code':code}},_0x2998('0x151'))[_0x2998('0x3f')](_0x41e990=>{if(!_0x41e990)throw new Error(_0x2998('0x152')+id+'/'+code+_0x2998('0x153'));return _0x469eab(_0x18b49d,{'testSession':{'name':_0x41e990[_0x2998('0x2b')]+_0x2998('0x154'),'status':_0x2998('0x68'),'tags':{'set':['Manual']},'chatbot':{'connect':{'id':_0x41e990[_0x2998('0xc3')]['id']}},'testSets':{'connect':_0x41e990[_0x2998('0x58')]&&_0x41e990['testSets']['map'](_0x70bf7d=>{return{'id':_0x70bf7d['id']};})},'deviceSets':{'connect':_0x41e990[_0x2998('0x6b')]&&_0x41e990[_0x2998('0x6b')][_0x2998('0x55')](_0x2502c8=>{return{'id':_0x2502c8['id']};})},'testProject':{'connect':{'id':_0x41e990['id']}}}},_0xe1db7d,_0x2998('0x82'));})[_0x2998('0x3f')](_0x1e6073=>_0x1e6073['id']);},async 'quickstartTestProject'(_0x26f60c,{testProject},_0x471778){return _0x471778['db'][_0x2998('0x3e')]['createTestProject']({'data':{...testProject,'code':_0x149e8a(testProject['name'])}},_0x2998('0x151'))[_0x2998('0x3f')](_0x1ffbae=>{return _0x469eab(_0x26f60c,{'testSession':{'name':_0x1ffbae['name']+'\x20-\x20Initial\x20Test\x20Session','status':_0x2998('0x68'),'tags':{'set':['QuickStart']},'chatbot':{'connect':{'id':_0x1ffbae[_0x2998('0xc3')]['id']}},'testSets':{'connect':_0x1ffbae[_0x2998('0x58')]&&_0x1ffbae[_0x2998('0x58')][_0x2998('0x55')](_0x407413=>{return{'id':_0x407413['id']};})},'deviceSets':{'connect':_0x1ffbae[_0x2998('0x6b')]&&_0x1ffbae[_0x2998('0x6b')][_0x2998('0x55')](_0x5d4b74=>{return{'id':_0x5d4b74['id']};})},'testProject':{'connect':{'id':_0x1ffbae['id']}}}},_0x471778,_0x2998('0x82'));})[_0x2998('0x3f')](_0x468562=>_0x468562['id']);},async 'updateTestProject'(_0x314a34,{id,testProject},_0x5bf962,_0x3688ca){const _0xcdfba7=await _0x5bf962['db']['exists'][_0x2998('0x155')]({'id':id});if(!_0xcdfba7){throw new Error('TestProject\x20not\x20found\x20'+id);}return _0x5bf962['db'][_0x2998('0x3e')][_0x2998('0x156')]({'where':{'id':id},'data':{...testProject,'code':_0x149e8a(testProject[_0x2998('0x2b')])}},_0x3688ca);},async 'deleteTestProject'(_0x590ac9,{id},_0x1996cd){return new Promise((_0x4cd817,_0x2c52ed)=>{_0x1996cd['db'][_0x2998('0x3e')][_0x2998('0x79')]({'data':{'testProject':{'disconnect':!![]}},'where':{'testProject':{'id':id}}})[_0x2998('0x3f')](()=>_0x1996cd['db']['mutation'][_0x2998('0x157')]({'where':{'id':id}},'{id}'))[_0x2998('0x3f')](()=>_0x4cd817(!![]))[_0x2998('0x42')](_0x393acd=>{_0x2d4328(_0x2998('0x158')+id+':\x20'+_0x393acd);return _0x2c52ed(_0x393acd);});});}};const _0x360243=_0x301cbd(_0x2998('0x159'));var _0x4cff9b={async 'createApiKey'(_0x131355,{apiKey},_0x6dba35,_0x4b4e51){apiKey[_0x2998('0x15a')]=_0x1d6e5c(_0x2998('0x15b'),0x14);return _0x6dba35['db']['mutation'][_0x2998('0x15c')]({'data':apiKey},_0x4b4e51);},async 'updateApiKey'(_0x3e0c0c,{id,apiKey},_0x25a0ab,_0x2e9a30){const _0x179d33=await _0x25a0ab['db'][_0x2998('0x133')]['ApiKey']({'id':id});if(!_0x179d33){throw new Error(_0x2998('0x15d')+id);}delete apiKey[_0x2998('0x15a')];return _0x25a0ab['db'][_0x2998('0x3e')]['updateApiKey']({'where':{'id':id},'data':apiKey},_0x2e9a30);},async 'deleteApiKey'(_0x6849cf,{id},_0x467be4){return _0x467be4['db'][_0x2998('0x3e')][_0x2998('0x15e')]({'where':{'id':id}},_0x2998('0x137'))[_0x2998('0x3f')](()=>!![])[_0x2998('0x42')](_0xad2a2a=>{_0x360243(_0x2998('0x15f')+id+':\x20'+_0xad2a2a);throw _0xad2a2a;});}};const _0x2703df=_0x301cbd(_0x2998('0x160'));var _0x5dd0d9={async 'createDeviceSet'(_0x792936,{deviceSet},_0x267edb,_0x57498b){return _0x267edb['db'][_0x2998('0x3e')][_0x2998('0x161')]({'data':deviceSet},_0x57498b);},async 'updateDeviceSet'(_0x31a6e0,{id,deviceSet},_0x347c2b,_0x302a64){const _0x4ab8fb=await _0x347c2b['db'][_0x2998('0x133')]['DeviceSet']({'id':id});if(!_0x4ab8fb){throw new Error('DeviceSet\x20not\x20found\x20'+id);}return _0x347c2b['db'][_0x2998('0x3e')][_0x2998('0x162')]({'where':{'id':id},'data':deviceSet},_0x302a64);},async 'deleteDeviceSet'(_0xf7e6a,{id},_0x127cea){return new Promise((_0x15ce34,_0x124268)=>{_0x127cea['db'][_0x2998('0x23')][_0x2998('0x90')]({'where':{'id':id}},_0x2998('0x163'))['then'](_0x42dbd8=>{if(!_0x42dbd8)throw new Error('DeviceSet\x20not\x20found\x20'+id);return _0x127cea['db'][_0x2998('0x3e')][_0x2998('0x164')]({'where':{'id_in':_0x42dbd8[_0x2998('0x6c')][_0x2998('0x55')](_0x19118a=>_0x19118a['id'])}});})['then'](()=>_0x127cea['db']['mutation']['deleteDeviceSet']({'where':{'id':id}},_0x2998('0x137')))['then'](()=>_0x15ce34(!![]))['catch'](_0x21e914=>{_0x2703df(_0x2998('0x165')+id+':\x20'+_0x21e914);return _0x124268(_0x21e914);});});}};const _0xa74350={};var _0x2b8768=_0xa74350;const {withFilter}=_0x17f456;var _0x57da99={'testSessionProgress':{'subscribe':withFilter((_0x496225,{testSessionId},{pubsub})=>_0x228d99[_0x2998('0xca')](_0x2998('0xa4')),(_0x372d6f,{testSessionId})=>{return _0x372d6f[_0x2998('0x166')]['id']===testSessionId;})},'newTestSession':{'subscribe':(_0x212a4c,_0x1074c3,_0x301844,_0xe06cb2)=>{return _0x301844['db']['subscription'][_0x2998('0x80')]({'where':{'mutation_in':[_0x2998('0x167')]}},_0xe06cb2);}},'changeTestSession':{'subscribe':(_0x15a2e9,{ids},_0x365881,_0x53befd)=>{return _0x365881['db'][_0x2998('0x168')]['testSession']({'where':{'mutation_in':['UPDATED'],'node':{'id_in':ids}}},_0x53befd);}},'changeTestSessionJobs':{'subscribe':(_0x35e8ee,{testSessionIds},_0x3a01c5,_0xa6fefd)=>{return _0x3a01c5['db'][_0x2998('0x168')][_0x2998('0x169')]({'where':{'mutation_in':['UPDATED'],'node':{'testSession':{'id_in':testSessionIds}}}},_0xa6fefd);}},'newTestSessionJobLogs':{'subscribe':(_0x58bb61,{testSessionJobId},_0x32e37d,_0x1c4b28)=>{return _0x32e37d['db'][_0x2998('0x168')][_0x2998('0x16a')]({'where':{'mutation_in':['CREATED'],'node':{'testSessionJob':{'id':testSessionJobId}}}},_0x1c4b28);}},'newTestSessionTestCaseResults':{'subscribe':(_0x19a5d0,{testSessionIds},_0x348d70,_0x1b5a6f)=>{return _0x348d70['db'][_0x2998('0x168')][_0x2998('0x16b')]({'where':{'mutation_in':['CREATED'],'node':{'testSession':{'id_in':testSessionIds}}}},_0x1b5a6f);}}};const {AuthPayload:AuthPayload$1}=_0x16a6ad;var _0x281322={'Query':{..._0x517fc1,..._0x1174c7,..._0x27ea91,..._0x1e76ff[_0x2998('0x16c')],..._0x13103a,..._0x3b8d00,..._0x25f9cb,..._0x467f27,..._0x52c60e,..._0x1a6a71},'Mutation':{..._0x377dbb,..._0x315e01,..._0x1a759f,..._0x1e76ff['Mutation'],..._0x15d61d,..._0x36510f,..._0x50c0c4,..._0x4cff9b,..._0x5dd0d9},'Subscription':{..._0x2b8768,..._0x1e76ff[_0x2998('0x16d')],..._0x57da99},'AuthPayload':AuthPayload$1};const _0x20a62e=_0x301cbd(_0x2998('0x16e'));var _0x5d6ebd=(_0x300763,_0x5f3d9c)=>{_0x300763[_0x2998('0xb9')](_0x2998('0x16f'),(_0x2d72c0,_0xa76663)=>{const _0x42b998=_0x2d72c0[_0x2998('0x170')]['id'];const _0x1c32ee=_0x5f3d9c(_0x2d72c0);_0x1638de[_0x2998('0x171')](_0x1c32ee['db'],_0x42b998)[_0x2998('0x3f')](_0x5d6ebd=>{if(_0x5d6ebd){const _0x942252=new Buffer(_0x5d6ebd['base64'],_0x2998('0x94'));_0xa76663[_0x2998('0x172')](0xc8,{'Content-Type':_0x5d6ebd[_0x2998('0x93')],'Content-Length':_0x942252[_0x2998('0x29')]});_0xa76663[_0x2998('0x173')](_0x942252);}else{_0x20a62e('Attachment\x20not\x20found\x20-\x20'+_0x42b998);_0xa76663[_0x2998('0x174')](0x194);}})[_0x2998('0x42')](_0x400c26=>{_0x20a62e(_0x2998('0x175')+_0x42b998+'\x20-\x20'+_0x400c26);_0xa76663[_0x2998('0x174')](0x194);});});};const _0x740492=_0x301cbd(_0x2998('0x176'));const _0xe0a01f=_0x15d61d['createTestSession'];const _0x3e39ee=(_0x2707dd,_0x552d49)=>{return _0x2707dd[_0x2998('0x23')][_0x552d49]||_0x2707dd[_0x2998('0x177')]&&_0x2707dd[_0x2998('0x177')][_0x552d49]||_0x2707dd[_0x2998('0x178')][_0x552d49];};const _0x404486=(_0x6758c0,_0x8efe07,_0x5db5c3)=>{const _0x128f8d=_0x8efe07[_0x2998('0xa2')][_0x2998('0xca')]('TEST_SESSION_PROGRESS');(async function loop(){while(!![]){const {value}=await _0x128f8d['next']();if(value['testSessionProgress']&&value['testSessionProgress'][_0x2998('0x179')]&&value[_0x2998('0x166')]['id']===_0x6758c0){_0x740492(_0x2998('0x152')+_0x6758c0+_0x2998('0x17a')+value[_0x2998('0x166')][_0x2998('0x179')]);if(value['testSessionProgress'][_0x2998('0x179')]==='READY'){_0x5db5c3[_0x2998('0x179')](0xc8)[_0x2998('0x17b')]({'testSessionId':value[_0x2998('0x166')]['id'],'status':value[_0x2998('0x166')][_0x2998('0x179')]});return;}if(value[_0x2998('0x166')][_0x2998('0x179')]==='FAILED'){_0x5db5c3['status'](0x1f4)[_0x2998('0x17b')]({'testSessionId':value[_0x2998('0x166')]['id'],'status':value[_0x2998('0x166')]['status']});return;}}}}());};const _0x298027=({ctxFactory,testProjectCode,req,res})=>{const _0x3d8479=_0x5e1b62(req);_0x3d8479['db']['query'][_0x2998('0x4f')]({'where':{'code':testProjectCode}},'{\x20id\x20name\x20chatbot\x20{\x20id\x20}\x20testSets\x20{\x20id\x20}\x20deviceSets\x20{\x20id\x20}\x20}')[_0x2998('0x3f')](_0x4739bb=>{if(!_0x4739bb){throw new Error(_0x2998('0x152')+testProjectCode+_0x2998('0x153'));}const _0xcd8891=_0x3e39ee(req,_0x2998('0x17c'));const _0x213cb8=_0x3e39ee(req,_0x2998('0x17d'));const _0x2baa8e=_0x3e39ee(req,_0x2998('0x17e'));const _0x359e72={'name':_0xcd8891||_0x4739bb['name']+_0x2998('0x17f'),'description':_0x213cb8,'status':'PENDING','tags':{'set':_0x2baa8e?_0x12b415[_0x2998('0x180')](_0x2baa8e)?_0x2baa8e:[_0x2baa8e]:[]},'chatbot':{'connect':{'id':_0x4739bb['chatbot']['id']}},'testSets':{'connect':_0x4739bb['testSets']&&_0x4739bb['testSets'][_0x2998('0x55')](_0x4213ca=>{return{'id':_0x4213ca['id']};})},'deviceSets':{'connect':_0x4739bb[_0x2998('0x6b')]&&_0x4739bb['deviceSets']['map'](_0x5785aa=>{return{'id':_0x5785aa['id']};})},'testProject':{'connect':{'id':_0x4739bb['id']}}};_0x740492(_0x2998('0x181')+JSON[_0x2998('0x51')](_0x359e72,null,0x2));return _0xe0a01f(null,{'testSession':_0x359e72},_0x3d8479,_0x2998('0x82'));})[_0x2998('0x3f')](_0x3ca123=>{const _0x53764f=_0x3e39ee(req,_0x2998('0x182'));if(_0x53764f==='1'){_0x404486(_0x3ca123['id'],_0x3d8479,res);}else{res[_0x2998('0x179')](0xc8)[_0x2998('0x17b')]({'testSessionId':_0x3ca123['id']});}})[_0x2998('0x42')](_0x1b5d58=>{_0x740492(_0x2998('0x183')+testProjectCode+_0x2998('0xea')+_0x1b5d58);res[_0x2998('0x174')](0x194);});};const _0x3f322e=({ctxFactory,nameOrId,req,res})=>{const _0x34d45c=_0x5e1b62(req);res[_0x2998('0x17b')]({'status':_0x2998('0x184')});};var _0x258fcc=(_0x2d7a95,_0x567937)=>{const _0x20e03d=(_0x19e203,_0x33b829)=>{_0x298027({'testProjectCode':_0x19e203[_0x2998('0x170')][_0x2998('0x185')],'ctxFactory':_0x567937,'req':_0x19e203,'res':_0x33b829});};const _0x2a5bd1=(_0x218fad,_0x11875d)=>{_0x3f322e({'nameOrId':_0x218fad['params']['nameOrId'],'ctxFactory':_0x567937,'req':_0x218fad,'res':_0x11875d});};_0x2d7a95[_0x2998('0x186')](_0x2998('0x187'),_0x20e03d);_0x2d7a95['get'](_0x2998('0x187'),_0x20e03d);_0x2d7a95['get']('/api/build/:nameOrId',_0x2a5bd1);};const _0x278830=_0x301cbd('botium-box-server-endpoints');const _0x193435=(_0x1fc0e1,_0x1b01f1,_0x53abfb,_0x3ca63f)=>{const _0x2cc56d=_0x1b01f1[_0x2998('0x23')][_0x2998('0x188')]||_0x1b01f1[_0x2998('0x177')]&&_0x1b01f1[_0x2998('0x177')][_0x2998('0x188')]||_0x1b01f1['headers'][_0x2998('0x188')];if(!_0x2cc56d)return _0x53abfb['sendStatus'](0x191);const _0x597429=_0x1fc0e1(_0x1b01f1);_0x1638de[_0x2998('0x189')](_0x597429['db'],_0x2cc56d)[_0x2998('0x3f')](_0x5569f4=>{if(_0x5569f4){_0x278830('Api\x20Key\x20found\x20-\x20'+_0x1b6bc8[_0x2998('0x18a')](_0x5569f4));_0x3ca63f();}else{_0x278830(_0x2998('0x18b')+_0x2cc56d);_0x53abfb[_0x2998('0x174')](0x191);}})[_0x2998('0x42')](_0x46ad33=>{_0x278830(_0x2998('0x18c')+_0x2cc56d+_0x2998('0xea')+_0x46ad33);_0x53abfb[_0x2998('0x174')](0x191);});};var _0x224264=(_0x50b313,_0xdf10bb)=>{_0x50b313[_0x2998('0x18d')]([_0x2998('0x18e'),_0x2998('0x18f')],_0x193435[_0x2998('0x190')](null,_0xdf10bb));_0x258fcc(_0x50b313,_0xdf10bb);_0x5d6ebd(_0x50b313,_0xdf10bb);};const {GraphQLServer,PubSub}=_0x17f456;const {Prisma}=_0x29add9;const _0x321777=_0x301cbd(_0x2998('0x191'));const _0x44492f=()=>{return new Prisma({'typeDefs':'src/generated/prisma.graphql','endpoint':process[_0x2998('0xbd')]['PRISMA_ENDPOINT'],'debug':process[_0x2998('0xbd')][_0x2998('0x192')],'secret':process[_0x2998('0xbd')]['PRISMA_SECRET']});};let _0x1cc8a2={};if(process[_0x2998('0xbd')][_0x2998('0x193')]){try{_0x1cc8a2=JSON[_0x2998('0x38')](process['env']['BOTIUM_QUEUE_SETTINGS']);_0x321777(_0x2998('0x194')+JSON['stringify'](_0x1cc8a2)+'\x22');}catch(_0x374d53){console['log'](_0x2998('0x195')+process[_0x2998('0xbd')][_0x2998('0x193')]+'\x22:');console['log'](_0x374d53);process[_0x2998('0x196')](0x1);}}const _0xd4026a=_0x3cf3c2[_0x2998('0x197')](_0x1cc8a2);const _0x228d99=new PubSub();const _0x5e1b62=_0x3ab26a=>({..._0x3ab26a||{},'db':_0x44492f(),'queueConnector':_0xd4026a,'pubsub':_0x228d99});const _0x25ac61=new GraphQLServer({'typeDefs':_0x2998('0x198'),'resolvers':_0x281322,'resolverValidationOptions':{'requireResolversForResolveType':![]},'context':_0x5e1b62});const _0x3be623={'port':process['env']['PORT']||0xfa0,'endpoint':_0x2998('0x199'),'subscriptions':{'path':_0x2998('0x19a'),'onConnect':(_0x2e3aae,_0x19f2d8,_0x28047e)=>{_0x321777('onConnect\x20called');},'onDisconnect':(_0x3b1384,_0x5948c1)=>{_0x321777('onDisconnect\x20called');}},'playground':'/playground'};_0x25ac61['start'](_0x3be623,({port})=>{_0x224264(_0x25ac61[_0x2998('0x1f')],_0x5e1b62);const _0x39b50f=_0x1abf60['join'](__dirname,_0x2998('0x19b'));_0x25ac61[_0x2998('0x1f')]['use'](_0x5cdda8());_0x25ac61[_0x2998('0x1f')][_0x2998('0x18d')]('/',_0x4d293d['static'](_0x39b50f));console[_0x2998('0x47')](_0x2998('0x19c')+port+_0x2998('0x19d')+_0x39b50f);});const _0x365111=new _0x5b50bc(_0x5e1b62);_0x365111[_0x2998('0xa7')]();var _0x38f343={};return _0x38f343;}));